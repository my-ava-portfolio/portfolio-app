(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[154],{5625:(xt,nt,m)=>{"use strict";m.d(nt,{H:()=>N,p:()=>b});var V=m(2687);const b=V.FGq,N=V.TL5},2402:function(xt){xt.exports=function(){"use strict";function nt(i,d,E,T,s){!function l(n,o,O,R,w){for(;R>O;){if(R-O>600){var M=R-O+1,F=o-O+1,f=Math.log(M),S=.5*Math.exp(2*f/3),P=.5*Math.sqrt(f*S*(M-S)/M)*(F-M/2<0?-1:1);l(n,o,Math.max(O,Math.floor(o-F*S/M+P)),Math.min(R,Math.floor(o+(M-F)*S/M+P)),w)}var at=n[o],H=O,lt=R;for(m(n,O,o),w(n[R],at)>0&&m(n,O,R);H<lt;){for(m(n,H,lt),H++,lt--;w(n[H],at)<0;)H++;for(;w(n[lt],at)>0;)lt--}0===w(n[O],at)?m(n,O,lt):m(n,++lt,R),lt<=o&&(O=lt+1),o<=lt&&(R=lt-1)}}(i,d,E||0,T||i.length-1,s||V)}function m(i,d,E){var T=i[d];i[d]=i[E],i[E]=T}function V(i,d){return i<d?-1:i>d?1:0}var b=function(i){void 0===i&&(i=9),this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function N(i,d,E){if(!E)return d.indexOf(i);for(var T=0;T<d.length;T++)if(E(i,d[T]))return T;return-1}function D(i,d){Y(i,0,i.children.length,d,i)}function Y(i,d,E,T,s){s||(s=r(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var l=d;l<E;l++){var n=i.children[l];v(s,i.leaf?T(n):n)}return s}function v(i,d){return i.minX=Math.min(i.minX,d.minX),i.minY=Math.min(i.minY,d.minY),i.maxX=Math.max(i.maxX,d.maxX),i.maxY=Math.max(i.maxY,d.maxY),i}function ot(i,d){return i.minX-d.minX}function z(i,d){return i.minY-d.minY}function G(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function u(i){return i.maxX-i.minX+(i.maxY-i.minY)}function p(i,d){return i.minX<=d.minX&&i.minY<=d.minY&&d.maxX<=i.maxX&&d.maxY<=i.maxY}function Z(i,d){return d.minX<=i.maxX&&d.minY<=i.maxY&&d.maxX>=i.minX&&d.maxY>=i.minY}function r(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(i,d,E,T,s){for(var l=[d,E];l.length;)if(!((E=l.pop())-(d=l.pop())<=T)){var n=d+Math.ceil((E-d)/T/2)*T;nt(i,n,d,E,s),l.push(d,n,n,E)}}return b.prototype.all=function(){return this._all(this.data,[])},b.prototype.search=function(i){var d=this.data,E=[];if(!Z(i,d))return E;for(var T=this.toBBox,s=[];d;){for(var l=0;l<d.children.length;l++){var n=d.children[l],o=d.leaf?T(n):n;Z(i,o)&&(d.leaf?E.push(n):p(i,o)?this._all(n,E):s.push(n))}d=s.pop()}return E},b.prototype.collides=function(i){var d=this.data;if(!Z(i,d))return!1;for(var E=[];d;){for(var T=0;T<d.children.length;T++){var s=d.children[T],l=d.leaf?this.toBBox(s):s;if(Z(i,l)){if(d.leaf||p(i,l))return!0;E.push(s)}}d=E.pop()}return!1},b.prototype.load=function(i){if(!i||!i.length)return this;if(i.length<this._minEntries){for(var d=0;d<i.length;d++)this.insert(i[d]);return this}var E=this._build(i.slice(),0,i.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<E.height){var T=this.data;this.data=E,E=T}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this},b.prototype.insert=function(i){return i&&this._insert(i,this.data.height-1),this},b.prototype.clear=function(){return this.data=r([]),this},b.prototype.remove=function(i,d){if(!i)return this;for(var E,T,s,l=this.data,n=this.toBBox(i),o=[],O=[];l||o.length;){if(l||(l=o.pop(),T=o[o.length-1],E=O.pop(),s=!0),l.leaf){var R=N(i,l.children,d);if(-1!==R)return l.children.splice(R,1),o.push(l),this._condense(o),this}s||l.leaf||!p(l,n)?T?(E++,l=T.children[E],s=!1):l=null:(o.push(l),O.push(E),E=0,T=l,l=l.children[0])}return this},b.prototype.toBBox=function(i){return i},b.prototype.compareMinX=function(i,d){return i.minX-d.minX},b.prototype.compareMinY=function(i,d){return i.minY-d.minY},b.prototype.toJSON=function(){return this.data},b.prototype.fromJSON=function(i){return this.data=i,this},b.prototype._all=function(i,d){for(var E=[];i;)i.leaf?d.push.apply(d,i.children):E.push.apply(E,i.children),i=E.pop();return d},b.prototype._build=function(i,d,E,T){var s,l=E-d+1,n=this._maxEntries;if(l<=n)return D(s=r(i.slice(d,E+1)),this.toBBox),s;T||(T=Math.ceil(Math.log(l)/Math.log(n)),n=Math.ceil(l/Math.pow(n,T-1))),(s=r([])).leaf=!1,s.height=T;var o=Math.ceil(l/n),O=o*Math.ceil(Math.sqrt(n));x(i,d,E,O,this.compareMinX);for(var R=d;R<=E;R+=O){var w=Math.min(R+O-1,E);x(i,R,w,o,this.compareMinY);for(var M=R;M<=w;M+=o){var F=Math.min(M+o-1,w);s.children.push(this._build(i,M,F,T-1))}}return D(s,this.toBBox),s},b.prototype._chooseSubtree=function(i,d,E,T){for(;T.push(d),!d.leaf&&T.length-1!==E;){for(var s=1/0,l=1/0,n=void 0,o=0;o<d.children.length;o++){var O=d.children[o],R=G(O),w=(M=i,F=O,(Math.max(F.maxX,M.maxX)-Math.min(F.minX,M.minX))*(Math.max(F.maxY,M.maxY)-Math.min(F.minY,M.minY))-R);w<l?(l=w,s=R<s?R:s,n=O):w===l&&R<s&&(s=R,n=O)}d=n||d.children[0]}var M,F;return d},b.prototype._insert=function(i,d,E){var T=E?i:this.toBBox(i),s=[],l=this._chooseSubtree(T,this.data,d,s);for(l.children.push(i),v(l,T);d>=0&&s[d].children.length>this._maxEntries;)this._split(s,d),d--;this._adjustParentBBoxes(T,s,d)},b.prototype._split=function(i,d){var E=i[d],T=E.children.length,s=this._minEntries;this._chooseSplitAxis(E,s,T);var l=this._chooseSplitIndex(E,s,T),n=r(E.children.splice(l,E.children.length-l));n.height=E.height,n.leaf=E.leaf,D(E,this.toBBox),D(n,this.toBBox),d?i[d-1].children.push(n):this._splitRoot(E,n)},b.prototype._splitRoot=function(i,d){this.data=r([i,d]),this.data.height=i.height+1,this.data.leaf=!1,D(this.data,this.toBBox)},b.prototype._chooseSplitIndex=function(i,d,E){for(var T,s,l,n,o,O,R,w=1/0,M=1/0,F=d;F<=E-d;F++){var f=Y(i,0,F,this.toBBox),S=Y(i,F,E,this.toBBox),P=(s=f,l=S,void 0,void 0,void 0,void 0,n=Math.max(s.minX,l.minX),o=Math.max(s.minY,l.minY),O=Math.min(s.maxX,l.maxX),R=Math.min(s.maxY,l.maxY),Math.max(0,O-n)*Math.max(0,R-o)),j=G(f)+G(S);P<w?(w=P,T=F,M=j<M?j:M):P===w&&j<M&&(M=j,T=F)}return T||E-d},b.prototype._chooseSplitAxis=function(i,d,E){var T=i.leaf?this.compareMinX:ot,s=i.leaf?this.compareMinY:z;this._allDistMargin(i,d,E,T)<this._allDistMargin(i,d,E,s)&&i.children.sort(T)},b.prototype._allDistMargin=function(i,d,E,T){i.children.sort(T);for(var s=this.toBBox,l=Y(i,0,d,s),n=Y(i,E-d,E,s),o=u(l)+u(n),O=d;O<E-d;O++){var R=i.children[O];v(l,i.leaf?s(R):R),o+=u(l)}for(var w=E-d-1;w>=d;w--){var M=i.children[w];v(n,i.leaf?s(M):M),o+=u(n)}return o},b.prototype._adjustParentBBoxes=function(i,d,E){for(var T=E;T>=0;T--)v(d[T],i)},b.prototype._condense=function(i){for(var d=i.length-1,E=void 0;d>=0;d--)0===i[d].children.length?d>0?(E=i[d-1].children).splice(E.indexOf(i[d]),1):this.clear():D(i[d],this.toBBox)},b}()},3171:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>ot});var V=m(3632),b=m(9972),N=m(1911),D=m(1729);class Y extends V.Z{constructor(G){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),G&&("function"==typeof G.getSimplifiedGeometry?this.setGeometry(G):this.setProperties(G))}clone(){const G=new Y(this.hasProperties()?this.getProperties():null);G.setGeometryName(this.getGeometryName());const u=this.getGeometry();u&&G.setGeometry(u.clone());const p=this.getStyle();return p&&G.setStyle(p),G}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,D.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const G=this.getGeometry();G&&(this.geometryChangeKey_=(0,D.oL)(G,b.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(G){this.set(this.geometryName_,G)}setStyle(G){this.style_=G,this.styleFunction_=G?function v(z){if("function"==typeof z)return z;let G;return Array.isArray(z)?G=z:((0,N.h)("function"==typeof z.getZIndex,41),G=[z]),function(){return G}}(G):void 0,this.changed()}setId(G){this.id_=G,this.changed()}setGeometryName(G){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=G,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const ot=Y},5813:(xt,nt,m)=>{"use strict";m.d(nt,{y:()=>b});var V=m(3783);function b(N){return Array.isArray(N)?(0,V.BB)(N):N}},3343:(xt,nt,m)=>{"use strict";function V(N,D,Y,v){let ot=N[D],z=N[D+1],G=0;for(let u=D+v;u<Y;u+=v){const p=N[u],Z=N[u+1];G+=Math.sqrt((p-ot)*(p-ot)+(Z-z)*(Z-z)),ot=p,z=Z}return G}m.d(nt,{W:()=>V})},3324:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>T});var V=m(2815),b=m(9889),N=m(8214),D=m(3171),Y=m(4840),v=m(7053),ot=m(1345),z=m(9466),G=m(109),u=m(2456),p=m(119),Z=m(6597);class x extends N.ZP{constructor(l,n,o,O){super(l),this.selected=n,this.deselected=o,this.mapBrowserEvent=O}}const i={};class d extends Y.ZP{constructor(l){let n;if(super(),l=l||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=l.condition?l.condition:Z.Kf,this.addCondition_=l.addCondition?l.addCondition:Z.Fi,this.removeCondition_=l.removeCondition?l.removeCondition:Z.Fi,this.toggleCondition_=l.toggleCondition?l.toggleCondition:Z.vY,this.multi_=!!l.multi&&l.multi,this.filter_=l.filter?l.filter:ot.uX,this.hitTolerance_=l.hitTolerance?l.hitTolerance:0,this.style_=void 0!==l.style?l.style:function E(){const s=(0,G.Ly)();return(0,u.l7)(s.Polygon,s.LineString),(0,u.l7)(s.GeometryCollection,s.LineString),function(l){return l.getGeometry()?s[l.getGeometry().getType()]:null}}(),this.features_=l.features||new V.Z,l.layers)if("function"==typeof l.layers)n=l.layers;else{const o=l.layers;n=function(O){return o.includes(O)}}else n=ot.uX;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(l,n){this.featureLayerAssociation_[(0,p.sq)(l)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(l){return this.featureLayerAssociation_[(0,p.sq)(l)]}setHitTolerance(l){this.hitTolerance_=l}setMap(l){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(l),l?(this.features_.addEventListener(b.Z.ADD,this.boundAddFeature_),this.features_.addEventListener(b.Z.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(b.Z.ADD,this.boundAddFeature_),this.features_.removeEventListener(b.Z.REMOVE,this.boundRemoveFeature_))}addFeature_(l){const n=l.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const o=this.getMap().getAllLayers().find(function(O){if(O instanceof v.Z&&O.getSource()&&O.getSource().hasFeature(n))return O});o&&this.addFeatureLayerAssociation_(n,o)}}removeFeature_(l){this.style_&&this.restorePreviousStyle_(l.element)}getStyle(){return this.style_}applySelectedStyle_(l){const n=(0,p.sq)(l);n in i||(i[n]=l.getStyle()),l.setStyle(this.style_)}restorePreviousStyle_(l){const n=this.getMap().getInteractions().getArray();for(let O=n.length-1;O>=0;--O){const R=n[O];if(R!==this&&R instanceof d&&R.getStyle()&&-1!==R.getFeatures().getArray().lastIndexOf(l))return void l.setStyle(R.getStyle())}const o=(0,p.sq)(l);l.setStyle(i[o]),delete i[o]}removeFeatureLayerAssociation_(l){delete this.featureLayerAssociation_[(0,p.sq)(l)]}handleEvent(l){if(!this.condition_(l))return!0;const n=this.addCondition_(l),o=this.removeCondition_(l),O=this.toggleCondition_(l),R=!n&&!o&&!O,w=l.map,M=this.getFeatures(),F=[],f=[];if(R){(0,z.Z)(this.featureLayerAssociation_),w.forEachFeatureAtPixel(l.pixel,(S,P)=>{if(S instanceof D.Z&&this.filter_(S,P))return this.addFeatureLayerAssociation_(S,P),f.push(S),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let S=M.getLength()-1;S>=0;--S){const P=M.item(S),j=f.indexOf(P);j>-1?f.splice(j,1):(M.remove(P),F.push(P))}0!==f.length&&M.extend(f)}else{w.forEachFeatureAtPixel(l.pixel,(S,P)=>{if(S instanceof D.Z&&this.filter_(S,P))return!n&&!O||M.getArray().includes(S)?(o||O)&&M.getArray().includes(S)&&(F.push(S),this.removeFeatureLayerAssociation_(S)):(this.addFeatureLayerAssociation_(S,P),f.push(S)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let S=F.length-1;S>=0;--S)M.remove(F[S]);M.extend(f)}return(f.length>0||F.length>0)&&this.dispatchEvent(new x("select",f,F,l)),!0}}const T=d},6107:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>l});var V=m(4593),b=m(2402),N=m(109),D=m(7392),Y=m(5044),v=m(9570),ot=m(8225),z=m(6785),G=m(1750);class p{constructor(o){this.font_=(o=o||{}).font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.scaleArray_=(0,G.Pq)(void 0!==o.scale?o.scale:1),this.text_=o.text,this.textAlign_=o.textAlign,this.justify_=o.justify,this.repeat_=o.repeat,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new Y.Z({color:"#333"}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:"point",this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding}clone(){const o=this.getScale();return new p({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(o)?o.slice():o,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(o){this.overflow_=o}setFont(o){this.font_=o}setMaxAngle(o){this.maxAngle_=o}setOffsetX(o){this.offsetX_=o}setOffsetY(o){this.offsetY_=o}setPlacement(o){this.placement_=o}setRepeat(o){this.repeat_=o}setRotateWithView(o){this.rotateWithView_=o}setFill(o){this.fill_=o}setRotation(o){this.rotation_=o}setScale(o){this.scale_=o,this.scaleArray_=(0,G.Pq)(void 0!==o?o:1)}setStroke(o){this.stroke_=o}setText(o){this.text_=o}setTextAlign(o){this.textAlign_=o}setJustify(o){this.justify_=o}setTextBaseline(o){this.textBaseline_=o}setBackgroundFill(o){this.backgroundFill_=o}setBackgroundStroke(o){this.backgroundStroke_=o}setPadding(o){this.padding_=o}}const Z=p;function r(n){return new N.ZP({fill:x(n,""),stroke:i(n,""),text:d(n),image:E(n)})}function x(n,o){const O=n[o+"fill-color"];if(O)return new Y.Z({color:O})}function i(n,o){const O=n[o+"stroke-width"],R=n[o+"stroke-color"];if(O||R)return new z.Z({width:O,color:R,lineCap:n[o+"stroke-line-cap"],lineJoin:n[o+"stroke-line-join"],lineDash:n[o+"stroke-line-dash"],lineDashOffset:n[o+"stroke-line-dash-offset"],miterLimit:n[o+"stroke-miter-limit"]})}function d(n){const o=n["text-value"];return o?new Z({text:o,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],repeat:n["text-repeat"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:x(n,"text-"),backgroundFill:x(n,"text-background-"),stroke:i(n,"text-"),backgroundStroke:i(n,"text-background-")}):void 0}function E(n){const o=n["icon-src"],O=n["icon-img"];if(o||O)return new v.Z({src:o,img:O,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],width:n["icon-width"],height:n["icon-height"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const R=n["shape-points"];if(R){const M="shape-";return new ot.Z({points:R,fill:x(n,M),stroke:i(n,M),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const w=n["circle-radius"];if(w){const M="circle-";return new D.Z({radius:w,fill:x(n,M),stroke:i(n,M),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const l=class s extends V.Z{constructor(o){o=o||{};const O=Object.assign({},o);delete O.style,delete O.renderBuffer,delete O.updateWhileAnimating,delete O.updateWhileInteracting,super(O),this.declutter_=void 0!==o.declutter&&o.declutter,this.renderBuffer_=void 0!==o.renderBuffer?o.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(o.style),this.updateWhileAnimating_=void 0!==o.updateWhileAnimating&&o.updateWhileAnimating,this.updateWhileInteracting_=void 0!==o.updateWhileInteracting&&o.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(o){return super.getFeatures(o)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(o){o.declutterTree||(o.declutterTree=new b(9)),this.getRenderer().renderDeclutter(o)}setRenderOrder(o){this.set("renderOrder",o)}setStyle(o){let O;if(void 0===o)O=N.yF;else if(null===o)O=null;else if("function"==typeof o)O=o;else if(o instanceof N.ZP)O=o;else if(Array.isArray(o)){const R=o.length,w=new Array(R);for(let M=0;M<R;++M){const F=o[M];w[M]=F instanceof N.ZP?F:r(F)}O=w}else O=r(o);this.style_=O,this.styleFunction_=null===o?void 0:(0,N.J$)(this.style_),this.changed()}}},7053:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>D});var V=m(6107),b=m(5695);const D=class N extends V.Z{constructor(v){super(v)}createRenderer(){return new b.Z(this)}}},7639:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>b});const b=class V{drawCustom(D,Y,v,ot){}drawGeometry(D){}setStyle(D){}drawCircle(D,Y){}drawFeature(D,Y){}drawGeometryCollection(D,Y){}drawLineString(D,Y){}drawMultiLineString(D,Y){}drawMultiPoint(D,Y){}drawMultiPolygon(D,Y){}drawPoint(D,Y){}drawPolygon(D,Y){}drawText(D,Y){}setFillStrokeStyle(D,Y){}setImageStyle(D,Y){}setTextStyle(D,Y){}}},3620:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>p});var V=m(7639),b=m(5813),N=m(483),D=m(4686),Y=m(2456),v=m(760),ot=m(2156),z=m(874),G=m(2774);const p=class u extends V.Z{constructor(r,x,i,d,E,T,s){super(),this.context_=r,this.pixelRatio_=x,this.extent_=i,this.transform_=d,this.transformRotation_=d?(0,ot.FH)(Math.atan2(d[1],d[0]),10):0,this.viewRotation_=E,this.squaredTolerance_=T,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,N.Ue)()}drawImages_(r,x,i,d){if(!this.image_)return;const E=(0,z.vT)(r,x,i,d,this.transform_,this.pixelCoordinates_),T=this.context_,s=this.tmpLocalTransform_,l=T.globalAlpha;1!=this.imageOpacity_&&(T.globalAlpha=l*this.imageOpacity_);let n=this.imageRotation_;0===this.transformRotation_&&(n-=this.viewRotation_),this.imageRotateWithView_&&(n+=this.viewRotation_);for(let o=0,O=E.length;o<O;o+=2){const R=E[o]-this.imageAnchorX_,w=E[o+1]-this.imageAnchorY_;if(0!==n||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const M=R+this.imageAnchorX_,F=w+this.imageAnchorY_;(0,N.qC)(s,M,F,1,1,n,-M,-F),T.setTransform.apply(T,s),T.translate(M,F),T.scale(this.imageScale_[0],this.imageScale_[1]),T.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),T.setTransform(1,0,0,1,0,0)}else T.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,R,w,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(T.globalAlpha=l)}drawText_(r,x,i,d){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const E=(0,z.vT)(r,x,i,d,this.transform_,this.pixelCoordinates_),T=this.context_;let s=this.textRotation_;for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);x<i;x+=d){const l=E[x]+this.textOffsetX_,n=E[x+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(T.translate(l-this.textOffsetX_,n-this.textOffsetY_),T.rotate(s),T.translate(this.textOffsetX_,this.textOffsetY_),T.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&T.strokeText(this.text_,0,0),this.textFillState_&&T.fillText(this.text_,0,0),T.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&T.strokeText(this.text_,l,n),this.textFillState_&&T.fillText(this.text_,l,n))}}moveToLineTo_(r,x,i,d,E){const T=this.context_,s=(0,z.vT)(r,x,i,d,this.transform_,this.pixelCoordinates_);T.moveTo(s[0],s[1]);let l=s.length;E&&(l-=2);for(let n=2;n<l;n+=2)T.lineTo(s[n],s[n+1]);return E&&T.closePath(),i}drawRings_(r,x,i,d){for(let E=0,T=i.length;E<T;++E)x=this.moveToLineTo_(r,x,i[E],d,!0);return x}drawCircle(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,r.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const x=(0,G.Kr)(r,this.transform_,this.pixelCoordinates_),i=x[2]-x[0],d=x[3]-x[1],E=Math.sqrt(i*i+d*d),T=this.context_;T.beginPath(),T.arc(x[0],x[1],E,0,2*Math.PI),this.fillState_&&T.fill(),this.strokeState_&&T.stroke()}""!==this.text_&&this.drawText_(r.getCenter(),0,2,2)}}setStyle(r){this.setFillStrokeStyle(r.getFill(),r.getStroke()),this.setImageStyle(r.getImage()),this.setTextStyle(r.getText())}setTransform(r){this.transform_=r}drawGeometry(r){switch(r.getType()){case"Point":this.drawPoint(r);break;case"LineString":this.drawLineString(r);break;case"Polygon":this.drawPolygon(r);break;case"MultiPoint":this.drawMultiPoint(r);break;case"MultiLineString":this.drawMultiLineString(r);break;case"MultiPolygon":this.drawMultiPolygon(r);break;case"GeometryCollection":this.drawGeometryCollection(r);break;case"Circle":this.drawCircle(r)}}drawFeature(r,x){const i=x.getGeometryFunction()(r);i&&(this.setStyle(x),this.drawGeometry(i))}drawGeometryCollection(r){const x=r.getGeometriesArray();for(let i=0,d=x.length;i<d;++i)this.drawGeometry(x[i])}drawPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const x=r.getFlatCoordinates(),i=r.getStride();this.image_&&this.drawImages_(x,0,x.length,i),""!==this.text_&&this.drawText_(x,0,x.length,i)}drawMultiPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const x=r.getFlatCoordinates(),i=r.getStride();this.image_&&this.drawImages_(x,0,x.length,i),""!==this.text_&&this.drawText_(x,0,x.length,i)}drawLineString(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,r.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const x=this.context_,i=r.getFlatCoordinates();x.beginPath(),this.moveToLineTo_(i,0,i.length,r.getStride(),!1),x.stroke()}if(""!==this.text_){const x=r.getFlatMidpoint();this.drawText_(x,0,2,2)}}}drawMultiLineString(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const x=r.getExtent();if((0,v.kK)(this.extent_,x)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,d=r.getFlatCoordinates();let E=0;const T=r.getEnds(),s=r.getStride();i.beginPath();for(let l=0,n=T.length;l<n;++l)E=this.moveToLineTo_(d,E,T[l],s,!1);i.stroke()}if(""!==this.text_){const i=r.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const x=this.context_;x.beginPath(),this.drawRings_(r.getOrientedFlatCoordinates(),0,r.getEnds(),r.getStride()),this.fillState_&&x.fill(),this.strokeState_&&x.stroke()}if(""!==this.text_){const x=r.getFlatInteriorPoint();this.drawText_(x,0,2,2)}}}drawMultiPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const x=this.context_,i=r.getOrientedFlatCoordinates();let d=0;const E=r.getEndss(),T=r.getStride();x.beginPath();for(let s=0,l=E.length;s<l;++s)d=this.drawRings_(i,d,E[s],T);this.fillState_&&x.fill(),this.strokeState_&&x.stroke()}if(""!==this.text_){const x=r.getFlatInteriorPoints();this.drawText_(x,0,x.length,2)}}}setContextFillState_(r){const x=this.context_,i=this.contextFillState_;i?i.fillStyle!=r.fillStyle&&(i.fillStyle=r.fillStyle,x.fillStyle=r.fillStyle):(x.fillStyle=r.fillStyle,this.contextFillState_={fillStyle:r.fillStyle})}setContextStrokeState_(r){const x=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=r.lineCap&&(i.lineCap=r.lineCap,x.lineCap=r.lineCap),(0,Y.fS)(i.lineDash,r.lineDash)||x.setLineDash(i.lineDash=r.lineDash),i.lineDashOffset!=r.lineDashOffset&&(i.lineDashOffset=r.lineDashOffset,x.lineDashOffset=r.lineDashOffset),i.lineJoin!=r.lineJoin&&(i.lineJoin=r.lineJoin,x.lineJoin=r.lineJoin),i.lineWidth!=r.lineWidth&&(i.lineWidth=r.lineWidth,x.lineWidth=r.lineWidth),i.miterLimit!=r.miterLimit&&(i.miterLimit=r.miterLimit,x.miterLimit=r.miterLimit),i.strokeStyle!=r.strokeStyle&&(i.strokeStyle=r.strokeStyle,x.strokeStyle=r.strokeStyle)):(x.lineCap=r.lineCap,x.setLineDash(r.lineDash),x.lineDashOffset=r.lineDashOffset,x.lineJoin=r.lineJoin,x.lineWidth=r.lineWidth,x.miterLimit=r.miterLimit,x.strokeStyle=r.strokeStyle,this.contextStrokeState_={lineCap:r.lineCap,lineDash:r.lineDash,lineDashOffset:r.lineDashOffset,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,strokeStyle:r.strokeStyle})}setContextTextState_(r){const x=this.context_,i=this.contextTextState_,d=r.textAlign?r.textAlign:D.PH;i?(i.font!=r.font&&(i.font=r.font,x.font=r.font),i.textAlign!=d&&(i.textAlign=d,x.textAlign=d),i.textBaseline!=r.textBaseline&&(i.textBaseline=r.textBaseline,x.textBaseline=r.textBaseline)):(x.font=r.font,x.textAlign=d,x.textBaseline=r.textBaseline,this.contextTextState_={font:r.font,textAlign:d,textBaseline:r.textBaseline})}setFillStrokeStyle(r,x){if(r){const i=r.getColor();this.fillState_={fillStyle:(0,b.y)(i||D.bL)}}else this.fillState_=null;if(x){const i=x.getColor(),d=x.getLineCap(),E=x.getLineDash(),T=x.getLineDashOffset(),s=x.getLineJoin(),l=x.getWidth(),n=x.getMiterLimit(),o=E||D.X9;this.strokeState_={lineCap:void 0!==d?d:D.mb,lineDash:1===this.pixelRatio_?o:o.map(O=>O*this.pixelRatio_),lineDashOffset:(T||D.He)*this.pixelRatio_,lineJoin:void 0!==s?s:D.rc,lineWidth:(void 0!==l?l:D.yC)*this.pixelRatio_,miterLimit:void 0!==n?n:D.V4,strokeStyle:(0,b.y)(i||D.Tx)}}else this.strokeState_=null}setImageStyle(r){let x;if(!r||!(x=r.getSize()))return void(this.image_=null);const i=r.getPixelRatio(this.pixelRatio_),d=r.getAnchor(),E=r.getOrigin();this.image_=r.getImage(this.pixelRatio_),this.imageAnchorX_=d[0]*i,this.imageAnchorY_=d[1]*i,this.imageHeight_=x[1]*i,this.imageOpacity_=r.getOpacity(),this.imageOriginX_=E[0],this.imageOriginY_=E[1],this.imageRotateWithView_=r.getRotateWithView(),this.imageRotation_=r.getRotation();const T=r.getScaleArray();this.imageScale_=[T[0]*this.pixelRatio_/i,T[1]*this.pixelRatio_/i],this.imageWidth_=x[0]*i}setTextStyle(r){if(r){const x=r.getFill();if(x){const w=x.getColor();this.textFillState_={fillStyle:(0,b.y)(w||D.bL)}}else this.textFillState_=null;const i=r.getStroke();if(i){const w=i.getColor(),M=i.getLineCap(),F=i.getLineDash(),f=i.getLineDashOffset(),S=i.getLineJoin(),P=i.getWidth(),j=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==M?M:D.mb,lineDash:F||D.X9,lineDashOffset:f||D.He,lineJoin:void 0!==S?S:D.rc,lineWidth:void 0!==P?P:D.yC,miterLimit:void 0!==j?j:D.V4,strokeStyle:(0,b.y)(w||D.Tx)}}else this.textStrokeState_=null;const d=r.getFont(),E=r.getOffsetX(),T=r.getOffsetY(),s=r.getRotateWithView(),l=r.getRotation(),n=r.getScaleArray(),o=r.getText(),O=r.getTextAlign(),R=r.getTextBaseline();this.textState_={font:void 0!==d?d:D.Df,textAlign:void 0!==O?O:D.PH,textBaseline:void 0!==R?R:D.ru},this.text_=void 0!==o?Array.isArray(o)?o.reduce((w,M,F)=>w+(F%2?" ":M),""):o:"",this.textOffsetX_=void 0!==E?this.pixelRatio_*E:0,this.textOffsetY_=void 0!==T?this.pixelRatio_*T:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*n[0],this.pixelRatio_*n[1]]}else this.text_=""}}},5695:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>Xe});const V={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},b=[V.FILL],N=[V.STROKE],D=[V.BEGIN_PATH],Y=[V.CLOSE_PATH],v=V;var ot=m(2401),z=m(7639),G=m(5813),u=m(760),p=m(4686),Z=m(2456),r=m(392);const i=class x extends z.Z{constructor(t,a,e,h){super(),this.tolerance=t,this.maxExtent=a,this.pixelRatio=h,this.maxLineWidth=0,this.resolution=e,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const a=this.pixelRatio;return 1==a?t:t.map(function(e){return e*a})}appendFlatPointCoordinates(t,a){const e=this.getBufferedMaxExtent(),h=this.tmpCoordinate_,c=this.coordinates;let g=c.length;for(let _=0,y=t.length;_<y;_+=a)h[0]=t[_],h[1]=t[_+1],(0,u.b8)(e,h)&&(c[g++]=h[0],c[g++]=h[1]);return g}appendFlatLineCoordinates(t,a,e,h,c,g){const _=this.coordinates;let y=_.length;const I=this.getBufferedMaxExtent();g&&(a+=h);let C=t[a],A=t[a+1];const L=this.tmpCoordinate_;let B,U,k,W=!0;for(B=a+h;B<e;B+=h)L[0]=t[B],L[1]=t[B+1],k=(0,u.pX)(I,L),k!==U?(W&&(_[y++]=C,_[y++]=A,W=!1),_[y++]=L[0],_[y++]=L[1]):k===ot.Z.INTERSECTING?(_[y++]=L[0],_[y++]=L[1],W=!1):W=!0,C=L[0],A=L[1],U=k;return(c&&W||B===a+h)&&(_[y++]=C,_[y++]=A),y}drawCustomCoordinates_(t,a,e,h,c){for(let g=0,_=e.length;g<_;++g){const y=e[g],I=this.appendFlatLineCoordinates(t,a,y,h,!1,!1);c.push(I),a=y}return a}drawCustom(t,a,e,h){this.beginGeometry(t,a);const c=t.getType(),g=t.getStride(),_=this.coordinates.length;let y,I,C,A,L;switch(c){case"MultiPolygon":y=t.getOrientedFlatCoordinates(),A=[];const W=t.getEndss();L=0;for(let B=0,U=W.length;B<U;++B){const k=[];L=this.drawCustomCoordinates_(y,L,W[B],g,k),A.push(k)}this.instructions.push([v.CUSTOM,_,A,t,e,r.ug]),this.hitDetectionInstructions.push([v.CUSTOM,_,A,t,h||e,r.ug]);break;case"Polygon":case"MultiLineString":C=[],y="Polygon"==c?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),L=this.drawCustomCoordinates_(y,0,t.getEnds(),g,C),this.instructions.push([v.CUSTOM,_,C,t,e,r.o1]),this.hitDetectionInstructions.push([v.CUSTOM,_,C,t,h||e,r.o1]);break;case"LineString":case"Circle":y=t.getFlatCoordinates(),I=this.appendFlatLineCoordinates(y,0,y.length,g,!1,!1),this.instructions.push([v.CUSTOM,_,I,t,e,r.Ml]),this.hitDetectionInstructions.push([v.CUSTOM,_,I,t,h||e,r.Ml]);break;case"MultiPoint":y=t.getFlatCoordinates(),I=this.appendFlatPointCoordinates(y,g),I>_&&(this.instructions.push([v.CUSTOM,_,I,t,e,r.Ml]),this.hitDetectionInstructions.push([v.CUSTOM,_,I,t,h||e,r.Ml]));break;case"Point":y=t.getFlatCoordinates(),this.coordinates.push(y[0],y[1]),I=this.coordinates.length,this.instructions.push([v.CUSTOM,_,I,t,e]),this.hitDetectionInstructions.push([v.CUSTOM,_,I,t,h||e])}this.endGeometry(a)}beginGeometry(t,a){this.beginGeometryInstruction1_=[v.BEGIN_GEOMETRY,a,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[v.BEGIN_GEOMETRY,a,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let a;t.reverse();const e=t.length;let h,c,g=-1;for(a=0;a<e;++a)h=t[a],c=h[0],c==v.END_GEOMETRY?g=a:c==v.BEGIN_GEOMETRY&&(h[2]=a,(0,Z.FZ)(this.hitDetectionInstructions,g,a),g=-1)}setFillStrokeStyle(t,a){const e=this.state;if(t){const h=t.getColor();e.fillStyle=(0,G.y)(h||p.bL)}else e.fillStyle=void 0;if(a){const h=a.getColor();e.strokeStyle=(0,G.y)(h||p.Tx);const c=a.getLineCap();e.lineCap=void 0!==c?c:p.mb;const g=a.getLineDash();e.lineDash=g?g.slice():p.X9;const _=a.getLineDashOffset();e.lineDashOffset=_||p.He;const y=a.getLineJoin();e.lineJoin=void 0!==y?y:p.rc;const I=a.getWidth();e.lineWidth=void 0!==I?I:p.yC;const C=a.getMiterLimit();e.miterLimit=void 0!==C?C:p.V4,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0}createFill(t){const a=t.fillStyle,e=[v.SET_FILL_STYLE,a];return"string"!=typeof a&&e.push(!0),e}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[v.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,a){const e=t.fillStyle;("string"!=typeof e||t.currentFillStyle!=e)&&(void 0!==e&&this.instructions.push(a.call(this,t)),t.currentFillStyle=e)}updateStrokeStyle(t,a){const e=t.strokeStyle,h=t.lineCap,c=t.lineDash,g=t.lineDashOffset,_=t.lineJoin,y=t.lineWidth,I=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=h||c!=t.currentLineDash&&!(0,Z.fS)(t.currentLineDash,c)||t.currentLineDashOffset!=g||t.currentLineJoin!=_||t.currentLineWidth!=y||t.currentMiterLimit!=I)&&(void 0!==e&&a.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=h,t.currentLineDash=c,t.currentLineDashOffset=g,t.currentLineJoin=_,t.currentLineWidth=y,t.currentMiterLimit=I)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const a=[v.END_GEOMETRY,t];this.instructions.push(a),this.hitDetectionInstructions.push(a)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,u.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,u.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var l=m(9182);const o=class n extends i{constructor(t,a,e,h){super(t,a,e,h)}drawFlatCoordinatess_(t,a,e,h){const c=this.state,g=void 0!==c.fillStyle,_=void 0!==c.strokeStyle,y=e.length;this.instructions.push(D),this.hitDetectionInstructions.push(D);for(let I=0;I<y;++I){const C=e[I],A=this.coordinates.length,L=this.appendFlatLineCoordinates(t,a,C,h,!0,!_),W=[v.MOVE_TO_LINE_TO,A,L];this.instructions.push(W),this.hitDetectionInstructions.push(W),_&&(this.instructions.push(Y),this.hitDetectionInstructions.push(Y)),a=C}return g&&(this.instructions.push(b),this.hitDetectionInstructions.push(b)),_&&(this.instructions.push(N),this.hitDetectionInstructions.push(N)),a}drawCircle(t,a){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,a),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([v.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const g=t.getFlatCoordinates(),_=t.getStride(),y=this.coordinates.length;this.appendFlatLineCoordinates(g,0,g.length,_,!1,!1);const I=[v.CIRCLE,y];this.instructions.push(D,I),this.hitDetectionInstructions.push(D,I),void 0!==e.fillStyle&&(this.instructions.push(b),this.hitDetectionInstructions.push(b)),void 0!==e.strokeStyle&&(this.instructions.push(N),this.hitDetectionInstructions.push(N)),this.endGeometry(a)}drawPolygon(t,a){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,a),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([v.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const g=t.getEnds(),_=t.getOrientedFlatCoordinates(),y=t.getStride();this.drawFlatCoordinatess_(_,0,g,y),this.endGeometry(a)}drawMultiPolygon(t,a){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,a),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([v.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const g=t.getEndss(),_=t.getOrientedFlatCoordinates(),y=t.getStride();let I=0;for(let C=0,A=g.length;C<A;++C)I=this.drawFlatCoordinatess_(_,I,g[C],y);this.endGeometry(a)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const a=this.coordinates;for(let e=0,h=a.length;e<h;++e)a[e]=(0,l.uZ)(a[e],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var O=m(119),R=m(2156);function w($,t,a,e,h){const c=[];let g=a,_=0,y=t.slice(a,2);for(;_<$&&g+h<e;){const[I,C]=y.slice(-2),A=t[g+h],L=t[g+h+1],W=Math.sqrt((A-I)*(A-I)+(L-C)*(L-C));if(_+=W,_>=$){const B=($-_+W)/W,U=(0,R.t7)(I,A,B),k=(0,R.t7)(C,L,B);y.push(U,k),c.push(y),y=[U,k],_==$&&(g+=h),_=0}else if(_<$)y.push(t[g+h],t[g+h+1]),g+=h;else{const B=W-_,U=(0,R.t7)(I,A,B/W),k=(0,R.t7)(C,L,B/W);y.push(U,k),c.push(y),y=[U,k],_=0,g+=h}}return _>0&&c.push(y),c}function M($,t,a,e,h){let C,A,L,W,B,U,k,X,J,Q,c=a,g=a,_=0,y=0,I=a;for(A=a;A<e;A+=h){const tt=t[A],q=t[A+1];void 0!==B&&(J=tt-B,Q=q-U,W=Math.sqrt(J*J+Q*Q),void 0!==k&&(y+=L,C=Math.acos((k*J+X*Q)/(L*W)),C>$&&(y>_&&(_=y,c=I,g=A),y=0,I=A-h)),L=W,k=J,X=Q),B=tt,U=q}return y+=W,y>_?[I,A]:[c,g]}const F={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},P={Circle:o,Default:i,Image:class d extends i{constructor(t,a,e,h){super(t,a,e,h),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,a){if(!this.image_)return;this.beginGeometry(t,a);const e=t.getFlatCoordinates(),h=t.getStride(),c=this.coordinates.length,g=this.appendFlatPointCoordinates(e,h);this.instructions.push([v.DRAW_IMAGE,c,g,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([v.DRAW_IMAGE,c,g,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}drawMultiPoint(t,a){if(!this.image_)return;this.beginGeometry(t,a);const e=t.getFlatCoordinates(),h=t.getStride(),c=this.coordinates.length,g=this.appendFlatPointCoordinates(e,h);this.instructions.push([v.DRAW_IMAGE,c,g,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([v.DRAW_IMAGE,c,g,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,a){const e=t.getAnchor(),h=t.getSize(),c=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=h[1],this.opacity_=t.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=h[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=a}},LineString:class T extends i{constructor(t,a,e,h){super(t,a,e,h)}drawFlatCoordinates_(t,a,e,h){const c=this.coordinates.length,g=this.appendFlatLineCoordinates(t,a,e,h,!1,!1),_=[v.MOVE_TO_LINE_TO,c,g];return this.instructions.push(_),this.hitDetectionInstructions.push(_),e}drawLineString(t,a){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,a),this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,p.X9,p.He],D);const g=t.getFlatCoordinates(),_=t.getStride();this.drawFlatCoordinates_(g,0,g.length,_),this.hitDetectionInstructions.push(N),this.endGeometry(a)}drawMultiLineString(t,a){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,a),this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],D);const g=t.getEnds(),_=t.getFlatCoordinates(),y=t.getStride();let I=0;for(let C=0,A=g.length;C<A;++C)I=this.drawFlatCoordinates_(_,I,g[C],y);this.hitDetectionInstructions.push(N),this.endGeometry(a)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(N),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(N),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(D)}},Polygon:o,Text:class f extends i{constructor(t,a,e,h){super(t,a,e,h),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,a){const c=this.textState_;if(""===this.text_||!c||!this.textFillState_&&!this.textStrokeState_)return;const g=this.coordinates;let _=g.length;const y=t.getType();let I=null,C=t.getStride();if("line"!==c.placement||"LineString"!=y&&"MultiLineString"!=y&&"Polygon"!=y&&"MultiPolygon"!=y){let A=c.overflow?null:[];switch(y){case"Point":case"MultiPoint":I=t.getFlatCoordinates();break;case"LineString":I=t.getFlatMidpoint();break;case"Circle":I=t.getCenter();break;case"MultiLineString":I=t.getFlatMidpoints(),C=2;break;case"Polygon":I=t.getFlatInteriorPoint(),c.overflow||A.push(I[2]/this.resolution),C=3;break;case"MultiPolygon":const k=t.getFlatInteriorPoints();I=[];for(let X=0,J=k.length;X<J;X+=3)c.overflow||A.push(k[X+2]/this.resolution),I.push(k[X],k[X+1]);if(0===I.length)return;C=2}const L=this.appendFlatPointCoordinates(I,C);if(L===_)return;if(A&&(L-_)/2!=I.length/C){let k=_/2;A=A.filter((X,J)=>{const Q=g[2*(k+J)]===I[J*C]&&g[2*(k+J)+1]===I[J*C+1];return Q||--k,Q})}this.saveTextStates_(),(c.backgroundFill||c.backgroundStroke)&&(this.setFillStrokeStyle(c.backgroundFill,c.backgroundStroke),c.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),c.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,a);let W=c.padding;if(W!=p.oB&&(c.scale[0]<0||c.scale[1]<0)){let k=c.padding[0],X=c.padding[1],J=c.padding[2],Q=c.padding[3];c.scale[0]<0&&(X=-X,Q=-Q),c.scale[1]<0&&(k=-k,J=-J),W=[k,X,J,Q]}const B=this.pixelRatio;this.instructions.push([v.DRAW_IMAGE,_,L,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,W==p.oB?p.oB:W.map(function(k){return k*B}),!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,A]);const U=1/B;this.hitDetectionInstructions.push([v.DRAW_IMAGE,_,L,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[U,U],NaN,void 0,this.declutterImageWithText_,W,!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,A]),this.endGeometry(a)}else{if(!(0,u.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let A;if(I=t.getFlatCoordinates(),"LineString"==y)A=[I.length];else if("MultiLineString"==y)A=t.getEnds();else if("Polygon"==y)A=t.getEnds().slice(0,1);else if("MultiPolygon"==y){const U=t.getEndss();A=[];for(let k=0,X=U.length;k<X;++k)A.push(U[k][0])}this.beginGeometry(t,a);const L=c.repeat,W=L?void 0:c.textAlign;let B=0;for(let U=0,k=A.length;U<k;++U){let X;X=L?w(L*this.resolution,I,B,A[U],C):[I.slice(B,A[U])];for(let J=0,Q=X.length;J<Q;++J){const tt=X[J];let q=0,ht=tt.length;if(null==W){const st=M(c.maxAngle,tt,0,tt.length,2);q=st[0],ht=st[1]}for(let st=q;st<ht;st+=C)g.push(tt[st],tt[st+1]);const dt=g.length;B=A[U],this.drawChars_(_,dt),_=dt}}this.endGeometry(a)}}saveTextStates_(){const t=this.textStrokeState_,a=this.textState_,e=this.textFillState_,h=this.strokeKey_;t&&(h in this.strokeStates||(this.strokeStates[h]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const c=this.textKey_;c in this.textStates||(this.textStates[c]={font:a.font,textAlign:a.textAlign||p.PH,justify:a.justify,textBaseline:a.textBaseline||p.ru,scale:a.scale});const g=this.fillKey_;e&&(g in this.fillStates||(this.fillStates[g]={fillStyle:e.fillStyle}))}drawChars_(t,a){const e=this.textStrokeState_,h=this.textState_,c=this.strokeKey_,g=this.textKey_,_=this.fillKey_;this.saveTextStates_();const y=this.pixelRatio,I=F[h.textBaseline],C=this.textOffsetY_*y,A=this.text_,L=e?e.lineWidth*Math.abs(h.scale[0])/2:0;this.instructions.push([v.DRAW_CHARS,t,a,I,h.overflow,_,h.maxAngle,y,C,c,L*y,A,g,1]),this.hitDetectionInstructions.push([v.DRAW_CHARS,t,a,I,h.overflow,_,h.maxAngle,1,C,c,L,A,g,1/y])}setTextStyle(t,a){let e,h,c;if(t){const g=t.getFill();g?(h=this.textFillState_,h||(h={},this.textFillState_=h),h.fillStyle=(0,G.y)(g.getColor()||p.bL)):(h=null,this.textFillState_=h);const _=t.getStroke();if(_){c=this.textStrokeState_,c||(c={},this.textStrokeState_=c);const B=_.getLineDash(),U=_.getLineDashOffset(),k=_.getWidth(),X=_.getMiterLimit();c.lineCap=_.getLineCap()||p.mb,c.lineDash=B?B.slice():p.X9,c.lineDashOffset=void 0===U?p.He:U,c.lineJoin=_.getLineJoin()||p.rc,c.lineWidth=void 0===k?p.yC:k,c.miterLimit=void 0===X?p.V4:X,c.strokeStyle=(0,G.y)(_.getColor()||p.Tx)}else c=null,this.textStrokeState_=c;e=this.textState_;const y=t.getFont()||p.Df;(0,p.Qx)(y);const I=t.getScaleArray();e.overflow=t.getOverflow(),e.font=y,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.repeat=t.getRepeat(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||p.ru,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||p.oB,e.scale=void 0===I?[1,1]:I;const C=t.getOffsetX(),A=t.getOffsetY(),L=t.getRotateWithView(),W=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===C?0:C,this.textOffsetY_=void 0===A?0:A,this.textRotateWithView_=void 0!==L&&L,this.textRotation_=void 0===W?0:W,this.strokeKey_=c?("string"==typeof c.strokeStyle?c.strokeStyle:(0,O.sq)(c.strokeStyle))+c.lineCap+c.lineDashOffset+"|"+c.lineWidth+c.lineJoin+c.miterLimit+"["+c.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.repeat||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=h?"string"==typeof h.fillStyle?h.fillStyle:"|"+(0,O.sq)(h.fillStyle):""}else this.text_="";this.declutterImageWithText_=a}}},rt=class j{constructor(t,a,e,h){this.tolerance_=t,this.maxExtent_=a,this.pixelRatio_=h,this.resolution_=e,this.buildersByZIndex_={}}finish(){const t={};for(const a in this.buildersByZIndex_){t[a]=t[a]||{};const e=this.buildersByZIndex_[a];for(const h in e){const c=e[h].finish();t[a][h]=c}}return t}getBuilder(t,a){const e=void 0!==t?t.toString():"0";let h=this.buildersByZIndex_[e];void 0===h&&(h={},this.buildersByZIndex_[e]=h);let c=h[a];return void 0===c&&(c=new(0,P[a])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),h[a]=c),c}};var at=m(2121),H=m(483),lt=m(874);function It($,t,a,e,h,c,g,_,y,I,C,A){let L=$[t],W=$[t+1],B=0,U=0,k=0,X=0;function J(){B=L,U=W,L=$[t+=e],W=$[t+1],X+=k,k=Math.sqrt((L-B)*(L-B)+(W-U)*(W-U))}do{J()}while(t<a-e&&X+k<c);let Q=0===k?0:(c-X)/k;const tt=(0,R.t7)(B,L,Q),q=(0,R.t7)(U,W,Q),ht=t-e,dt=X,st=c+_*y(I,h,C);for(;t<a-e&&X+k<st;)J();Q=0===k?0:(st-X)/k;const ut=(0,R.t7)(B,L,Q),_t=(0,R.t7)(U,W,Q);let pt;if(A){const et=[tt,q,ut,_t];(0,lt.U1)(et,0,4,2,A,et,et),pt=et[0]>et[2]}else pt=tt>ut;const mt=Math.PI,ft=[],Tt=ht+e===t;let gt;if(k=0,X=dt,L=$[t=ht],W=$[t+1],Tt)return J(),gt=Math.atan2(W-U,L-B),pt&&(gt+=gt>0?-mt:mt),ft[0]=[(ut+tt)/2,(_t+q)/2,(st-c)/2,gt,h],ft;for(let et=0,ct=(h=h.replace(/\n/g," ")).length;et<ct;){J();let it=Math.atan2(W-U,L-B);if(pt&&(it+=it>0?-mt:mt),void 0!==gt){let Ft=it-gt;if(Ft+=Ft>mt?-2*mt:Ft<-mt?2*mt:0,Math.abs(Ft)>g)return null}gt=it;const yt=et;let Et=0;for(;et<ct;++et){const Yt=_*y(I,h[pt?ct-et-1:et],C);if(t+e<a&&X+k<c+Et+Yt/2)break;Et+=Yt}if(et===yt)continue;const At=pt?h.substring(ct-yt,ct-et):h.substring(yt,et);Q=0===k?0:(c+Et/2-X)/k;const K=(0,R.t7)(B,L,Q),fe=(0,R.t7)(U,W,Q);ft.push([K,fe,Et/2,it,At]),c+=Et}return ft}var St=m(3343);const Bt=(0,u.lJ)(),Rt=[],Pt=[],wt=[],bt=[];function ce($){return $[3].declutterBox}const ve=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function de($,t){return("start"===t||"end"===t)&&!ve.test($)&&(t="start"===t?"left":"right"),F[t]}function Oe($,t,a){return a>0&&$.push("\n",""),$.push(t,""),$}const Me=class Le{constructor(t,a,e,h){this.overlaps=e,this.pixelRatio=a,this.resolution=t,this.instructions=h.instructions,this.coordinates=h.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,H.Ue)(),this.hitDetectionInstructions=h.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=h.fillStates||{},this.strokeStates=h.strokeStates||{},this.textStates=h.textStates||{},this.widths_={},this.labels_={}}createLabel(t,a,e,h){const c=t+a+e+h;if(this.labels_[c])return this.labels_[c];const g=h?this.strokeStates[h]:null,_=e?this.fillStates[e]:null,y=this.textStates[a],I=this.pixelRatio,C=[y.scale[0]*I,y.scale[1]*I],A=Array.isArray(t),L=y.justify?F[y.justify]:de(Array.isArray(t)?t[0]:t,y.textAlign||p.PH),W=h&&g.lineWidth?g.lineWidth:0,B=A?t:t.split("\n").reduce(Oe,[]),{width:U,height:k,widths:X,heights:J,lineWidths:Q}=(0,p.Zw)(y,B),tt=U+W,q=[],ht=(tt+2)*C[0],dt=(k+W)*C[1],st={width:ht<0?Math.floor(ht):Math.ceil(ht),height:dt<0?Math.floor(dt):Math.ceil(dt),contextInstructions:q};(1!=C[0]||1!=C[1])&&q.push("scale",C),h&&(q.push("strokeStyle",g.strokeStyle),q.push("lineWidth",W),q.push("lineCap",g.lineCap),q.push("lineJoin",g.lineJoin),q.push("miterLimit",g.miterLimit),q.push("setLineDash",[g.lineDash]),q.push("lineDashOffset",g.lineDashOffset)),e&&q.push("fillStyle",_.fillStyle),q.push("textBaseline","middle"),q.push("textAlign","center");const ut=.5-L;let _t=L*tt+ut*W;const pt=[],mt=[];let ct,ft=0,Tt=0,gt=0,et=0;for(let it=0,yt=B.length;it<yt;it+=2){const Et=B[it];if("\n"===Et){Tt+=ft,ft=0,_t=L*tt+ut*W,++et;continue}const At=B[it+1]||y.font;At!==ct&&(h&&pt.push("font",At),e&&mt.push("font",At),ct=At),ft=Math.max(ft,J[gt]);const K=[Et,_t+ut*X[gt]+L*(X[gt]-Q[et]),.5*(W+ft)+Tt];_t+=X[gt],h&&pt.push("strokeText",K),e&&mt.push("fillText",K),++gt}return Array.prototype.push.apply(q,pt),Array.prototype.push.apply(q,mt),this.labels_[c]=st,st}replayTextBackground_(t,a,e,h,c,g,_){t.beginPath(),t.moveTo.apply(t,a),t.lineTo.apply(t,e),t.lineTo.apply(t,h),t.lineTo.apply(t,c),t.lineTo.apply(t,a),g&&(this.alignFill_=g[2],this.fill_(t)),_&&(this.setStrokeStyle_(t,_),t.stroke())}calculateImageOrLabelDimensions_(t,a,e,h,c,g,_,y,I,C,A,L,W,B,U,k){let X=e-(_*=L[0]),J=h-(y*=L[1]);const Q=c+I>t?t-I:c,tt=g+C>a?a-C:g,q=B[3]+Q*L[0]+B[1],ht=B[0]+tt*L[1]+B[2],dt=X-B[3],st=J-B[0];let ut;return(U||0!==A)&&(Rt[0]=dt,bt[0]=dt,Rt[1]=st,Pt[1]=st,Pt[0]=dt+q,wt[0]=Pt[0],wt[1]=st+ht,bt[1]=wt[1]),0!==A?(ut=(0,H.qC)((0,H.Ue)(),e,h,1,1,A,-e,-h),(0,H.nn)(ut,Rt),(0,H.nn)(ut,Pt),(0,H.nn)(ut,wt),(0,H.nn)(ut,bt),(0,u.T9)(Math.min(Rt[0],Pt[0],wt[0],bt[0]),Math.min(Rt[1],Pt[1],wt[1],bt[1]),Math.max(Rt[0],Pt[0],wt[0],bt[0]),Math.max(Rt[1],Pt[1],wt[1],bt[1]),Bt)):(0,u.T9)(Math.min(dt,dt+q),Math.min(st,st+ht),Math.max(dt,dt+q),Math.max(st,st+ht),Bt),W&&(X=Math.round(X),J=Math.round(J)),{drawImageX:X,drawImageY:J,drawImageW:Q,drawImageH:tt,originX:I,originY:C,declutterBox:{minX:Bt[0],minY:Bt[1],maxX:Bt[2],maxY:Bt[3],value:k},canvasTransform:ut,scale:L}}replayImageOrLabel_(t,a,e,h,c,g,_){const I=h.declutterBox,C=t.canvas,A=_?_[2]*h.scale[0]/2:0;return I.minX-A<=C.width/a&&I.maxX+A>=0&&I.minY-A<=C.height/a&&I.maxY+A>=0&&(!(!g&&!_)&&this.replayTextBackground_(t,Rt,Pt,wt,bt,g,_),(0,p._f)(t,h.canvasTransform,c,e,h.originX,h.originY,h.drawImageW,h.drawImageH,h.drawImageX,h.drawImageY,h.scale)),!0}fill_(t){if(this.alignFill_){const a=(0,H.nn)(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(a[0]%e,a[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,a){t.strokeStyle=a[1],t.lineWidth=a[2],t.lineCap=a[3],t.lineJoin=a[4],t.miterLimit=a[5],t.lineDashOffset=a[7],t.setLineDash(a[6])}drawLabelWithPointPlacement_(t,a,e,h){const c=this.textStates[a],g=this.createLabel(t,a,h,e),_=this.strokeStates[e],y=this.pixelRatio,I=de(Array.isArray(t)?t[0]:t,c.textAlign||p.PH),C=F[c.textBaseline||p.ru],A=_&&_.lineWidth?_.lineWidth:0;return{label:g,anchorX:I*(g.width/y-2*c.scale[0])+2*(.5-I)*A,anchorY:C*g.height/y+2*(.5-C)*A}}execute_(t,a,e,h,c,g,_,y){let I;this.pixelCoordinates_&&(0,Z.fS)(e,this.renderedTransform_)?I=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),I=(0,lt.vT)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,H.lk)(this.renderedTransform_,e));let C=0;const A=h.length;let W,B,U,k,X,J,Q,tt,q,ht,dt,st,L=0,ut=0,_t=0,pt=null,mt=null;const ft=this.coordinateCache_,Tt=this.viewRotation_,gt=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,et={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Tt},ct=this.instructions!=h||this.overlaps?0:200;let it,yt,Et,At;for(;C<A;){const K=h[C];switch(K[0]){case v.BEGIN_GEOMETRY:it=K[1],At=K[3],it.getGeometry()?void 0===_||(0,u.kK)(_,At.getExtent())?++C:C=K[2]+1:C=K[2];break;case v.BEGIN_PATH:ut>ct&&(this.fill_(t),ut=0),_t>ct&&(t.stroke(),_t=0),!ut&&!_t&&(t.beginPath(),k=NaN,X=NaN),++C;break;case v.CIRCLE:L=K[1];const Ft=I[L],Yt=I[L+1],_e=I[L+2]-Ft,ge=I[L+3]-Yt,me=Math.sqrt(_e*_e+ge*ge);t.moveTo(Ft+me,Yt),t.arc(Ft,Yt,me,0,2*Math.PI,!0),++C;break;case v.CLOSE_PATH:t.closePath(),++C;break;case v.CUSTOM:L=K[1],W=K[2];const ze=K[4],xe=6==K.length?K[5]:void 0;et.geometry=K[3],et.feature=it,C in ft||(ft[C]=[]);const zt=ft[C];xe?xe(I,L,W,2,zt):(zt[0]=I[L],zt[1]=I[L+1],zt.length=2),ze(zt,et),++C;break;case v.DRAW_IMAGE:L=K[1],W=K[2],tt=K[3],B=K[4],U=K[5];let ne=K[6];const Ke=K[7],je=K[8],Ve=K[9],ye=K[10];let se=K[11];const Ne=K[12];let Jt=K[13];const pe=K[14],Kt=K[15];if(!tt&&K.length>=20){q=K[19],ht=K[20],dt=K[21],st=K[22];const Dt=this.drawLabelWithPointPlacement_(q,ht,dt,st);tt=Dt.label,K[3]=tt,B=(Dt.anchorX-K[23])*this.pixelRatio,K[4]=B,U=(Dt.anchorY-K[24])*this.pixelRatio,K[5]=U,ne=tt.height,K[6]=ne,Jt=tt.width,K[13]=Jt}let re,oe,Qt,$t;K.length>25&&(re=K[25]),K.length>17?(oe=K[16],Qt=K[17],$t=K[18]):(oe=p.oB,Qt=!1,$t=!1),ye&&gt?se+=Tt:!ye&&!gt&&(se-=Tt);let He=0;for(;L<W;L+=2){if(re&&re[He++]<Jt/this.pixelRatio)continue;const Dt=this.calculateImageOrLabelDimensions_(tt.width,tt.height,I[L],I[L+1],Jt,ne,B,U,je,Ve,se,Ne,c,oe,Qt||$t,it),Zt=[t,a,tt,Dt,Ke,Qt?pt:null,$t?mt:null];if(y){if("none"===pe)continue;if("obstacle"===pe){y.insert(Dt.declutterBox);continue}{let Ot,kt;if(Kt){const vt=W-L;if(!Kt[vt]){Kt[vt]=Zt;continue}if(Ot=Kt[vt],delete Kt[vt],kt=ce(Ot),y.collides(kt))continue}if(y.collides(Dt.declutterBox))continue;Ot&&(y.insert(kt),this.replayImageOrLabel_.apply(this,Ot)),y.insert(Dt.declutterBox)}}this.replayImageOrLabel_.apply(this,Zt)}++C;break;case v.DRAW_CHARS:const Se=K[1],Ee=K[2],ae=K[3],Je=K[4];st=K[5];const Qe=K[6],Ie=K[7],Ce=K[8];dt=K[9];const le=K[10];q=K[11],ht=K[12];const Re=[K[13],K[13]],he=this.textStates[ht],jt=he.font,Vt=[he.scale[0]*Ie,he.scale[1]*Ie];let Nt;jt in this.widths_?Nt=this.widths_[jt]:(Nt={},this.widths_[jt]=Nt);const Te=(0,St.W)(I,Se,Ee,2),De=Math.abs(Vt[0])*(0,p.Kd)(jt,q,Nt);if(Je||De<=Te){const Ot=It(I,Se,Ee,2,q,(Te-De)*F[this.textStates[ht].textAlign],Qe,Math.abs(Vt[0]),p.Kd,jt,Nt,gt?0:this.viewRotation_);t:if(Ot){const kt=[];let vt,qt,te,Ct,Lt;if(dt)for(vt=0,qt=Ot.length;vt<qt;++vt){Lt=Ot[vt],te=Lt[4],Ct=this.createLabel(te,ht,"",dt),B=Lt[2]+(Vt[0]<0?-le:le),U=ae*Ct.height+2*(.5-ae)*le*Vt[1]/Vt[0]-Ce;const Wt=this.calculateImageOrLabelDimensions_(Ct.width,Ct.height,Lt[0],Lt[1],Ct.width,Ct.height,B,U,0,0,Lt[3],Re,!1,p.oB,!1,it);if(y&&y.collides(Wt.declutterBox))break t;kt.push([t,a,Ct,Wt,1,null,null])}if(st)for(vt=0,qt=Ot.length;vt<qt;++vt){Lt=Ot[vt],te=Lt[4],Ct=this.createLabel(te,ht,st,""),B=Lt[2],U=ae*Ct.height-Ce;const Wt=this.calculateImageOrLabelDimensions_(Ct.width,Ct.height,Lt[0],Lt[1],Ct.width,Ct.height,B,U,0,0,Lt[3],Re,!1,p.oB,!1,it);if(y&&y.collides(Wt.declutterBox))break t;kt.push([t,a,Ct,Wt,1,null,null])}y&&y.load(kt.map(ce));for(let Wt=0,$e=kt.length;Wt<$e;++Wt)this.replayImageOrLabel_.apply(this,kt[Wt])}}++C;break;case v.END_GEOMETRY:if(void 0!==g){it=K[1];const Dt=g(it,At);if(Dt)return Dt}++C;break;case v.FILL:ct?ut++:this.fill_(t),++C;break;case v.MOVE_TO_LINE_TO:for(L=K[1],W=K[2],yt=I[L],Et=I[L+1],J=yt+.5|0,Q=Et+.5|0,(J!==k||Q!==X)&&(t.moveTo(yt,Et),k=J,X=Q),L+=2;L<W;L+=2)yt=I[L],Et=I[L+1],J=yt+.5|0,Q=Et+.5|0,(L==W-2||J!==k||Q!==X)&&(t.lineTo(yt,Et),k=J,X=Q);++C;break;case v.SET_FILL_STYLE:pt=K,this.alignFill_=K[2],ut&&(this.fill_(t),ut=0,_t&&(t.stroke(),_t=0)),t.fillStyle=K[1],++C;break;case v.SET_STROKE_STYLE:mt=K,_t&&(t.stroke(),_t=0),this.setStrokeStyle_(t,K),++C;break;case v.STROKE:ct?_t++:t.stroke(),++C;break;default:++C}}ut&&this.fill_(t),_t&&t.stroke()}execute(t,a,e,h,c,g){this.viewRotation_=h,this.execute_(t,a,e,this.instructions,c,void 0,void 0,g)}executeHitDetection(t,a,e,h,c){return this.viewRotation_=e,this.execute_(t,1,a,this.hitDetectionInstructions,!0,h,c)}};var Ut=m(1992),Ae=m(9466);const ee=["Polygon","Circle","LineString","Image","Text","Default"],ie={},ue=class Fe{constructor(t,a,e,h,c,g){this.maxExtent_=t,this.overlaps_=h,this.pixelRatio_=e,this.resolution_=a,this.renderBuffer_=g,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,H.Ue)(),this.createExecutors_(c)}clip(t,a){const e=this.getClipCoords(a);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()}createExecutors_(t){for(const a in t){let e=this.executorsByZIndex_[a];void 0===e&&(e={},this.executorsByZIndex_[a]=e);const h=t[a];for(const c in h)e[c]=new Me(this.resolution_,this.pixelRatio_,this.overlaps_,h[c])}}hasExecutors(t){for(const a in this.executorsByZIndex_){const e=this.executorsByZIndex_[a];for(let h=0,c=t.length;h<c;++h)if(t[h]in e)return!0}return!1}forEachFeatureAtCoordinate(t,a,e,h,c,g){const _=2*(h=Math.round(h))+1,y=(0,H.qC)(this.hitDetectionTransform_,h+.5,h+.5,1/a,-1/a,-e,-t[0],-t[1]),I=!this.hitDetectionContext_;I&&(this.hitDetectionContext_=(0,Ut.E4)(_,_,void 0,{willReadFrequently:!0}));const C=this.hitDetectionContext_;let A;C.canvas.width!==_||C.canvas.height!==_?(C.canvas.width=_,C.canvas.height=_):I||C.clearRect(0,0,_,_),void 0!==this.renderBuffer_&&(A=(0,u.lJ)(),(0,u.Wj)(A,t),(0,u.f3)(A,a*(this.renderBuffer_+h),A));const L=function Pe($){if(void 0!==ie[$])return ie[$];const t=2*$+1,a=$*$,e=new Array(a+1);for(let c=0;c<=$;++c)for(let g=0;g<=$;++g){const _=c*c+g*g;if(_>a)break;let y=e[_];y||(y=[],e[_]=y),y.push(4*(($+c)*t+($+g))+3),c>0&&y.push(4*(($-c)*t+($+g))+3),g>0&&(y.push(4*(($+c)*t+($-g))+3),c>0&&y.push(4*(($-c)*t+($-g))+3))}const h=[];for(let c=0,g=e.length;c<g;++c)e[c]&&h.push(...e[c]);return ie[$]=h,h}(h);let W;function B(q,ht){const dt=C.getImageData(0,0,_,_).data;for(let st=0,ut=L.length;st<ut;st++)if(dt[L[st]]>0){if(!g||"Image"!==W&&"Text"!==W||g.includes(q)){const _t=(L[st]-3)/4,pt=h-_t%_,mt=h-(_t/_|0),ft=c(q,ht,pt*pt+mt*mt);if(ft)return ft}C.clearRect(0,0,_,_);break}}const U=Object.keys(this.executorsByZIndex_).map(Number);let k,X,J,Q,tt;for(U.sort(Z.j2),k=U.length-1;k>=0;--k){const q=U[k].toString();for(J=this.executorsByZIndex_[q],X=ee.length-1;X>=0;--X)if(W=ee[X],Q=J[W],void 0!==Q&&(tt=Q.executeHitDetection(C,y,e,B,A),tt))return tt}}getClipCoords(t){const a=this.maxExtent_;if(!a)return null;const e=a[0],h=a[1],c=a[2],g=a[3],_=[e,h,e,g,c,g,c,h];return(0,lt.vT)(_,0,8,2,t,_),_}isEmpty(){return(0,Ae.x)(this.executorsByZIndex_)}execute(t,a,e,h,c,g,_){const y=Object.keys(this.executorsByZIndex_).map(Number);let I,C,A,L,W,B;for(y.sort(Z.j2),this.maxExtent_&&(t.save(),this.clip(t,e)),g=g||ee,_&&y.reverse(),I=0,C=y.length;I<C;++I){const U=y[I].toString();for(W=this.executorsByZIndex_[U],A=0,L=g.length;A<L;++A)B=W[g[A]],void 0!==B&&B.execute(t,a,e,h,c,_)}this.maxExtent_&&t.restore()}};var Ht=m(8587),we=m(3620),ke=m(9570);const Mt=.5;var Gt=m(8377),Xt=m(6003),be=m(3481);const Xe=class Ge extends at.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,u.lJ)(),this.wrappedRenderedExtent_=(0,u.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,a,e){const h=a.extent,c=a.viewState,g=c.center,_=c.resolution,y=c.projection,I=c.rotation,C=y.getExtent(),A=this.getLayer().getSource(),L=a.pixelRatio,W=a.viewHints,B=!(W[Ht.Z.ANIMATING]||W[Ht.Z.INTERACTING]),U=this.compositionContext_,k=Math.round(a.size[0]*L),X=Math.round(a.size[1]*L),J=A.getWrapX()&&y.canWrapX(),Q=J?(0,u.dz)(C):null,tt=J?Math.ceil((h[2]-C[2])/Q)+1:1;let q=J?Math.floor((h[0]-C[0])/Q):0;do{const ht=this.getRenderTransform(g,_,I,L,k,X,q*Q);t.execute(U,1,ht,I,B,void 0,e)}while(++q<tt)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,Ut.E4)(this.context.canvas.width,this.context.canvas.height,at.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,Ut.jy)(this.compositionContext_),at.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,a){const e=t.pixelRatio,h=t.layerStatesArray[t.layerIndex];(0,H.n3)(this.pixelTransform,1/e,1/e),(0,H.nb)(this.inversePixelTransform,this.pixelTransform);const c=(0,H.BB)(this.pixelTransform);this.useContainer(a,c,this.getBackground(t));const g=this.context,_=g.canvas,y=this.replayGroup_,I=this.declutterExecutorGroup;if((!y||y.isEmpty())&&(!I||I.isEmpty()))return null;const C=Math.round(t.size[0]*e),A=Math.round(t.size[1]*e);_.width!=C||_.height!=A?(_.width=C,_.height=A,_.style.transform!==c&&(_.style.transform=c)):this.containerReused||g.clearRect(0,0,C,A),this.preRender(g,t);const L=t.viewState,W=L.projection;this.opacity_=h.opacity,this.setupCompositionContext_();let B=!1,U=!0;if(h.extent&&this.clipping){const k=(0,Xt.dY)(h.extent,W);U=(0,u.kK)(k,t.extent),B=U&&!(0,u.r4)(k,t.extent),B&&this.clipUnrotated(this.compositionContext_,t,k)}return U&&this.renderWorlds(y,t),B&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(g,t),this.renderedRotation_!==L.rotation&&(this.renderedRotation_=L.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(a=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,H.nn)(this.pixelTransform,e);const h=this.renderedCenter_,c=this.renderedResolution_,g=this.renderedRotation_,_=this.renderedProjection_,y=this.wrappedRenderedExtent_,I=this.getLayer(),C=[],A=e[0]*Mt,L=e[1]*Mt;C.push(this.getRenderTransform(h,c,g,Mt,A,L,0).slice());const W=I.getSource(),B=_.getExtent();if(W.getWrapX()&&_.canWrapX()&&!(0,u.r4)(B,y)){let U=y[0];const k=(0,u.dz)(B);let J,X=0;for(;U<B[0];)--X,J=k*X,C.push(this.getRenderTransform(h,c,g,Mt,A,L,J).slice()),U+=k;for(X=0,U=y[2];U>B[2];)++X,J=k*X,C.push(this.getRenderTransform(h,c,g,Mt,A,L,J).slice()),U-=k}this.hitDetectionImageData_=function We($,t,a,e,h,c,g){const I=(0,Ut.E4)($[0]*Mt,$[1]*Mt);I.imageSmoothingEnabled=!1;const C=I.canvas,A=new we.Z(I,Mt,h,null,g),L=a.length,W=Math.floor(16777215/L),B={};for(let k=1;k<=L;++k){const X=a[k-1],J=X.getStyleFunction()||e;if(!e)continue;let Q=J(X,c);if(!Q)continue;Array.isArray(Q)||(Q=[Q]);const q=(k*W).toString(16).padStart(7,"#00000");for(let ht=0,dt=Q.length;ht<dt;++ht){const st=Q[ht],ut=st.getGeometryFunction()(X);if(!ut||!(0,u.kK)(h,ut.getExtent()))continue;const _t=st.clone(),pt=_t.getFill();pt&&pt.setColor(q);const mt=_t.getStroke();mt&&(mt.setColor(q),mt.setLineDash(null)),_t.setText(void 0);const ft=st.getImage();if(ft&&0!==ft.getOpacity()){const ct=ft.getImageSize();if(!ct)continue;const it=(0,Ut.E4)(ct[0],ct[1],void 0,{alpha:!1}),yt=it.canvas;it.fillStyle=q,it.fillRect(0,0,yt.width,yt.height),_t.setImage(new ke.Z({img:yt,imgSize:ct,anchor:ft.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ft.getOrigin(),opacity:1,size:ft.getSize(),scale:ft.getScale(),rotation:ft.getRotation(),rotateWithView:ft.getRotateWithView()}))}const Tt=_t.getZIndex()||0;let gt=B[Tt];gt||(gt={},B[Tt]=gt,gt.Polygon=[],gt.Circle=[],gt.LineString=[],gt.Point=[]);const et=ut.getType();if("GeometryCollection"===et){const ct=ut.getGeometriesArrayRecursive();for(let it=0,yt=ct.length;it<yt;++it){const Et=ct[it];gt[Et.getType().replace("Multi","")].push(Et,_t)}}else gt[et.replace("Multi","")].push(ut,_t)}}const U=Object.keys(B).map(Number).sort(Z.j2);for(let k=0,X=U.length;k<X;++k){const J=B[U[k]];for(const Q in J){const tt=J[Q];for(let q=0,ht=tt.length;q<ht;q+=2){A.setStyle(tt[q+1]);for(let dt=0,st=t.length;dt<st;++dt)A.setTransform(t[dt]),A.drawGeometry(tt[q])}}}return I.getImageData(0,0,C.width,C.height)}(e,C,this.renderedFeatures_,I.getStyleFunction(),y,c,g)}a(function Be($,t,a){const e=[];if(a){const h=Math.floor(Math.round($[0])*Mt),c=Math.floor(Math.round($[1])*Mt),g=4*((0,R.uZ)(h,0,a.width-1)+(0,R.uZ)(c,0,a.height-1)*a.width),C=a.data[g+2]+256*(a.data[g+1]+256*a.data[g]),A=Math.floor(16777215/t.length);C&&C%A==0&&e.push(t[C/A-1])}return e}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,a,e,h,c){if(!this.replayGroup_)return;const g=a.viewState.resolution,_=a.viewState.rotation,y=this.getLayer(),I={},C=function(W,B,U){const k=(0,O.sq)(W),X=I[k];if(X){if(!0!==X&&U<X.distanceSq){if(0===U)return I[k]=!0,c.splice(c.lastIndexOf(X),1),h(W,y,B);X.geometry=B,X.distanceSq=U}}else{if(0===U)return I[k]=!0,h(W,y,B);c.push(I[k]={feature:W,layer:y,geometry:B,distanceSq:U,callback:h})}};let A;const L=[this.replayGroup_];return this.declutterExecutorGroup&&L.push(this.declutterExecutorGroup),L.some(W=>A=W.forEachFeatureAtCoordinate(t,g,_,e,C,W===this.declutterExecutorGroup&&a.declutterTree?a.declutterTree.all().map(B=>B.value):null)),A}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const a=this.getLayer(),e=a.getSource();if(!e)return!1;const h=t.viewHints[Ht.Z.ANIMATING],c=t.viewHints[Ht.Z.INTERACTING],g=a.getUpdateWhileAnimating(),_=a.getUpdateWhileInteracting();if(this.ready&&!g&&h||!_&&c)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const y=t.extent,I=t.viewState,C=I.projection,A=I.resolution,L=t.pixelRatio,W=a.getRevision(),B=a.getRenderBuffer();let U=a.getRenderOrder();void 0===U&&(U=Gt.eR);const k=I.center.slice(),X=(0,u.f3)(y,B*A),J=X.slice(),Q=[X.slice()],tt=C.getExtent();if(e.getWrapX()&&C.canWrapX()&&!(0,u.r4)(tt,t.extent)){const et=(0,u.dz)(tt),ct=Math.max((0,u.dz)(X)/2,et);X[0]=tt[0]-ct,X[2]=tt[2]+ct,(0,be.Cf)(k,C);const it=(0,u.Cf)(Q[0],C);it[0]<tt[0]&&it[2]<tt[2]?Q.push([it[0]+et,it[1],it[2]+et,it[3]]):it[0]>tt[0]&&it[2]>tt[2]&&Q.push([it[0]-et,it[1],it[2]-et,it[3]])}if(this.ready&&this.renderedResolution_==A&&this.renderedRevision_==W&&this.renderedRenderOrder_==U&&(0,u.r4)(this.wrappedRenderedExtent_,X))return(0,Z.fS)(this.renderedExtent_,J)||(this.hitDetectionImageData_=null,this.renderedExtent_=J),this.renderedCenter_=k,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const q=new rt((0,Gt.Qz)(A,L),X,A,L);let ht;this.getLayer().getDeclutter()&&(ht=new rt((0,Gt.Qz)(A,L),X,A,L));const dt=(0,Xt.Cs)();let st;if(dt){for(let et=0,ct=Q.length;et<ct;++et){const yt=(0,Xt.Fj)(Q[et],C);e.loadFeatures(yt,(0,Xt.on)(A,C),dt)}st=(0,Xt.WO)(dt,C)}else for(let et=0,ct=Q.length;et<ct;++et)e.loadFeatures(Q[et],A,C);const ut=(0,Gt.se)(A,L);let _t=!0;const pt=et=>{let ct;const it=et.getStyleFunction()||a.getStyleFunction();if(it&&(ct=it(et,A)),ct){const yt=this.renderFeature(et,ut,ct,q,st,ht);_t=_t&&!yt}},mt=(0,Xt.Fj)(X,C),ft=e.getFeaturesInExtent(mt);U&&ft.sort(U);for(let et=0,ct=ft.length;et<ct;++et)pt(ft[et]);this.renderedFeatures_=ft,this.ready=_t;const Tt=q.finish(),gt=new ue(X,A,L,e.getOverlaps(),Tt,a.getRenderBuffer());return ht&&(this.declutterExecutorGroup=new ue(X,A,L,e.getOverlaps(),ht.finish(),a.getRenderBuffer())),this.renderedResolution_=A,this.renderedRevision_=W,this.renderedRenderOrder_=U,this.renderedExtent_=J,this.wrappedRenderedExtent_=X,this.renderedCenter_=k,this.renderedProjection_=C,this.replayGroup_=gt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,a,e,h,c,g){if(!e)return!1;let _=!1;if(Array.isArray(e))for(let y=0,I=e.length;y<I;++y)_=(0,Gt.Pn)(h,t,e[y],a,this.boundHandleStyleImageChange_,c,g)||_;else _=(0,Gt.Pn)(h,t,e,a,this.boundHandleStyleImageChange_,c,g);return _}}},8377:(xt,nt,m)=>{"use strict";m.d(nt,{Pn:()=>G,Qz:()=>ot,eR:()=>Y,se:()=>v});var V=m(521),b=m(119);const N=.5,D={Point:function d(s,l,n,o,O){const R=n.getImage(),w=n.getText();let M;if(R){if(R.getImageState()!=V.Z.LOADED)return;let F=s;if(O){const S=R.getDeclutterMode();if("none"!==S)if(F=O,"obstacle"===S){const P=s.getBuilder(n.getZIndex(),"Image");P.setImageStyle(R,M),P.drawPoint(l,o)}else w&&w.getText()&&(M={})}const f=F.getBuilder(n.getZIndex(),"Image");f.setImageStyle(R,M),f.drawPoint(l,o)}if(w&&w.getText()){let F=s;O&&(F=O);const f=F.getBuilder(n.getZIndex(),"Text");f.setTextStyle(w,M),f.drawText(l,o)}},LineString:function r(s,l,n,o,O){const R=n.getStroke();if(R){const M=s.getBuilder(n.getZIndex(),"LineString");M.setFillStrokeStyle(null,R),M.drawLineString(l,o)}const w=n.getText();if(w&&w.getText()){const M=(O||s).getBuilder(n.getZIndex(),"Text");M.setTextStyle(w),M.drawText(l,o)}},Polygon:function T(s,l,n,o,O){const R=n.getFill(),w=n.getStroke();if(R||w){const F=s.getBuilder(n.getZIndex(),"Polygon");F.setFillStrokeStyle(R,w),F.drawPolygon(l,o)}const M=n.getText();if(M&&M.getText()){const F=(O||s).getBuilder(n.getZIndex(),"Text");F.setTextStyle(M),F.drawText(l,o)}},MultiPoint:function E(s,l,n,o,O){const R=n.getImage(),w=n.getText();let M;if(R){if(R.getImageState()!=V.Z.LOADED)return;let F=s;if(O){const S=R.getDeclutterMode();if("none"!==S)if(F=O,"obstacle"===S){const P=s.getBuilder(n.getZIndex(),"Image");P.setImageStyle(R,M),P.drawMultiPoint(l,o)}else w&&w.getText()&&(M={})}const f=F.getBuilder(n.getZIndex(),"Image");f.setImageStyle(R,M),f.drawMultiPoint(l,o)}if(w&&w.getText()){let F=s;O&&(F=O);const f=F.getBuilder(n.getZIndex(),"Text");f.setTextStyle(w,M),f.drawText(l,o)}},MultiLineString:function x(s,l,n,o,O){const R=n.getStroke();if(R){const M=s.getBuilder(n.getZIndex(),"LineString");M.setFillStrokeStyle(null,R),M.drawMultiLineString(l,o)}const w=n.getText();if(w&&w.getText()){const M=(O||s).getBuilder(n.getZIndex(),"Text");M.setTextStyle(w),M.drawText(l,o)}},MultiPolygon:function i(s,l,n,o,O){const R=n.getFill(),w=n.getStroke();if(w||R){const F=s.getBuilder(n.getZIndex(),"Polygon");F.setFillStrokeStyle(R,w),F.drawMultiPolygon(l,o)}const M=n.getText();if(M&&M.getText()){const F=(O||s).getBuilder(n.getZIndex(),"Text");F.setTextStyle(M),F.drawText(l,o)}},GeometryCollection:function Z(s,l,n,o,O){const R=l.getGeometriesArray();let w,M;for(w=0,M=R.length;w<M;++w)(0,D[R[w].getType()])(s,R[w],n,o,O)},Circle:function z(s,l,n,o,O){const R=n.getFill(),w=n.getStroke();if(R||w){const F=s.getBuilder(n.getZIndex(),"Circle");F.setFillStrokeStyle(R,w),F.drawCircle(l,o)}const M=n.getText();if(M&&M.getText()){const F=(O||s).getBuilder(n.getZIndex(),"Text");F.setTextStyle(M),F.drawText(l,o)}}};function Y(s,l){return parseInt((0,b.sq)(s),10)-parseInt((0,b.sq)(l),10)}function v(s,l){const n=ot(s,l);return n*n}function ot(s,l){return N*s/l}function G(s,l,n,o,O,R,w){let M=!1;const F=n.getImage();if(F){const f=F.getImageState();f==V.Z.LOADED||f==V.Z.ERROR?F.unlistenImageChange(O):(f==V.Z.IDLE&&F.load(),F.listenImageChange(O),M=!0)}return function u(s,l,n,o,O,R){const w=n.getGeometryFunction()(l);if(!w)return;const M=w.simplifyTransformed(o,O);n.getRenderer()?p(s,M,n,l):(0,D[M.getType()])(s,M,n,l,R)}(s,l,n,o,R,w),M}function p(s,l,n,o){if("GeometryCollection"!=l.getType())s.getBuilder(n.getZIndex(),"Default").drawCustom(l,o,n.getRenderer(),n.getHitDetectionRenderer());else{const R=l.getGeometries();for(let w=0,M=R.length;w<M;++w)p(s,R[w],n,o)}}},5947:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>M});var V=m(2815),b=m(9889),N=m(8214),D=m(9972),Y=m(4587),v=m(2909),ot=m(4702),z=m(4412),G=m(1345);function p(F,f){return[[-1/0,-1/0,1/0,1/0]]}m(6003);var x=m(1911),i=m(760),d=m(2456),E=m(119),T=m(9466),s=m(1729);function o(F,f){return function(S,P,j,rt,at){const H=this;!function n(F,f,S,P,j,rt,at){const H=new XMLHttpRequest;H.open("GET","function"==typeof F?F(S,P,j):F,!0),"arraybuffer"==f.getType()&&(H.responseType="arraybuffer"),H.withCredentials=false,H.onload=function(lt){if(!H.status||H.status>=200&&H.status<300){const It=f.getType();let St;"json"==It||"text"==It?St=H.responseText:"xml"==It?(St=H.responseXML,St||(St=(new DOMParser).parseFromString(H.responseText,"application/xml"))):"arraybuffer"==It&&(St=H.response),St?rt(f.readFeatures(St,{extent:S,featureProjection:j}),f.readProjection(St)):at()}else at()},H.onerror=at,H.send()}(F,f,S,P,j,function(lt,It){H.addFeatures(lt),void 0!==rt&&rt(lt)},at||G.Zn)}}class R extends N.ZP{constructor(f,S,P){super(f),this.feature=S,this.features=P}}const M=class w extends ot.Z{constructor(f){super({attributions:(f=f||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===f.wrapX||f.wrapX}),this.loader_=G.Zn,this.format_=f.format,this.overlaps_=void 0===f.overlaps||f.overlaps,this.url_=f.url,void 0!==f.loader?this.loader_=f.loader:void 0!==this.url_&&((0,x.h)(this.format_,7),this.loader_=o(this.url_,this.format_)),this.strategy_=void 0!==f.strategy?f.strategy:p;const S=void 0===f.useSpatialIndex||f.useSpatialIndex;let P,j;this.featuresRtree_=S?new v.Z:null,this.loadedExtentsRtree_=new v.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(f.features)?j=f.features:f.features&&(P=f.features,j=P.getArray()),!S&&void 0===P&&(P=new V.Z(j)),void 0!==j&&this.addFeaturesInternal(j),void 0!==P&&this.bindFeaturesCollection_(P)}addFeature(f){this.addFeatureInternal(f),this.changed()}addFeatureInternal(f){const S=(0,E.sq)(f);if(!this.addToIndex_(S,f))return void(this.featuresCollection_&&this.featuresCollection_.remove(f));this.setupChangeEvents_(S,f);const P=f.getGeometry();if(P){const j=P.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(j,f)}else this.nullGeometryFeatures_[S]=f;this.dispatchEvent(new R(z.Z.ADDFEATURE,f))}setupChangeEvents_(f,S){this.featureChangeKeys_[f]=[(0,s.oL)(S,D.Z.CHANGE,this.handleFeatureChange_,this),(0,s.oL)(S,Y.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(f,S){let P=!0;const j=S.getId();return void 0!==j&&(j.toString()in this.idIndex_?P=!1:this.idIndex_[j.toString()]=S),P&&((0,x.h)(!(f in this.uidIndex_),30),this.uidIndex_[f]=S),P}addFeatures(f){this.addFeaturesInternal(f),this.changed()}addFeaturesInternal(f){const S=[],P=[],j=[];for(let rt=0,at=f.length;rt<at;rt++){const H=f[rt],lt=(0,E.sq)(H);this.addToIndex_(lt,H)&&P.push(H)}for(let rt=0,at=P.length;rt<at;rt++){const H=P[rt],lt=(0,E.sq)(H);this.setupChangeEvents_(lt,H);const It=H.getGeometry();if(It){const St=It.getExtent();S.push(St),j.push(H)}else this.nullGeometryFeatures_[lt]=H}if(this.featuresRtree_&&this.featuresRtree_.load(S,j),this.hasListener(z.Z.ADDFEATURE))for(let rt=0,at=P.length;rt<at;rt++)this.dispatchEvent(new R(z.Z.ADDFEATURE,P[rt]))}bindFeaturesCollection_(f){let S=!1;this.addEventListener(z.Z.ADDFEATURE,function(P){S||(S=!0,f.push(P.feature),S=!1)}),this.addEventListener(z.Z.REMOVEFEATURE,function(P){S||(S=!0,f.remove(P.feature),S=!1)}),f.addEventListener(b.Z.ADD,P=>{S||(S=!0,this.addFeature(P.element),S=!1)}),f.addEventListener(b.Z.REMOVE,P=>{S||(S=!0,this.removeFeature(P.element),S=!1)}),this.featuresCollection_=f}clear(f){if(f){for(const P in this.featureChangeKeys_)this.featureChangeKeys_[P].forEach(s.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(j=>{this.removeFeatureInternal(j)});for(const j in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[j])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const S=new R(z.Z.CLEAR);this.dispatchEvent(S),this.changed()}forEachFeature(f){if(this.featuresRtree_)return this.featuresRtree_.forEach(f);this.featuresCollection_&&this.featuresCollection_.forEach(f)}forEachFeatureAtCoordinateDirect(f,S){return this.forEachFeatureInExtent([f[0],f[1],f[0],f[1]],function(j){if(j.getGeometry().intersectsCoordinate(f))return S(j)})}forEachFeatureInExtent(f,S){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(f,S);this.featuresCollection_&&this.featuresCollection_.forEach(S)}forEachFeatureIntersectingExtent(f,S){return this.forEachFeatureInExtent(f,function(P){if(P.getGeometry().intersectsExtent(f)){const rt=S(P);if(rt)return rt}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let f;return this.featuresCollection_?f=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(f=this.featuresRtree_.getAll(),(0,T.x)(this.nullGeometryFeatures_)||(0,d.l7)(f,Object.values(this.nullGeometryFeatures_))),f}getFeaturesAtCoordinate(f){const S=[];return this.forEachFeatureAtCoordinateDirect(f,function(P){S.push(P)}),S}getFeaturesInExtent(f,S){if(this.featuresRtree_){if(!(S&&S.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(f);const j=(0,i.MV)(f,S);return[].concat(...j.map(rt=>this.featuresRtree_.getInExtent(rt)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(f,S){const P=f[0],j=f[1];let rt=null;const at=[NaN,NaN];let H=1/0;const lt=[-1/0,-1/0,1/0,1/0];return S=S||G.uX,this.featuresRtree_.forEachInExtent(lt,function(It){if(S(It)){const St=It.getGeometry(),Bt=H;if(H=St.closestPointXY(P,j,at,H),H<Bt){rt=It;const Rt=Math.sqrt(H);lt[0]=P-Rt,lt[1]=j-Rt,lt[2]=P+Rt,lt[3]=j+Rt}}}),rt}getExtent(f){return this.featuresRtree_.getExtent(f)}getFeatureById(f){const S=this.idIndex_[f.toString()];return void 0!==S?S:null}getFeatureByUid(f){const S=this.uidIndex_[f];return void 0!==S?S:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(f){const S=f.target,P=(0,E.sq)(S),j=S.getGeometry();if(j){const at=j.getExtent();P in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[P],this.featuresRtree_&&this.featuresRtree_.insert(at,S)):this.featuresRtree_&&this.featuresRtree_.update(at,S)}else P in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(S),this.nullGeometryFeatures_[P]=S);const rt=S.getId();if(void 0!==rt){const at=rt.toString();this.idIndex_[at]!==S&&(this.removeFromIdIndex_(S),this.idIndex_[at]=S)}else this.removeFromIdIndex_(S),this.uidIndex_[P]=S;this.changed(),this.dispatchEvent(new R(z.Z.CHANGEFEATURE,S))}hasFeature(f){const S=f.getId();return void 0!==S?S in this.idIndex_:(0,E.sq)(f)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,T.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(f,S,P){const j=this.loadedExtentsRtree_,rt=this.strategy_(f,S,P);for(let at=0,H=rt.length;at<H;++at){const lt=rt[at];j.forEachInExtent(lt,function(St){return(0,i.r4)(St.extent,lt)})||(++this.loadingExtentsCount_,this.dispatchEvent(new R(z.Z.FEATURESLOADSTART)),this.loader_.call(this,lt,S,P,St=>{--this.loadingExtentsCount_,this.dispatchEvent(new R(z.Z.FEATURESLOADEND,void 0,St))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new R(z.Z.FEATURESLOADERROR))}),j.insert(lt,{extent:lt.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(f){const S=this.loadedExtentsRtree_;let P;S.forEachInExtent(f,function(j){if((0,i.fS)(j.extent,f))return P=j,!0}),P&&S.remove(P)}removeFeature(f){if(!f)return;const S=(0,E.sq)(f);S in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[S]:this.featuresRtree_&&this.featuresRtree_.remove(f),this.removeFeatureInternal(f)&&this.changed()}removeFeatureInternal(f){const S=(0,E.sq)(f),P=this.featureChangeKeys_[S];if(!P)return;P.forEach(s.bN),delete this.featureChangeKeys_[S];const j=f.getId();return void 0!==j&&delete this.idIndex_[j.toString()],delete this.uidIndex_[S],this.dispatchEvent(new R(z.Z.REMOVEFEATURE,f)),f}removeFromIdIndex_(f){let S=!1;for(const P in this.idIndex_)if(this.idIndex_[P]===f){delete this.idIndex_[P],S=!0;break}return S}setLoader(f){this.loader_=f}setUrl(f){(0,x.h)(this.format_,7),this.url_=f,this.setLoader(o(f,this.format_))}}},4412:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>V});const V={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>v});var V=m(2402),b=m(760),N=m(119),D=m(9466);const v=class Y{constructor(z){this.rbush_=new V(z),this.items_={}}insert(z,G){const u={minX:z[0],minY:z[1],maxX:z[2],maxY:z[3],value:G};this.rbush_.insert(u),this.items_[(0,N.sq)(G)]=u}load(z,G){const u=new Array(G.length);for(let p=0,Z=G.length;p<Z;p++){const r=z[p],x=G[p],i={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:x};u[p]=i,this.items_[(0,N.sq)(x)]=i}this.rbush_.load(u)}remove(z){const G=(0,N.sq)(z),u=this.items_[G];return delete this.items_[G],null!==this.rbush_.remove(u)}update(z,G){const u=this.items_[(0,N.sq)(G)];(0,b.fS)([u.minX,u.minY,u.maxX,u.maxY],z)||(this.remove(G),this.insert(z,G))}getAll(){return this.rbush_.all().map(function(G){return G.value})}getInExtent(z){return this.rbush_.search({minX:z[0],minY:z[1],maxX:z[2],maxY:z[3]}).map(function(p){return p.value})}forEach(z){return this.forEach_(this.getAll(),z)}forEachInExtent(z,G){return this.forEach_(this.getInExtent(z),G)}forEach_(z,G){let u;for(let p=0,Z=z.length;p<Z;p++)if(u=G(z[p]),u)return u;return u}isEmpty(){return(0,D.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(z){const G=this.rbush_.toJSON();return(0,b.T9)(G.minX,G.minY,G.maxX,G.maxY,z)}concat(z){this.rbush_.load(z.rbush_.all());for(const G in z.items_)this.items_[G]=z.items_[G]}}},7392:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>N});var V=m(8225);class b extends V.Z{constructor(Y){super({points:1/0,fill:(Y=Y||{radius:5}).fill,radius:Y.radius,stroke:Y.stroke,scale:void 0!==Y.scale?Y.scale:1,rotation:void 0!==Y.rotation?Y.rotation:0,rotateWithView:void 0!==Y.rotateWithView&&Y.rotateWithView,displacement:void 0!==Y.displacement?Y.displacement:[0,0],declutterMode:Y.declutterMode})}clone(){const Y=this.getScale(),v=new b({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(Y)?Y.slice():Y,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return v.setOpacity(this.getOpacity()),v}setRadius(Y){this.radius_=Y,this.render()}}const N=b},5044:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>b});class V{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null}clone(){const D=this.getColor();return new V({color:Array.isArray(D)?D.slice():D||void 0})}getColor(){return this.color_}setColor(D){this.color_=D}}const b=V},9570:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>E});var V=m(9972),b=m(521),N=m(6398),D=m(3783),Y=m(1911),v=m(8007),ot=m(1992),z=m(2956),G=m(3641);let u=null;class p extends v.Z{constructor(s,l,n,o,O,R){super(),this.hitDetectionImage_=null,this.image_=s,this.crossOrigin_=o,this.canvas_={},this.color_=R,this.unlisten_=null,this.imageState_=O,this.size_=n,this.src_=l}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===b.Z.LOADED){u||(u=(0,ot.E4)(1,1,void 0,{willReadFrequently:!0})),u.drawImage(this.image_,0,0);try{u.getImageData(0,0,1,1),this.tainted_=!1}catch{u=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(V.Z.CHANGE)}handleImageError_(){this.imageState_=b.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=b.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(s){return this.image_||this.initializeImage_(),this.replaceColor_(s),this.canvas_[s]?this.canvas_[s]:this.image_}getPixelRatio(s){return this.replaceColor_(s),this.canvas_[s]?s:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const s=this.size_[0],l=this.size_[1],n=(0,ot.E4)(s,l);n.fillRect(0,0,s,l),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===b.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=b.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,G.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(s){if(!this.color_||this.canvas_[s]||this.imageState_!==b.Z.LOADED)return;const l=this.image_,n=document.createElement("canvas");n.width=Math.ceil(l.width*s),n.height=Math.ceil(l.height*s);const o=n.getContext("2d");o.scale(s,s),o.drawImage(l,0,0),o.globalCompositeOperation="multiply",o.fillStyle=(0,D.XC)(this.color_),o.fillRect(0,0,n.width/s,n.height/s),o.globalCompositeOperation="destination-in",o.drawImage(l,0,0),this.canvas_[s]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var x=m(119);function i(T,s,l,n){return void 0!==l&&void 0!==n?[l/T,n/s]:void 0!==l?l/T:void 0!==n?n/s:1}class d extends N.Z{constructor(s){super({opacity:void 0!==(s=s||{}).opacity?s.opacity:1,rotation:void 0!==s.rotation?s.rotation:0,scale:void 0!==s.scale?s.scale:1,displacement:void 0!==s.displacement?s.displacement:[0,0],rotateWithView:void 0!==s.rotateWithView&&s.rotateWithView,declutterMode:s.declutterMode}),this.anchor_=void 0!==s.anchor?s.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==s.anchorOrigin?s.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==s.anchorXUnits?s.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==s.anchorYUnits?s.anchorYUnits:"fraction",this.crossOrigin_=void 0!==s.crossOrigin?s.crossOrigin:null;const R=void 0!==s.img?s.img:null;this.imgSize_=s.imgSize;let w=s.src;(0,Y.h)(!(void 0!==w&&R),4),(0,Y.h)(!R||R&&this.imgSize_,5),(void 0===w||0===w.length)&&R&&(w=R.src||(0,x.sq)(R)),(0,Y.h)(void 0!==w&&w.length>0,6),(0,Y.h)(!((void 0!==s.width||void 0!==s.height)&&void 0!==s.scale),69);const M=void 0!==s.src?b.Z.IDLE:b.Z.LOADED;if(this.color_=void 0!==s.color?(0,D._2)(s.color):null,this.iconImage_=function Z(T,s,l,n,o,O){let R=z.c.get(s,n,O);return R||(R=new p(T,s,l,n,o,O),z.c.set(s,n,O,R)),R}(R,w,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,M,this.color_),this.offset_=void 0!==s.offset?s.offset:[0,0],this.offsetOrigin_=void 0!==s.offsetOrigin?s.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==s.size?s.size:null,void 0!==s.width||void 0!==s.height){let F,f;if(s.size)[F,f]=s.size;else{const S=this.getImage(1);if(!(S instanceof HTMLCanvasElement||S.src&&S.complete)){this.initialOptions_=s;const P=()=>{if(this.unlistenImageChange(P),!this.initialOptions_)return;const j=this.iconImage_.getSize();this.setScale(i(j[0],j[1],s.width,s.height))};return void this.listenImageChange(P)}F=S.width,f=S.height}void 0!==F&&this.setScale(i(F,f,s.width,s.height))}}clone(){let s,l,n;return this.initialOptions_?(l=this.initialOptions_.width,n=this.initialOptions_.height):(s=this.getScale(),s=Array.isArray(s)?s.slice():s),new d({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:s,width:l,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let s=this.normalizedAnchor_;if(!s){s=this.anchor_;const o=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!o)return null;s=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(s[0]*=o[0]),"fraction"==this.anchorYUnits_&&(s[1]*=o[1])}if("top-left"!=this.anchorOrigin_){if(!o)return null;s===this.anchor_&&(s=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[0]=-s[0]+o[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[1]=-s[1]+o[1])}this.normalizedAnchor_=s}const l=this.getDisplacement(),n=this.getScaleArray();return[s[0]-l[0]/n[0],s[1]+l[1]/n[1]]}setAnchor(s){this.anchor_=s,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(s){return this.iconImage_.getImage(s)}getPixelRatio(s){return this.iconImage_.getPixelRatio(s)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let s=this.offset_;if("top-left"!=this.offsetOrigin_){const l=this.getSize(),n=this.iconImage_.getSize();if(!l||!n)return null;s=s.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[0]=n[0]-l[0]-s[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[1]=n[1]-l[1]-s[1])}return this.origin_=s,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const s=this.getScaleArray();return this.size_?this.size_[0]*s[0]:this.iconImage_.getImageState()==b.Z.LOADED?this.iconImage_.getSize()[0]*s[0]:void 0}getHeight(){const s=this.getScaleArray();return this.size_?this.size_[1]*s[1]:this.iconImage_.getImageState()==b.Z.LOADED?this.iconImage_.getSize()[1]*s[1]:void 0}setScale(s){delete this.initialOptions_,super.setScale(s)}listenImageChange(s){this.iconImage_.addEventListener(V.Z.CHANGE,s)}load(){this.iconImage_.load()}unlistenImageChange(s){this.iconImage_.removeEventListener(V.Z.CHANGE,s)}}const E=d},6398:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>D});var V=m(119),b=m(1750);class N{constructor(v){this.opacity_=v.opacity,this.rotateWithView_=v.rotateWithView,this.rotation_=v.rotation,this.scale_=v.scale,this.scaleArray_=(0,b.Pq)(v.scale),this.displacement_=v.displacement,this.declutterMode_=v.declutterMode}clone(){const v=this.getScale();return new N({opacity:this.getOpacity(),scale:Array.isArray(v)?v.slice():v,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,V.O3)()}getImage(v){return(0,V.O3)()}getHitDetectionImage(){return(0,V.O3)()}getPixelRatio(v){return 1}getImageState(){return(0,V.O3)()}getImageSize(){return(0,V.O3)()}getOrigin(){return(0,V.O3)()}getSize(){return(0,V.O3)()}setDisplacement(v){this.displacement_=v}setOpacity(v){this.opacity_=v}setRotateWithView(v){this.rotateWithView_=v}setRotation(v){this.rotation_=v}setScale(v){this.scale_=v,this.scaleArray_=(0,b.Pq)(v)}listenImageChange(v){(0,V.O3)()}load(){(0,V.O3)()}unlistenImageChange(v){(0,V.O3)()}}const D=N},8225:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>z});var V=m(521),b=m(6398),N=m(3783),D=m(5813),Y=m(1992),v=m(4686);class ot extends b.Z{constructor(u){super({opacity:1,rotateWithView:void 0!==u.rotateWithView&&u.rotateWithView,rotation:void 0!==u.rotation?u.rotation:0,scale:void 0!==u.scale?u.scale:1,displacement:void 0!==u.displacement?u.displacement:[0,0],declutterMode:u.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==u.fill?u.fill:null,this.origin_=[0,0],this.points_=u.points,this.radius_=void 0!==u.radius?u.radius:u.radius1,this.radius2_=u.radius2,this.angle_=void 0!==u.angle?u.angle:0,this.stroke_=void 0!==u.stroke?u.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const u=this.getScale(),p=new ot({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(u)?u.slice():u,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return p.setOpacity(this.getOpacity()),p}getAnchor(){const u=this.size_;if(!u)return null;const p=this.getDisplacement(),Z=this.getScaleArray();return[u[0]/2-p[0]/Z[0],u[1]/2+p[1]/Z[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(u){this.fill_=u,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(u){let p=this.canvas_[u];if(!p){const Z=this.renderOptions_,r=(0,Y.E4)(Z.size*u,Z.size*u);this.draw_(Z,r,u),p=r.canvas,this.canvas_[u]=p}return p}getPixelRatio(u){return u}getImageSize(){return this.size_}getImageState(){return V.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(u){this.stroke_=u,this.render()}listenImageChange(u){}load(){}unlistenImageChange(u){}calculateLineJoinSize_(u,p,Z){if(0===p||this.points_===1/0||"bevel"!==u&&"miter"!==u)return p;let r=this.radius_,x=void 0===this.radius2_?r:this.radius2_;if(r<x){const j=r;r=x,x=j}const d=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),E=x*Math.sin(d),s=r-Math.sqrt(x*x-E*E),l=Math.sqrt(E*E+s*s),n=l/E;if("miter"===u&&n<=Z)return n*p;const o=p/2/n,O=p/2*(s/l),w=Math.sqrt((r+o)*(r+o)+O*O)-r;if(void 0===this.radius2_||"bevel"===u)return 2*w;const M=r*Math.sin(d),f=x-Math.sqrt(r*r-M*M),P=Math.sqrt(M*M+f*f)/M;return P<=Z?2*Math.max(w,P*p/2-x-r):2*w}createRenderOptions(){let x,u=v.rc,p=0,Z=null,r=0,i=0;this.stroke_&&(x=this.stroke_.getColor(),null===x&&(x=v.Tx),x=(0,D.y)(x),i=this.stroke_.getWidth(),void 0===i&&(i=v.yC),Z=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),u=this.stroke_.getLineJoin(),void 0===u&&(u=v.rc),p=this.stroke_.getMiterLimit(),void 0===p&&(p=v.V4));const d=this.calculateLineJoinSize_(u,i,p),E=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:x,strokeWidth:i,size:Math.ceil(2*E+d),lineDash:Z,lineDashOffset:r,lineJoin:u,miterLimit:p}}render(){this.renderOptions_=this.createRenderOptions();const u=this.renderOptions_.size;this.canvas_={},this.size_=[u,u]}draw_(u,p,Z){if(p.scale(Z,Z),p.translate(u.size/2,u.size/2),this.createPath_(p),this.fill_){let r=this.fill_.getColor();null===r&&(r=v.bL),p.fillStyle=(0,D.y)(r),p.fill()}this.stroke_&&(p.strokeStyle=u.strokeStyle,p.lineWidth=u.strokeWidth,u.lineDash&&(p.setLineDash(u.lineDash),p.lineDashOffset=u.lineDashOffset),p.lineJoin=u.lineJoin,p.miterLimit=u.miterLimit,p.stroke())}createHitDetectionCanvas_(u){if(this.fill_){let p=this.fill_.getColor(),Z=0;if("string"==typeof p&&(p=(0,N._2)(p)),null===p?Z=1:Array.isArray(p)&&(Z=4===p.length?p[3]:1),0===Z){const r=(0,Y.E4)(u.size,u.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(u,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(u){let p=this.points_;const Z=this.radius_;if(p===1/0)u.arc(0,0,Z,0,2*Math.PI);else{const r=void 0===this.radius2_?Z:this.radius2_;void 0!==this.radius2_&&(p*=2);const x=this.angle_-Math.PI/2,i=2*Math.PI/p;for(let d=0;d<p;d++){const E=x+d*i,T=d%2==0?Z:r;u.lineTo(T*Math.cos(E),T*Math.sin(E))}u.closePath()}}drawHitDetectionCanvas_(u,p){p.translate(u.size/2,u.size/2),this.createPath_(p),p.fillStyle=v.bL,p.fill(),this.stroke_&&(p.strokeStyle=u.strokeStyle,p.lineWidth=u.strokeWidth,u.lineDash&&(p.setLineDash(u.lineDash),p.lineDashOffset=u.lineDashOffset),p.lineJoin=u.lineJoin,p.miterLimit=u.miterLimit,p.stroke())}}const z=ot},6785:(xt,nt,m)=>{"use strict";m.d(nt,{Z:()=>b});class V{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null,this.lineCap_=D.lineCap,this.lineDash_=void 0!==D.lineDash?D.lineDash:null,this.lineDashOffset_=D.lineDashOffset,this.lineJoin_=D.lineJoin,this.miterLimit_=D.miterLimit,this.width_=D.width}clone(){const D=this.getColor();return new V({color:Array.isArray(D)?D.slice():D||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(D){this.color_=D}setLineCap(D){this.lineCap_=D}setLineDash(D){this.lineDash_=D}setLineDashOffset(D){this.lineDashOffset_=D}setLineJoin(D){this.lineJoin_=D}setMiterLimit(D){this.miterLimit_=D}setWidth(D){this.width_=D}}const b=V},109:(xt,nt,m)=>{"use strict";m.d(nt,{J$:()=>v,Ly:()=>G,ZP:()=>p,yF:()=>z});var V=m(7392),b=m(5044),N=m(6785),D=m(1911);class Y{constructor(r){r=r||{},this.geometry_=null,this.geometryFunction_=u,void 0!==r.geometry&&this.setGeometry(r.geometry),this.fill_=void 0!==r.fill?r.fill:null,this.image_=void 0!==r.image?r.image:null,this.renderer_=void 0!==r.renderer?r.renderer:null,this.hitDetectionRenderer_=void 0!==r.hitDetectionRenderer?r.hitDetectionRenderer:null,this.stroke_=void 0!==r.stroke?r.stroke:null,this.text_=void 0!==r.text?r.text:null,this.zIndex_=r.zIndex}clone(){let r=this.getGeometry();return r&&"object"==typeof r&&(r=r.clone()),new Y({geometry:r,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(r){this.renderer_=r}setHitDetectionRenderer(r){this.hitDetectionRenderer_=r}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(r){this.fill_=r}getImage(){return this.image_}setImage(r){this.image_=r}getStroke(){return this.stroke_}setStroke(r){this.stroke_=r}getText(){return this.text_}setText(r){this.text_=r}getZIndex(){return this.zIndex_}setGeometry(r){"function"==typeof r?this.geometryFunction_=r:"string"==typeof r?this.geometryFunction_=function(x){return x.get(r)}:r?void 0!==r&&(this.geometryFunction_=function(){return r}):this.geometryFunction_=u,this.geometry_=r}setZIndex(r){this.zIndex_=r}}function v(Z){let r;if("function"==typeof Z)r=Z;else{let x;Array.isArray(Z)?x=Z:((0,D.h)("function"==typeof Z.getZIndex,41),x=[Z]),r=function(){return x}}return r}let ot=null;function z(Z,r){if(!ot){const x=new b.Z({color:"rgba(255,255,255,0.4)"}),i=new N.Z({color:"#3399CC",width:1.25});ot=[new Y({image:new V.Z({fill:x,stroke:i,radius:5}),fill:x,stroke:i})]}return ot}function G(){const Z={},r=[255,255,255,1],x=[0,153,255,1];return Z.Polygon=[new Y({fill:new b.Z({color:[255,255,255,.5]})})],Z.MultiPolygon=Z.Polygon,Z.LineString=[new Y({stroke:new N.Z({color:r,width:5})}),new Y({stroke:new N.Z({color:x,width:3})})],Z.MultiLineString=Z.LineString,Z.Circle=Z.Polygon.concat(Z.LineString),Z.Point=[new Y({image:new V.Z({radius:6,fill:new b.Z({color:x}),stroke:new N.Z({color:r,width:1.5})}),zIndex:1/0})],Z.MultiPoint=Z.Point,Z.GeometryCollection=Z.Polygon.concat(Z.LineString,Z.Point),Z}function u(Z){return Z.getGeometry()}const p=Y}}]);