(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[426],{5625:(yt,rt,E)=>{"use strict";E.d(rt,{H:()=>j,p:()=>Z});var N=E(2687);const Z=N.FGq,j=N.TL5},2402:function(yt){yt.exports=function(){"use strict";function rt(i,c,S,s,d){!function u(r,a,M,L,P){for(;L>M;){if(L-M>600){var w=L-M+1,k=a-M+1,m=Math.log(w),v=.5*Math.exp(2*m/3),F=.5*Math.sqrt(m*v*(w-v)/w)*(k-w/2<0?-1:1);u(r,a,Math.max(M,Math.floor(a-k*v/w+F)),Math.min(L,Math.floor(a+(w-k)*v/w+F)),P)}var ot=r[a],H=M,at=L;for(E(r,M,a),P(r[L],ot)>0&&E(r,M,L);H<at;){for(E(r,H,at),H++,at--;P(r[H],ot)<0;)H++;for(;P(r[at],ot)>0;)at--}0===P(r[M],ot)?E(r,M,at):E(r,++at,L),at<=a&&(M=at+1),a<=at&&(L=at-1)}}(i,c,S||0,s||i.length-1,d||N)}function E(i,c,S){var s=i[c];i[c]=i[S],i[S]=s}function N(i,c){return i<c?-1:i>c?1:0}var Z=function(i){void 0===i&&(i=9),this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function j(i,c,S){if(!S)return c.indexOf(i);for(var s=0;s<c.length;s++)if(S(i,c[s]))return s;return-1}function D(i,c){Y(i,0,i.children.length,c,i)}function Y(i,c,S,s,d){d||(d=n(null)),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0;for(var u=c;u<S;u++){var r=i.children[u];R(d,i.leaf?s(r):r)}return d}function R(i,c){return i.minX=Math.min(i.minX,c.minX),i.minY=Math.min(i.minY,c.minY),i.maxX=Math.max(i.maxX,c.maxX),i.maxY=Math.max(i.maxY,c.maxY),i}function ct(i,c){return i.minX-c.minX}function U(i,c){return i.minY-c.minY}function G(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function f(i){return i.maxX-i.minX+(i.maxY-i.minY)}function y(i,c){return i.minX<=c.minX&&i.minY<=c.minY&&c.maxX<=i.maxX&&c.maxY<=i.maxY}function z(i,c){return c.minX<=i.maxX&&c.minY<=i.maxY&&c.maxX>=i.minX&&c.maxY>=i.minY}function n(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(i,c,S,s,d){for(var u=[c,S];u.length;)if(!((S=u.pop())-(c=u.pop())<=s)){var r=c+Math.ceil((S-c)/s/2)*s;rt(i,r,c,S,d),u.push(c,r,r,S)}}return Z.prototype.all=function(){return this._all(this.data,[])},Z.prototype.search=function(i){var c=this.data,S=[];if(!z(i,c))return S;for(var s=this.toBBox,d=[];c;){for(var u=0;u<c.children.length;u++){var r=c.children[u],a=c.leaf?s(r):r;z(i,a)&&(c.leaf?S.push(r):y(i,a)?this._all(r,S):d.push(r))}c=d.pop()}return S},Z.prototype.collides=function(i){var c=this.data;if(!z(i,c))return!1;for(var S=[];c;){for(var s=0;s<c.children.length;s++){var d=c.children[s],u=c.leaf?this.toBBox(d):d;if(z(i,u)){if(c.leaf||y(i,u))return!0;S.push(d)}}c=S.pop()}return!1},Z.prototype.load=function(i){if(!i||!i.length)return this;if(i.length<this._minEntries){for(var c=0;c<i.length;c++)this.insert(i[c]);return this}var S=this._build(i.slice(),0,i.length-1,0);if(this.data.children.length)if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var s=this.data;this.data=S,S=s}this._insert(S,this.data.height-S.height-1,!0)}else this.data=S;return this},Z.prototype.insert=function(i){return i&&this._insert(i,this.data.height-1),this},Z.prototype.clear=function(){return this.data=n([]),this},Z.prototype.remove=function(i,c){if(!i)return this;for(var S,s,d,u=this.data,r=this.toBBox(i),a=[],M=[];u||a.length;){if(u||(u=a.pop(),s=a[a.length-1],S=M.pop(),d=!0),u.leaf){var L=j(i,u.children,c);if(-1!==L)return u.children.splice(L,1),a.push(u),this._condense(a),this}d||u.leaf||!y(u,r)?s?(S++,u=s.children[S],d=!1):u=null:(a.push(u),M.push(S),S=0,s=u,u=u.children[0])}return this},Z.prototype.toBBox=function(i){return i},Z.prototype.compareMinX=function(i,c){return i.minX-c.minX},Z.prototype.compareMinY=function(i,c){return i.minY-c.minY},Z.prototype.toJSON=function(){return this.data},Z.prototype.fromJSON=function(i){return this.data=i,this},Z.prototype._all=function(i,c){for(var S=[];i;)i.leaf?c.push.apply(c,i.children):S.push.apply(S,i.children),i=S.pop();return c},Z.prototype._build=function(i,c,S,s){var d,u=S-c+1,r=this._maxEntries;if(u<=r)return D(d=n(i.slice(c,S+1)),this.toBBox),d;s||(s=Math.ceil(Math.log(u)/Math.log(r)),r=Math.ceil(u/Math.pow(r,s-1))),(d=n([])).leaf=!1,d.height=s;var a=Math.ceil(u/r),M=a*Math.ceil(Math.sqrt(r));x(i,c,S,M,this.compareMinX);for(var L=c;L<=S;L+=M){var P=Math.min(L+M-1,S);x(i,L,P,a,this.compareMinY);for(var w=L;w<=P;w+=a){var k=Math.min(w+a-1,P);d.children.push(this._build(i,w,k,s-1))}}return D(d,this.toBBox),d},Z.prototype._chooseSubtree=function(i,c,S,s){for(;s.push(c),!c.leaf&&s.length-1!==S;){for(var d=1/0,u=1/0,r=void 0,a=0;a<c.children.length;a++){var M=c.children[a],L=G(M),P=(w=i,k=M,(Math.max(k.maxX,w.maxX)-Math.min(k.minX,w.minX))*(Math.max(k.maxY,w.maxY)-Math.min(k.minY,w.minY))-L);P<u?(u=P,d=L<d?L:d,r=M):P===u&&L<d&&(d=L,r=M)}c=r||c.children[0]}var w,k;return c},Z.prototype._insert=function(i,c,S){var s=S?i:this.toBBox(i),d=[],u=this._chooseSubtree(s,this.data,c,d);for(u.children.push(i),R(u,s);c>=0&&d[c].children.length>this._maxEntries;)this._split(d,c),c--;this._adjustParentBBoxes(s,d,c)},Z.prototype._split=function(i,c){var S=i[c],s=S.children.length,d=this._minEntries;this._chooseSplitAxis(S,d,s);var u=this._chooseSplitIndex(S,d,s),r=n(S.children.splice(u,S.children.length-u));r.height=S.height,r.leaf=S.leaf,D(S,this.toBBox),D(r,this.toBBox),c?i[c-1].children.push(r):this._splitRoot(S,r)},Z.prototype._splitRoot=function(i,c){this.data=n([i,c]),this.data.height=i.height+1,this.data.leaf=!1,D(this.data,this.toBBox)},Z.prototype._chooseSplitIndex=function(i,c,S){for(var s,d,u,r,a,M,L,P=1/0,w=1/0,k=c;k<=S-c;k++){var m=Y(i,0,k,this.toBBox),v=Y(i,k,S,this.toBBox),F=(d=m,u=v,void 0,void 0,void 0,void 0,r=Math.max(d.minX,u.minX),a=Math.max(d.minY,u.minY),M=Math.min(d.maxX,u.maxX),L=Math.min(d.maxY,u.maxY),Math.max(0,M-r)*Math.max(0,L-a)),V=G(m)+G(v);F<P?(P=F,s=k,w=V<w?V:w):F===P&&V<w&&(w=V,s=k)}return s||S-c},Z.prototype._chooseSplitAxis=function(i,c,S){var s=i.leaf?this.compareMinX:ct,d=i.leaf?this.compareMinY:U;this._allDistMargin(i,c,S,s)<this._allDistMargin(i,c,S,d)&&i.children.sort(s)},Z.prototype._allDistMargin=function(i,c,S,s){i.children.sort(s);for(var d=this.toBBox,u=Y(i,0,c,d),r=Y(i,S-c,S,d),a=f(u)+f(r),M=c;M<S-c;M++){var L=i.children[M];R(u,i.leaf?d(L):L),a+=f(u)}for(var P=S-c-1;P>=c;P--){var w=i.children[P];R(r,i.leaf?d(w):w),a+=f(r)}return a},Z.prototype._adjustParentBBoxes=function(i,c,S){for(var s=S;s>=0;s--)R(c[s],i)},Z.prototype._condense=function(i){for(var c=i.length-1,S=void 0;c>=0;c--)0===i[c].children.length?c>0?(S=i[c-1].children).splice(S.indexOf(i[c]),1):this.clear():D(i[c],this.toBBox)},Z}()},3171:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>ct});var N=E(3632),Z=E(9972),j=E(1911),D=E(1729);class Y extends N.Z{constructor(G){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),G&&("function"==typeof G.getSimplifiedGeometry?this.setGeometry(G):this.setProperties(G))}clone(){const G=new Y(this.hasProperties()?this.getProperties():null);G.setGeometryName(this.getGeometryName());const f=this.getGeometry();f&&G.setGeometry(f.clone());const y=this.getStyle();return y&&G.setStyle(y),G}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,D.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const G=this.getGeometry();G&&(this.geometryChangeKey_=(0,D.oL)(G,Z.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(G){this.set(this.geometryName_,G)}setStyle(G){this.style_=G,this.styleFunction_=G?function R(U){if("function"==typeof U)return U;let G;return Array.isArray(U)?G=U:((0,j.h)("function"==typeof U.getZIndex,41),G=[U]),function(){return G}}(G):void 0,this.changed()}setId(G){this.id_=G,this.changed()}setGeometryName(G){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=G,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const ct=Y},5813:(yt,rt,E)=>{"use strict";E.d(rt,{y:()=>Z});var N=E(3783);function Z(j){return Array.isArray(j)?(0,N.BB)(j):j}},3343:(yt,rt,E)=>{"use strict";function N(j,D,Y,R){let ct=j[D],U=j[D+1],G=0;for(let f=D+R;f<Y;f+=R){const y=j[f],z=j[f+1];G+=Math.sqrt((y-ct)*(y-ct)+(z-U)*(z-U)),ct=y,U=z}return G}E.d(rt,{W:()=>N})},6107:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>u});var N=E(4593),Z=E(2402),j=E(109),D=E(7392),Y=E(5044),R=E(9570),ct=E(8225),U=E(6785),G=E(1750);class y{constructor(a){this.font_=(a=a||{}).font,this.rotation_=a.rotation,this.rotateWithView_=a.rotateWithView,this.scale_=a.scale,this.scaleArray_=(0,G.Pq)(void 0!==a.scale?a.scale:1),this.text_=a.text,this.textAlign_=a.textAlign,this.justify_=a.justify,this.repeat_=a.repeat,this.textBaseline_=a.textBaseline,this.fill_=void 0!==a.fill?a.fill:new Y.Z({color:"#333"}),this.maxAngle_=void 0!==a.maxAngle?a.maxAngle:Math.PI/4,this.placement_=void 0!==a.placement?a.placement:"point",this.overflow_=!!a.overflow,this.stroke_=void 0!==a.stroke?a.stroke:null,this.offsetX_=void 0!==a.offsetX?a.offsetX:0,this.offsetY_=void 0!==a.offsetY?a.offsetY:0,this.backgroundFill_=a.backgroundFill?a.backgroundFill:null,this.backgroundStroke_=a.backgroundStroke?a.backgroundStroke:null,this.padding_=void 0===a.padding?null:a.padding}clone(){const a=this.getScale();return new y({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(a)?a.slice():a,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(a){this.overflow_=a}setFont(a){this.font_=a}setMaxAngle(a){this.maxAngle_=a}setOffsetX(a){this.offsetX_=a}setOffsetY(a){this.offsetY_=a}setPlacement(a){this.placement_=a}setRepeat(a){this.repeat_=a}setRotateWithView(a){this.rotateWithView_=a}setFill(a){this.fill_=a}setRotation(a){this.rotation_=a}setScale(a){this.scale_=a,this.scaleArray_=(0,G.Pq)(void 0!==a?a:1)}setStroke(a){this.stroke_=a}setText(a){this.text_=a}setTextAlign(a){this.textAlign_=a}setJustify(a){this.justify_=a}setTextBaseline(a){this.textBaseline_=a}setBackgroundFill(a){this.backgroundFill_=a}setBackgroundStroke(a){this.backgroundStroke_=a}setPadding(a){this.padding_=a}}const z=y;function n(r){return new j.ZP({fill:x(r,""),stroke:i(r,""),text:c(r),image:S(r)})}function x(r,a){const M=r[a+"fill-color"];if(M)return new Y.Z({color:M})}function i(r,a){const M=r[a+"stroke-width"],L=r[a+"stroke-color"];if(M||L)return new U.Z({width:M,color:L,lineCap:r[a+"stroke-line-cap"],lineJoin:r[a+"stroke-line-join"],lineDash:r[a+"stroke-line-dash"],lineDashOffset:r[a+"stroke-line-dash-offset"],miterLimit:r[a+"stroke-miter-limit"]})}function c(r){const a=r["text-value"];return a?new z({text:a,font:r["text-font"],maxAngle:r["text-max-angle"],offsetX:r["text-offset-x"],offsetY:r["text-offset-y"],overflow:r["text-overflow"],placement:r["text-placement"],repeat:r["text-repeat"],scale:r["text-scale"],rotateWithView:r["text-rotate-with-view"],rotation:r["text-rotation"],textAlign:r["text-align"],justify:r["text-justify"],textBaseline:r["text-baseline"],padding:r["text-padding"],fill:x(r,"text-"),backgroundFill:x(r,"text-background-"),stroke:i(r,"text-"),backgroundStroke:i(r,"text-background-")}):void 0}function S(r){const a=r["icon-src"],M=r["icon-img"];if(a||M)return new R.Z({src:a,img:M,imgSize:r["icon-img-size"],anchor:r["icon-anchor"],anchorOrigin:r["icon-anchor-origin"],anchorXUnits:r["icon-anchor-x-units"],anchorYUnits:r["icon-anchor-y-units"],color:r["icon-color"],crossOrigin:r["icon-cross-origin"],offset:r["icon-offset"],displacement:r["icon-displacement"],opacity:r["icon-opacity"],scale:r["icon-scale"],rotation:r["icon-rotation"],rotateWithView:r["icon-rotate-with-view"],size:r["icon-size"],declutterMode:r["icon-declutter-mode"]});const L=r["shape-points"];if(L){const w="shape-";return new ct.Z({points:L,fill:x(r,w),stroke:i(r,w),radius:r["shape-radius"],radius1:r["shape-radius1"],radius2:r["shape-radius2"],angle:r["shape-angle"],displacement:r["shape-displacement"],rotation:r["shape-rotation"],rotateWithView:r["shape-rotate-with-view"],scale:r["shape-scale"],declutterMode:r["shape-declutter-mode"]})}const P=r["circle-radius"];if(P){const w="circle-";return new D.Z({radius:P,fill:x(r,w),stroke:i(r,w),displacement:r["circle-displacement"],scale:r["circle-scale"],rotation:r["circle-rotation"],rotateWithView:r["circle-rotate-with-view"],declutterMode:r["circle-declutter-mode"]})}}const u=class d extends N.Z{constructor(a){a=a||{};const M=Object.assign({},a);delete M.style,delete M.renderBuffer,delete M.updateWhileAnimating,delete M.updateWhileInteracting,super(M),this.declutter_=void 0!==a.declutter&&a.declutter,this.renderBuffer_=void 0!==a.renderBuffer?a.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(a.style),this.updateWhileAnimating_=void 0!==a.updateWhileAnimating&&a.updateWhileAnimating,this.updateWhileInteracting_=void 0!==a.updateWhileInteracting&&a.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(a){return super.getFeatures(a)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(a){a.declutterTree||(a.declutterTree=new Z(9)),this.getRenderer().renderDeclutter(a)}setRenderOrder(a){this.set("renderOrder",a)}setStyle(a){let M;if(void 0===a)M=j.yF;else if(null===a)M=null;else if("function"==typeof a)M=a;else if(a instanceof j.ZP)M=a;else if(Array.isArray(a)){const L=a.length,P=new Array(L);for(let w=0;w<L;++w){const k=a[w];P[w]=k instanceof j.ZP?k:n(k)}M=P}else M=n(a);this.style_=M,this.styleFunction_=null===a?void 0:(0,j.J$)(this.style_),this.changed()}}},7639:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>Z});const Z=class N{drawCustom(D,Y,R,ct){}drawGeometry(D){}setStyle(D){}drawCircle(D,Y){}drawFeature(D,Y){}drawGeometryCollection(D,Y){}drawLineString(D,Y){}drawMultiLineString(D,Y){}drawMultiPoint(D,Y){}drawMultiPolygon(D,Y){}drawPoint(D,Y){}drawPolygon(D,Y){}drawText(D,Y){}setFillStrokeStyle(D,Y){}setImageStyle(D,Y){}setTextStyle(D,Y){}}},3620:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>y});var N=E(7639),Z=E(5813),j=E(483),D=E(4686),Y=E(2456),R=E(760),ct=E(2156),U=E(874),G=E(2774);const y=class f extends N.Z{constructor(n,x,i,c,S,s,d){super(),this.context_=n,this.pixelRatio_=x,this.extent_=i,this.transform_=c,this.transformRotation_=c?(0,ct.FH)(Math.atan2(c[1],c[0]),10):0,this.viewRotation_=S,this.squaredTolerance_=s,this.userTransform_=d,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,j.Ue)()}drawImages_(n,x,i,c){if(!this.image_)return;const S=(0,U.vT)(n,x,i,c,this.transform_,this.pixelCoordinates_),s=this.context_,d=this.tmpLocalTransform_,u=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=u*this.imageOpacity_);let r=this.imageRotation_;0===this.transformRotation_&&(r-=this.viewRotation_),this.imageRotateWithView_&&(r+=this.viewRotation_);for(let a=0,M=S.length;a<M;a+=2){const L=S[a]-this.imageAnchorX_,P=S[a+1]-this.imageAnchorY_;if(0!==r||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const w=L+this.imageAnchorX_,k=P+this.imageAnchorY_;(0,j.qC)(d,w,k,1,1,r,-w,-k),s.setTransform.apply(s,d),s.translate(w,k),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,L,P,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=u)}drawText_(n,x,i,c){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const S=(0,U.vT)(n,x,i,c,this.transform_,this.pixelCoordinates_),s=this.context_;let d=this.textRotation_;for(0===this.transformRotation_&&(d-=this.viewRotation_),this.textRotateWithView_&&(d+=this.viewRotation_);x<i;x+=c){const u=S[x]+this.textOffsetX_,r=S[x+1]+this.textOffsetY_;0!==d||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.translate(u-this.textOffsetX_,r-this.textOffsetY_),s.rotate(d),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&s.strokeText(this.text_,u,r),this.textFillState_&&s.fillText(this.text_,u,r))}}moveToLineTo_(n,x,i,c,S){const s=this.context_,d=(0,U.vT)(n,x,i,c,this.transform_,this.pixelCoordinates_);s.moveTo(d[0],d[1]);let u=d.length;S&&(u-=2);for(let r=2;r<u;r+=2)s.lineTo(d[r],d[r+1]);return S&&s.closePath(),i}drawRings_(n,x,i,c){for(let S=0,s=i.length;S<s;++S)x=this.moveToLineTo_(n,x,i[S],c,!0);return x}drawCircle(n){if((0,R.kK)(this.extent_,n.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const x=(0,G.Kr)(n,this.transform_,this.pixelCoordinates_),i=x[2]-x[0],c=x[3]-x[1],S=Math.sqrt(i*i+c*c),s=this.context_;s.beginPath(),s.arc(x[0],x[1],S,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(n.getCenter(),0,2,2)}}setStyle(n){this.setFillStrokeStyle(n.getFill(),n.getStroke()),this.setImageStyle(n.getImage()),this.setTextStyle(n.getText())}setTransform(n){this.transform_=n}drawGeometry(n){switch(n.getType()){case"Point":this.drawPoint(n);break;case"LineString":this.drawLineString(n);break;case"Polygon":this.drawPolygon(n);break;case"MultiPoint":this.drawMultiPoint(n);break;case"MultiLineString":this.drawMultiLineString(n);break;case"MultiPolygon":this.drawMultiPolygon(n);break;case"GeometryCollection":this.drawGeometryCollection(n);break;case"Circle":this.drawCircle(n)}}drawFeature(n,x){const i=x.getGeometryFunction()(n);!i||!(0,R.kK)(this.extent_,i.getExtent())||(this.setStyle(x),this.drawGeometry(i))}drawGeometryCollection(n){const x=n.getGeometriesArray();for(let i=0,c=x.length;i<c;++i)this.drawGeometry(x[i])}drawPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const x=n.getFlatCoordinates(),i=n.getStride();this.image_&&this.drawImages_(x,0,x.length,i),""!==this.text_&&this.drawText_(x,0,x.length,i)}drawMultiPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const x=n.getFlatCoordinates(),i=n.getStride();this.image_&&this.drawImages_(x,0,x.length,i),""!==this.text_&&this.drawText_(x,0,x.length,i)}drawLineString(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,n.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const x=this.context_,i=n.getFlatCoordinates();x.beginPath(),this.moveToLineTo_(i,0,i.length,n.getStride(),!1),x.stroke()}if(""!==this.text_){const x=n.getFlatMidpoint();this.drawText_(x,0,2,2)}}}drawMultiLineString(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const x=n.getExtent();if((0,R.kK)(this.extent_,x)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,c=n.getFlatCoordinates();let S=0;const s=n.getEnds(),d=n.getStride();i.beginPath();for(let u=0,r=s.length;u<r;++u)S=this.moveToLineTo_(c,S,s[u],d,!1);i.stroke()}if(""!==this.text_){const i=n.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const x=this.context_;x.beginPath(),this.drawRings_(n.getOrientedFlatCoordinates(),0,n.getEnds(),n.getStride()),this.fillState_&&x.fill(),this.strokeState_&&x.stroke()}if(""!==this.text_){const x=n.getFlatInteriorPoint();this.drawText_(x,0,2,2)}}}drawMultiPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const x=this.context_,i=n.getOrientedFlatCoordinates();let c=0;const S=n.getEndss(),s=n.getStride();x.beginPath();for(let d=0,u=S.length;d<u;++d)c=this.drawRings_(i,c,S[d],s);this.fillState_&&x.fill(),this.strokeState_&&x.stroke()}if(""!==this.text_){const x=n.getFlatInteriorPoints();this.drawText_(x,0,x.length,2)}}}setContextFillState_(n){const x=this.context_,i=this.contextFillState_;i?i.fillStyle!=n.fillStyle&&(i.fillStyle=n.fillStyle,x.fillStyle=n.fillStyle):(x.fillStyle=n.fillStyle,this.contextFillState_={fillStyle:n.fillStyle})}setContextStrokeState_(n){const x=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=n.lineCap&&(i.lineCap=n.lineCap,x.lineCap=n.lineCap),(0,Y.fS)(i.lineDash,n.lineDash)||x.setLineDash(i.lineDash=n.lineDash),i.lineDashOffset!=n.lineDashOffset&&(i.lineDashOffset=n.lineDashOffset,x.lineDashOffset=n.lineDashOffset),i.lineJoin!=n.lineJoin&&(i.lineJoin=n.lineJoin,x.lineJoin=n.lineJoin),i.lineWidth!=n.lineWidth&&(i.lineWidth=n.lineWidth,x.lineWidth=n.lineWidth),i.miterLimit!=n.miterLimit&&(i.miterLimit=n.miterLimit,x.miterLimit=n.miterLimit),i.strokeStyle!=n.strokeStyle&&(i.strokeStyle=n.strokeStyle,x.strokeStyle=n.strokeStyle)):(x.lineCap=n.lineCap,x.setLineDash(n.lineDash),x.lineDashOffset=n.lineDashOffset,x.lineJoin=n.lineJoin,x.lineWidth=n.lineWidth,x.miterLimit=n.miterLimit,x.strokeStyle=n.strokeStyle,this.contextStrokeState_={lineCap:n.lineCap,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset,lineJoin:n.lineJoin,lineWidth:n.lineWidth,miterLimit:n.miterLimit,strokeStyle:n.strokeStyle})}setContextTextState_(n){const x=this.context_,i=this.contextTextState_,c=n.textAlign?n.textAlign:D.PH;i?(i.font!=n.font&&(i.font=n.font,x.font=n.font),i.textAlign!=c&&(i.textAlign=c,x.textAlign=c),i.textBaseline!=n.textBaseline&&(i.textBaseline=n.textBaseline,x.textBaseline=n.textBaseline)):(x.font=n.font,x.textAlign=c,x.textBaseline=n.textBaseline,this.contextTextState_={font:n.font,textAlign:c,textBaseline:n.textBaseline})}setFillStrokeStyle(n,x){if(n){const i=n.getColor();this.fillState_={fillStyle:(0,Z.y)(i||D.bL)}}else this.fillState_=null;if(x){const i=x.getColor(),c=x.getLineCap(),S=x.getLineDash(),s=x.getLineDashOffset(),d=x.getLineJoin(),u=x.getWidth(),r=x.getMiterLimit(),a=S||D.X9;this.strokeState_={lineCap:void 0!==c?c:D.mb,lineDash:1===this.pixelRatio_?a:a.map(M=>M*this.pixelRatio_),lineDashOffset:(s||D.He)*this.pixelRatio_,lineJoin:void 0!==d?d:D.rc,lineWidth:(void 0!==u?u:D.yC)*this.pixelRatio_,miterLimit:void 0!==r?r:D.V4,strokeStyle:(0,Z.y)(i||D.Tx)}}else this.strokeState_=null}setImageStyle(n){let x;if(!n||!(x=n.getSize()))return void(this.image_=null);const i=n.getPixelRatio(this.pixelRatio_),c=n.getAnchor(),S=n.getOrigin();this.image_=n.getImage(this.pixelRatio_),this.imageAnchorX_=c[0]*i,this.imageAnchorY_=c[1]*i,this.imageHeight_=x[1]*i,this.imageOpacity_=n.getOpacity(),this.imageOriginX_=S[0],this.imageOriginY_=S[1],this.imageRotateWithView_=n.getRotateWithView(),this.imageRotation_=n.getRotation();const s=n.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=x[0]*i}setTextStyle(n){if(n){const x=n.getFill();if(x){const P=x.getColor();this.textFillState_={fillStyle:(0,Z.y)(P||D.bL)}}else this.textFillState_=null;const i=n.getStroke();if(i){const P=i.getColor(),w=i.getLineCap(),k=i.getLineDash(),m=i.getLineDashOffset(),v=i.getLineJoin(),F=i.getWidth(),V=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==w?w:D.mb,lineDash:k||D.X9,lineDashOffset:m||D.He,lineJoin:void 0!==v?v:D.rc,lineWidth:void 0!==F?F:D.yC,miterLimit:void 0!==V?V:D.V4,strokeStyle:(0,Z.y)(P||D.Tx)}}else this.textStrokeState_=null;const c=n.getFont(),S=n.getOffsetX(),s=n.getOffsetY(),d=n.getRotateWithView(),u=n.getRotation(),r=n.getScaleArray(),a=n.getText(),M=n.getTextAlign(),L=n.getTextBaseline();this.textState_={font:void 0!==c?c:D.Df,textAlign:void 0!==M?M:D.PH,textBaseline:void 0!==L?L:D.ru},this.text_=void 0!==a?Array.isArray(a)?a.reduce((P,w,k)=>P+(k%2?" ":w),""):a:"",this.textOffsetX_=void 0!==S?this.pixelRatio_*S:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==u?u:0,this.textScale_=[this.pixelRatio_*r[0],this.pixelRatio_*r[1]]}else this.text_=""}}},5695:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>Xe});const N={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Z=[N.FILL],j=[N.STROKE],D=[N.BEGIN_PATH],Y=[N.CLOSE_PATH],R=N;var ct=E(2401),U=E(7639),G=E(5813),f=E(760),y=E(4686),z=E(2456),n=E(392);const i=class x extends U.Z{constructor(t,o,e,h){super(),this.tolerance=t,this.maxExtent=o,this.pixelRatio=h,this.maxLineWidth=0,this.resolution=e,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const o=this.pixelRatio;return 1==o?t:t.map(function(e){return e*o})}appendFlatPointCoordinates(t,o){const e=this.getBufferedMaxExtent(),h=this.tmpCoordinate_,l=this.coordinates;let _=l.length;for(let g=0,p=t.length;g<p;g+=o)h[0]=t[g],h[1]=t[g+1],(0,f.b8)(e,h)&&(l[_++]=h[0],l[_++]=h[1]);return _}appendFlatLineCoordinates(t,o,e,h,l,_){const g=this.coordinates;let p=g.length;const I=this.getBufferedMaxExtent();_&&(o+=h);let C=t[o],O=t[o+1];const T=this.tmpCoordinate_;let B,X,A,W=!0;for(B=o+h;B<e;B+=h)T[0]=t[B],T[1]=t[B+1],A=(0,f.pX)(I,T),A!==X?(W&&(g[p++]=C,g[p++]=O,W=!1),g[p++]=T[0],g[p++]=T[1]):A===ct.Z.INTERSECTING?(g[p++]=T[0],g[p++]=T[1],W=!1):W=!0,C=T[0],O=T[1],X=A;return(l&&W||B===o+h)&&(g[p++]=C,g[p++]=O),p}drawCustomCoordinates_(t,o,e,h,l){for(let _=0,g=e.length;_<g;++_){const p=e[_],I=this.appendFlatLineCoordinates(t,o,p,h,!1,!1);l.push(I),o=p}return o}drawCustom(t,o,e,h){this.beginGeometry(t,o);const l=t.getType(),_=t.getStride(),g=this.coordinates.length;let p,I,C,O,T;switch(l){case"MultiPolygon":p=t.getOrientedFlatCoordinates(),O=[];const W=t.getEndss();T=0;for(let B=0,X=W.length;B<X;++B){const A=[];T=this.drawCustomCoordinates_(p,T,W[B],_,A),O.push(A)}this.instructions.push([R.CUSTOM,g,O,t,e,n.ug]),this.hitDetectionInstructions.push([R.CUSTOM,g,O,t,h||e,n.ug]);break;case"Polygon":case"MultiLineString":C=[],p="Polygon"==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),T=this.drawCustomCoordinates_(p,0,t.getEnds(),_,C),this.instructions.push([R.CUSTOM,g,C,t,e,n.o1]),this.hitDetectionInstructions.push([R.CUSTOM,g,C,t,h||e,n.o1]);break;case"LineString":case"Circle":p=t.getFlatCoordinates(),I=this.appendFlatLineCoordinates(p,0,p.length,_,!1,!1),this.instructions.push([R.CUSTOM,g,I,t,e,n.Ml]),this.hitDetectionInstructions.push([R.CUSTOM,g,I,t,h||e,n.Ml]);break;case"MultiPoint":p=t.getFlatCoordinates(),I=this.appendFlatPointCoordinates(p,_),I>g&&(this.instructions.push([R.CUSTOM,g,I,t,e,n.Ml]),this.hitDetectionInstructions.push([R.CUSTOM,g,I,t,h||e,n.Ml]));break;case"Point":p=t.getFlatCoordinates(),this.coordinates.push(p[0],p[1]),I=this.coordinates.length,this.instructions.push([R.CUSTOM,g,I,t,e]),this.hitDetectionInstructions.push([R.CUSTOM,g,I,t,h||e])}this.endGeometry(o)}beginGeometry(t,o){this.beginGeometryInstruction1_=[R.BEGIN_GEOMETRY,o,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[R.BEGIN_GEOMETRY,o,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let o;t.reverse();const e=t.length;let h,l,_=-1;for(o=0;o<e;++o)h=t[o],l=h[0],l==R.END_GEOMETRY?_=o:l==R.BEGIN_GEOMETRY&&(h[2]=o,(0,z.FZ)(this.hitDetectionInstructions,_,o),_=-1)}setFillStrokeStyle(t,o){const e=this.state;if(t){const h=t.getColor();e.fillStyle=(0,G.y)(h||y.bL)}else e.fillStyle=void 0;if(o){const h=o.getColor();e.strokeStyle=(0,G.y)(h||y.Tx);const l=o.getLineCap();e.lineCap=void 0!==l?l:y.mb;const _=o.getLineDash();e.lineDash=_?_.slice():y.X9;const g=o.getLineDashOffset();e.lineDashOffset=g||y.He;const p=o.getLineJoin();e.lineJoin=void 0!==p?p:y.rc;const I=o.getWidth();e.lineWidth=void 0!==I?I:y.yC;const C=o.getMiterLimit();e.miterLimit=void 0!==C?C:y.V4,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0}createFill(t){const o=t.fillStyle,e=[R.SET_FILL_STYLE,o];return"string"!=typeof o&&e.push(!0),e}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[R.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,o){const e=t.fillStyle;("string"!=typeof e||t.currentFillStyle!=e)&&(void 0!==e&&this.instructions.push(o.call(this,t)),t.currentFillStyle=e)}updateStrokeStyle(t,o){const e=t.strokeStyle,h=t.lineCap,l=t.lineDash,_=t.lineDashOffset,g=t.lineJoin,p=t.lineWidth,I=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=h||l!=t.currentLineDash&&!(0,z.fS)(t.currentLineDash,l)||t.currentLineDashOffset!=_||t.currentLineJoin!=g||t.currentLineWidth!=p||t.currentMiterLimit!=I)&&(void 0!==e&&o.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=h,t.currentLineDash=l,t.currentLineDashOffset=_,t.currentLineJoin=g,t.currentLineWidth=p,t.currentMiterLimit=I)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const o=[R.END_GEOMETRY,t];this.instructions.push(o),this.hitDetectionInstructions.push(o)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,f.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,f.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var u=E(9182);const a=class r extends i{constructor(t,o,e,h){super(t,o,e,h)}drawFlatCoordinatess_(t,o,e,h){const l=this.state,_=void 0!==l.fillStyle,g=void 0!==l.strokeStyle,p=e.length;this.instructions.push(D),this.hitDetectionInstructions.push(D);for(let I=0;I<p;++I){const C=e[I],O=this.coordinates.length,T=this.appendFlatLineCoordinates(t,o,C,h,!0,!g),W=[R.MOVE_TO_LINE_TO,O,T];this.instructions.push(W),this.hitDetectionInstructions.push(W),g&&(this.instructions.push(Y),this.hitDetectionInstructions.push(Y)),o=C}return _&&(this.instructions.push(Z),this.hitDetectionInstructions.push(Z)),g&&(this.instructions.push(j),this.hitDetectionInstructions.push(j)),o}drawCircle(t,o){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,o),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,y.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const _=t.getFlatCoordinates(),g=t.getStride(),p=this.coordinates.length;this.appendFlatLineCoordinates(_,0,_.length,g,!1,!1);const I=[R.CIRCLE,p];this.instructions.push(D,I),this.hitDetectionInstructions.push(D,I),void 0!==e.fillStyle&&(this.instructions.push(Z),this.hitDetectionInstructions.push(Z)),void 0!==e.strokeStyle&&(this.instructions.push(j),this.hitDetectionInstructions.push(j)),this.endGeometry(o)}drawPolygon(t,o){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,o),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,y.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const _=t.getEnds(),g=t.getOrientedFlatCoordinates(),p=t.getStride();this.drawFlatCoordinatess_(g,0,_,p),this.endGeometry(o)}drawMultiPolygon(t,o){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,o),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,y.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const _=t.getEndss(),g=t.getOrientedFlatCoordinates(),p=t.getStride();let I=0;for(let C=0,O=_.length;C<O;++C)I=this.drawFlatCoordinatess_(g,I,_[C],p);this.endGeometry(o)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const o=this.coordinates;for(let e=0,h=o.length;e<h;++e)o[e]=(0,u.uZ)(o[e],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var M=E(119),L=E(2156);function P($,t,o,e,h){const l=[];let _=o,g=0,p=t.slice(o,2);for(;g<$&&_+h<e;){const[I,C]=p.slice(-2),O=t[_+h],T=t[_+h+1],W=Math.sqrt((O-I)*(O-I)+(T-C)*(T-C));if(g+=W,g>=$){const B=($-g+W)/W,X=(0,L.t7)(I,O,B),A=(0,L.t7)(C,T,B);p.push(X,A),l.push(p),p=[X,A],g==$&&(_+=h),g=0}else if(g<$)p.push(t[_+h],t[_+h+1]),_+=h;else{const B=W-g,X=(0,L.t7)(I,O,B/W),A=(0,L.t7)(C,T,B/W);p.push(X,A),l.push(p),p=[X,A],g=0,_+=h}}return g>0&&l.push(p),l}function w($,t,o,e,h){let C,O,T,W,B,X,A,b,J,Q,l=o,_=o,g=0,p=0,I=o;for(O=o;O<e;O+=h){const tt=t[O],q=t[O+1];void 0!==B&&(J=tt-B,Q=q-X,W=Math.sqrt(J*J+Q*Q),void 0!==A&&(p+=T,C=Math.acos((A*J+b*Q)/(T*W)),C>$&&(p>g&&(g=p,l=I,_=O),p=0,I=O-h)),T=W,A=J,b=Q),B=tt,X=q}return p+=W,p>g?[I,O]:[l,_]}const k={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},F={Circle:a,Default:i,Image:class c extends i{constructor(t,o,e,h){super(t,o,e,h),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,o){if(!this.image_)return;this.beginGeometry(t,o);const e=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length,_=this.appendFlatPointCoordinates(e,h);this.instructions.push([R.DRAW_IMAGE,l,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([R.DRAW_IMAGE,l,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(o)}drawMultiPoint(t,o){if(!this.image_)return;this.beginGeometry(t,o);const e=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length,_=this.appendFlatPointCoordinates(e,h);this.instructions.push([R.DRAW_IMAGE,l,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([R.DRAW_IMAGE,l,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(o)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,o){const e=t.getAnchor(),h=t.getSize(),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=h[1],this.opacity_=t.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=h[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=o}},LineString:class s extends i{constructor(t,o,e,h){super(t,o,e,h)}drawFlatCoordinates_(t,o,e,h){const l=this.coordinates.length,_=this.appendFlatLineCoordinates(t,o,e,h,!1,!1),g=[R.MOVE_TO_LINE_TO,l,_];return this.instructions.push(g),this.hitDetectionInstructions.push(g),e}drawLineString(t,o){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,o),this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,y.X9,y.He],D);const _=t.getFlatCoordinates(),g=t.getStride();this.drawFlatCoordinates_(_,0,_.length,g),this.hitDetectionInstructions.push(j),this.endGeometry(o)}drawMultiLineString(t,o){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,o),this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],D);const _=t.getEnds(),g=t.getFlatCoordinates(),p=t.getStride();let I=0;for(let C=0,O=_.length;C<O;++C)I=this.drawFlatCoordinates_(g,I,_[C],p);this.hitDetectionInstructions.push(j),this.endGeometry(o)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(j),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(j),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(D)}},Polygon:a,Text:class m extends i{constructor(t,o,e,h){super(t,o,e,h),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,o){const l=this.textState_;if(""===this.text_||!l||!this.textFillState_&&!this.textStrokeState_)return;const _=this.coordinates;let g=_.length;const p=t.getType();let I=null,C=t.getStride();if("line"!==l.placement||"LineString"!=p&&"MultiLineString"!=p&&"Polygon"!=p&&"MultiPolygon"!=p){let O=l.overflow?null:[];switch(p){case"Point":case"MultiPoint":I=t.getFlatCoordinates();break;case"LineString":I=t.getFlatMidpoint();break;case"Circle":I=t.getCenter();break;case"MultiLineString":I=t.getFlatMidpoints(),C=2;break;case"Polygon":I=t.getFlatInteriorPoint(),l.overflow||O.push(I[2]/this.resolution),C=3;break;case"MultiPolygon":const A=t.getFlatInteriorPoints();I=[];for(let b=0,J=A.length;b<J;b+=3)l.overflow||O.push(A[b+2]/this.resolution),I.push(A[b],A[b+1]);if(0===I.length)return;C=2}const T=this.appendFlatPointCoordinates(I,C);if(T===g)return;if(O&&(T-g)/2!=I.length/C){let A=g/2;O=O.filter((b,J)=>{const Q=_[2*(A+J)]===I[J*C]&&_[2*(A+J)+1]===I[J*C+1];return Q||--A,Q})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,o);let W=l.padding;if(W!=y.oB&&(l.scale[0]<0||l.scale[1]<0)){let A=l.padding[0],b=l.padding[1],J=l.padding[2],Q=l.padding[3];l.scale[0]<0&&(b=-b,Q=-Q),l.scale[1]<0&&(A=-A,J=-J),W=[A,b,J,Q]}const B=this.pixelRatio;this.instructions.push([R.DRAW_IMAGE,g,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,W==y.oB?y.oB:W.map(function(A){return A*B}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]);const X=1/B;this.hitDetectionInstructions.push([R.DRAW_IMAGE,g,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[X,X],NaN,void 0,this.declutterImageWithText_,W,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]),this.endGeometry(o)}else{if(!(0,f.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let O;if(I=t.getFlatCoordinates(),"LineString"==p)O=[I.length];else if("MultiLineString"==p)O=t.getEnds();else if("Polygon"==p)O=t.getEnds().slice(0,1);else if("MultiPolygon"==p){const X=t.getEndss();O=[];for(let A=0,b=X.length;A<b;++A)O.push(X[A][0])}this.beginGeometry(t,o);const T=l.repeat,W=T?void 0:l.textAlign;let B=0;for(let X=0,A=O.length;X<A;++X){let b;b=T?P(T*this.resolution,I,B,O[X],C):[I.slice(B,O[X])];for(let J=0,Q=b.length;J<Q;++J){const tt=b[J];let q=0,ht=tt.length;if(null==W){const nt=w(l.maxAngle,tt,0,tt.length,2);q=nt[0],ht=nt[1]}for(let nt=q;nt<ht;nt+=C)_.push(tt[nt],tt[nt+1]);const dt=_.length;B=O[X],this.drawChars_(g,dt),g=dt}}this.endGeometry(o)}}saveTextStates_(){const t=this.textStrokeState_,o=this.textState_,e=this.textFillState_,h=this.strokeKey_;t&&(h in this.strokeStates||(this.strokeStates[h]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:o.font,textAlign:o.textAlign||y.PH,justify:o.justify,textBaseline:o.textBaseline||y.ru,scale:o.scale});const _=this.fillKey_;e&&(_ in this.fillStates||(this.fillStates[_]={fillStyle:e.fillStyle}))}drawChars_(t,o){const e=this.textStrokeState_,h=this.textState_,l=this.strokeKey_,_=this.textKey_,g=this.fillKey_;this.saveTextStates_();const p=this.pixelRatio,I=k[h.textBaseline],C=this.textOffsetY_*p,O=this.text_,T=e?e.lineWidth*Math.abs(h.scale[0])/2:0;this.instructions.push([R.DRAW_CHARS,t,o,I,h.overflow,g,h.maxAngle,p,C,l,T*p,O,_,1]),this.hitDetectionInstructions.push([R.DRAW_CHARS,t,o,I,h.overflow,g,h.maxAngle,1,C,l,T,O,_,1/p])}setTextStyle(t,o){let e,h,l;if(t){const _=t.getFill();_?(h=this.textFillState_,h||(h={},this.textFillState_=h),h.fillStyle=(0,G.y)(_.getColor()||y.bL)):(h=null,this.textFillState_=h);const g=t.getStroke();if(g){l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const B=g.getLineDash(),X=g.getLineDashOffset(),A=g.getWidth(),b=g.getMiterLimit();l.lineCap=g.getLineCap()||y.mb,l.lineDash=B?B.slice():y.X9,l.lineDashOffset=void 0===X?y.He:X,l.lineJoin=g.getLineJoin()||y.rc,l.lineWidth=void 0===A?y.yC:A,l.miterLimit=void 0===b?y.V4:b,l.strokeStyle=(0,G.y)(g.getColor()||y.Tx)}else l=null,this.textStrokeState_=l;e=this.textState_;const p=t.getFont()||y.Df;(0,y.Qx)(p);const I=t.getScaleArray();e.overflow=t.getOverflow(),e.font=p,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.repeat=t.getRepeat(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||y.ru,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||y.oB,e.scale=void 0===I?[1,1]:I;const C=t.getOffsetX(),O=t.getOffsetY(),T=t.getRotateWithView(),W=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===C?0:C,this.textOffsetY_=void 0===O?0:O,this.textRotateWithView_=void 0!==T&&T,this.textRotation_=void 0===W?0:W,this.strokeKey_=l?("string"==typeof l.strokeStyle?l.strokeStyle:(0,M.sq)(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.repeat||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=h?"string"==typeof h.fillStyle?h.fillStyle:"|"+(0,M.sq)(h.fillStyle):""}else this.text_="";this.declutterImageWithText_=o}}},st=class V{constructor(t,o,e,h){this.tolerance_=t,this.maxExtent_=o,this.pixelRatio_=h,this.resolution_=e,this.buildersByZIndex_={}}finish(){const t={};for(const o in this.buildersByZIndex_){t[o]=t[o]||{};const e=this.buildersByZIndex_[o];for(const h in e){const l=e[h].finish();t[o][h]=l}}return t}getBuilder(t,o){const e=void 0!==t?t.toString():"0";let h=this.buildersByZIndex_[e];void 0===h&&(h={},this.buildersByZIndex_[e]=h);let l=h[o];return void 0===l&&(l=new(0,F[o])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),h[o]=l),l}};var ot=E(2121),H=E(483),at=E(874);function It($,t,o,e,h,l,_,g,p,I,C,O){let T=$[t],W=$[t+1],B=0,X=0,A=0,b=0;function J(){B=T,X=W,T=$[t+=e],W=$[t+1],b+=A,A=Math.sqrt((T-B)*(T-B)+(W-X)*(W-X))}do{J()}while(t<o-e&&b+A<l);let Q=0===A?0:(l-b)/A;const tt=(0,L.t7)(B,T,Q),q=(0,L.t7)(X,W,Q),ht=t-e,dt=b,nt=l+g*p(I,h,C);for(;t<o-e&&b+A<nt;)J();Q=0===A?0:(nt-b)/A;const ut=(0,L.t7)(B,T,Q),gt=(0,L.t7)(X,W,Q);let pt;if(O){const et=[tt,q,ut,gt];(0,at.U1)(et,0,4,2,O,et,et),pt=et[0]>et[2]}else pt=tt>ut;const mt=Math.PI,ft=[],Tt=ht+e===t;let _t;if(A=0,b=dt,T=$[t=ht],W=$[t+1],Tt)return J(),_t=Math.atan2(W-X,T-B),pt&&(_t+=_t>0?-mt:mt),ft[0]=[(ut+tt)/2,(gt+q)/2,(nt-l)/2,_t,h],ft;for(let et=0,lt=(h=h.replace(/\n/g," ")).length;et<lt;){J();let it=Math.atan2(W-X,T-B);if(pt&&(it+=it>0?-mt:mt),void 0!==_t){let At=it-_t;if(At+=At>mt?-2*mt:At<-mt?2*mt:0,Math.abs(At)>_)return null}_t=it;const xt=et;let Et=0;for(;et<lt;++et){const Yt=g*p(I,h[pt?lt-et-1:et],C);if(t+e<o&&b+A<l+Et+Yt/2)break;Et+=Yt}if(et===xt)continue;const wt=pt?h.substring(lt-xt,lt-et):h.substring(xt,et);Q=0===A?0:(l+Et/2-b)/A;const K=(0,L.t7)(B,T,Q),fe=(0,L.t7)(X,W,Q);ft.push([K,fe,Et/2,it,wt]),l+=Et}return ft}var St=E(3343);const Bt=(0,f.lJ)(),Rt=[],kt=[],Ft=[],bt=[];function ce($){return $[3].declutterBox}const ve=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function de($,t){return("start"===t||"end"===t)&&!ve.test($)&&(t="start"===t?"left":"right"),k[t]}function Oe($,t,o){return o>0&&$.push("\n",""),$.push(t,""),$}const Me=class Le{constructor(t,o,e,h){this.overlaps=e,this.pixelRatio=o,this.resolution=t,this.instructions=h.instructions,this.coordinates=h.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,H.Ue)(),this.hitDetectionInstructions=h.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=h.fillStates||{},this.strokeStates=h.strokeStates||{},this.textStates=h.textStates||{},this.widths_={},this.labels_={}}createLabel(t,o,e,h){const l=t+o+e+h;if(this.labels_[l])return this.labels_[l];const _=h?this.strokeStates[h]:null,g=e?this.fillStates[e]:null,p=this.textStates[o],I=this.pixelRatio,C=[p.scale[0]*I,p.scale[1]*I],O=Array.isArray(t),T=p.justify?k[p.justify]:de(Array.isArray(t)?t[0]:t,p.textAlign||y.PH),W=h&&_.lineWidth?_.lineWidth:0,B=O?t:t.split("\n").reduce(Oe,[]),{width:X,height:A,widths:b,heights:J,lineWidths:Q}=(0,y.Zw)(p,B),tt=X+W,q=[],ht=(tt+2)*C[0],dt=(A+W)*C[1],nt={width:ht<0?Math.floor(ht):Math.ceil(ht),height:dt<0?Math.floor(dt):Math.ceil(dt),contextInstructions:q};(1!=C[0]||1!=C[1])&&q.push("scale",C),h&&(q.push("strokeStyle",_.strokeStyle),q.push("lineWidth",W),q.push("lineCap",_.lineCap),q.push("lineJoin",_.lineJoin),q.push("miterLimit",_.miterLimit),q.push("setLineDash",[_.lineDash]),q.push("lineDashOffset",_.lineDashOffset)),e&&q.push("fillStyle",g.fillStyle),q.push("textBaseline","middle"),q.push("textAlign","center");const ut=.5-T;let gt=T*tt+ut*W;const pt=[],mt=[];let lt,ft=0,Tt=0,_t=0,et=0;for(let it=0,xt=B.length;it<xt;it+=2){const Et=B[it];if("\n"===Et){Tt+=ft,ft=0,gt=T*tt+ut*W,++et;continue}const wt=B[it+1]||p.font;wt!==lt&&(h&&pt.push("font",wt),e&&mt.push("font",wt),lt=wt),ft=Math.max(ft,J[_t]);const K=[Et,gt+ut*b[_t]+T*(b[_t]-Q[et]),.5*(W+ft)+Tt];gt+=b[_t],h&&pt.push("strokeText",K),e&&mt.push("fillText",K),++_t}return Array.prototype.push.apply(q,pt),Array.prototype.push.apply(q,mt),this.labels_[l]=nt,nt}replayTextBackground_(t,o,e,h,l,_,g){t.beginPath(),t.moveTo.apply(t,o),t.lineTo.apply(t,e),t.lineTo.apply(t,h),t.lineTo.apply(t,l),t.lineTo.apply(t,o),_&&(this.alignFill_=_[2],this.fill_(t)),g&&(this.setStrokeStyle_(t,g),t.stroke())}calculateImageOrLabelDimensions_(t,o,e,h,l,_,g,p,I,C,O,T,W,B,X,A){let b=e-(g*=T[0]),J=h-(p*=T[1]);const Q=l+I>t?t-I:l,tt=_+C>o?o-C:_,q=B[3]+Q*T[0]+B[1],ht=B[0]+tt*T[1]+B[2],dt=b-B[3],nt=J-B[0];let ut;return(X||0!==O)&&(Rt[0]=dt,bt[0]=dt,Rt[1]=nt,kt[1]=nt,kt[0]=dt+q,Ft[0]=kt[0],Ft[1]=nt+ht,bt[1]=Ft[1]),0!==O?(ut=(0,H.qC)((0,H.Ue)(),e,h,1,1,O,-e,-h),(0,H.nn)(ut,Rt),(0,H.nn)(ut,kt),(0,H.nn)(ut,Ft),(0,H.nn)(ut,bt),(0,f.T9)(Math.min(Rt[0],kt[0],Ft[0],bt[0]),Math.min(Rt[1],kt[1],Ft[1],bt[1]),Math.max(Rt[0],kt[0],Ft[0],bt[0]),Math.max(Rt[1],kt[1],Ft[1],bt[1]),Bt)):(0,f.T9)(Math.min(dt,dt+q),Math.min(nt,nt+ht),Math.max(dt,dt+q),Math.max(nt,nt+ht),Bt),W&&(b=Math.round(b),J=Math.round(J)),{drawImageX:b,drawImageY:J,drawImageW:Q,drawImageH:tt,originX:I,originY:C,declutterBox:{minX:Bt[0],minY:Bt[1],maxX:Bt[2],maxY:Bt[3],value:A},canvasTransform:ut,scale:T}}replayImageOrLabel_(t,o,e,h,l,_,g){const I=h.declutterBox,C=t.canvas,O=g?g[2]*h.scale[0]/2:0;return I.minX-O<=C.width/o&&I.maxX+O>=0&&I.minY-O<=C.height/o&&I.maxY+O>=0&&(!(!_&&!g)&&this.replayTextBackground_(t,Rt,kt,Ft,bt,_,g),(0,y._f)(t,h.canvasTransform,l,e,h.originX,h.originY,h.drawImageW,h.drawImageH,h.drawImageX,h.drawImageY,h.scale)),!0}fill_(t){if(this.alignFill_){const o=(0,H.nn)(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(o[0]%e,o[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,o){t.strokeStyle=o[1],t.lineWidth=o[2],t.lineCap=o[3],t.lineJoin=o[4],t.miterLimit=o[5],t.lineDashOffset=o[7],t.setLineDash(o[6])}drawLabelWithPointPlacement_(t,o,e,h){const l=this.textStates[o],_=this.createLabel(t,o,h,e),g=this.strokeStates[e],p=this.pixelRatio,I=de(Array.isArray(t)?t[0]:t,l.textAlign||y.PH),C=k[l.textBaseline||y.ru],O=g&&g.lineWidth?g.lineWidth:0;return{label:_,anchorX:I*(_.width/p-2*l.scale[0])+2*(.5-I)*O,anchorY:C*_.height/p+2*(.5-C)*O}}execute_(t,o,e,h,l,_,g,p){let I;this.pixelCoordinates_&&(0,z.fS)(e,this.renderedTransform_)?I=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),I=(0,at.vT)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,H.lk)(this.renderedTransform_,e));let C=0;const O=h.length;let W,B,X,A,b,J,Q,tt,q,ht,dt,nt,T=0,ut=0,gt=0,pt=null,mt=null;const ft=this.coordinateCache_,Tt=this.viewRotation_,_t=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,et={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Tt},lt=this.instructions!=h||this.overlaps?0:200;let it,xt,Et,wt;for(;C<O;){const K=h[C];switch(K[0]){case R.BEGIN_GEOMETRY:it=K[1],wt=K[3],it.getGeometry()?void 0===g||(0,f.kK)(g,wt.getExtent())?++C:C=K[2]+1:C=K[2];break;case R.BEGIN_PATH:ut>lt&&(this.fill_(t),ut=0),gt>lt&&(t.stroke(),gt=0),!ut&&!gt&&(t.beginPath(),A=NaN,b=NaN),++C;break;case R.CIRCLE:T=K[1];const At=I[T],Yt=I[T+1],ge=I[T+2]-At,_e=I[T+3]-Yt,me=Math.sqrt(ge*ge+_e*_e);t.moveTo(At+me,Yt),t.arc(At,Yt,me,0,2*Math.PI,!0),++C;break;case R.CLOSE_PATH:t.closePath(),++C;break;case R.CUSTOM:T=K[1],W=K[2];const Ue=K[4],xe=6==K.length?K[5]:void 0;et.geometry=K[3],et.feature=it,C in ft||(ft[C]=[]);const Ut=ft[C];xe?xe(I,T,W,2,Ut):(Ut[0]=I[T],Ut[1]=I[T+1],Ut.length=2),Ue(Ut,et),++C;break;case R.DRAW_IMAGE:T=K[1],W=K[2],tt=K[3],B=K[4],X=K[5];let ne=K[6];const Ke=K[7],Ne=K[8],Ve=K[9],pe=K[10];let se=K[11];const je=K[12];let Jt=K[13];const ye=K[14],Kt=K[15];if(!tt&&K.length>=20){q=K[19],ht=K[20],dt=K[21],nt=K[22];const Dt=this.drawLabelWithPointPlacement_(q,ht,dt,nt);tt=Dt.label,K[3]=tt,B=(Dt.anchorX-K[23])*this.pixelRatio,K[4]=B,X=(Dt.anchorY-K[24])*this.pixelRatio,K[5]=X,ne=tt.height,K[6]=ne,Jt=tt.width,K[13]=Jt}let re,oe,Qt,$t;K.length>25&&(re=K[25]),K.length>17?(oe=K[16],Qt=K[17],$t=K[18]):(oe=y.oB,Qt=!1,$t=!1),pe&&_t?se+=Tt:!pe&&!_t&&(se-=Tt);let He=0;for(;T<W;T+=2){if(re&&re[He++]<Jt/this.pixelRatio)continue;const Dt=this.calculateImageOrLabelDimensions_(tt.width,tt.height,I[T],I[T+1],Jt,ne,B,X,Ne,Ve,se,je,l,oe,Qt||$t,it),Zt=[t,o,tt,Dt,Ke,Qt?pt:null,$t?mt:null];if(p){if("none"===ye)continue;if("obstacle"===ye){p.insert(Dt.declutterBox);continue}{let Ot,Pt;if(Kt){const vt=W-T;if(!Kt[vt]){Kt[vt]=Zt;continue}if(Ot=Kt[vt],delete Kt[vt],Pt=ce(Ot),p.collides(Pt))continue}if(p.collides(Dt.declutterBox))continue;Ot&&(p.insert(Pt),this.replayImageOrLabel_.apply(this,Ot)),p.insert(Dt.declutterBox)}}this.replayImageOrLabel_.apply(this,Zt)}++C;break;case R.DRAW_CHARS:const Se=K[1],Ee=K[2],ae=K[3],Je=K[4];nt=K[5];const Qe=K[6],Ie=K[7],Ce=K[8];dt=K[9];const he=K[10];q=K[11],ht=K[12];const Re=[K[13],K[13]],le=this.textStates[ht],Nt=le.font,Vt=[le.scale[0]*Ie,le.scale[1]*Ie];let jt;Nt in this.widths_?jt=this.widths_[Nt]:(jt={},this.widths_[Nt]=jt);const Te=(0,St.W)(I,Se,Ee,2),De=Math.abs(Vt[0])*(0,y.Kd)(Nt,q,jt);if(Je||De<=Te){const Ot=It(I,Se,Ee,2,q,(Te-De)*k[this.textStates[ht].textAlign],Qe,Math.abs(Vt[0]),y.Kd,Nt,jt,_t?0:this.viewRotation_);t:if(Ot){const Pt=[];let vt,qt,te,Ct,Lt;if(dt)for(vt=0,qt=Ot.length;vt<qt;++vt){Lt=Ot[vt],te=Lt[4],Ct=this.createLabel(te,ht,"",dt),B=Lt[2]+(Vt[0]<0?-he:he),X=ae*Ct.height+2*(.5-ae)*he*Vt[1]/Vt[0]-Ce;const Wt=this.calculateImageOrLabelDimensions_(Ct.width,Ct.height,Lt[0],Lt[1],Ct.width,Ct.height,B,X,0,0,Lt[3],Re,!1,y.oB,!1,it);if(p&&p.collides(Wt.declutterBox))break t;Pt.push([t,o,Ct,Wt,1,null,null])}if(nt)for(vt=0,qt=Ot.length;vt<qt;++vt){Lt=Ot[vt],te=Lt[4],Ct=this.createLabel(te,ht,nt,""),B=Lt[2],X=ae*Ct.height-Ce;const Wt=this.calculateImageOrLabelDimensions_(Ct.width,Ct.height,Lt[0],Lt[1],Ct.width,Ct.height,B,X,0,0,Lt[3],Re,!1,y.oB,!1,it);if(p&&p.collides(Wt.declutterBox))break t;Pt.push([t,o,Ct,Wt,1,null,null])}p&&p.load(Pt.map(ce));for(let Wt=0,$e=Pt.length;Wt<$e;++Wt)this.replayImageOrLabel_.apply(this,Pt[Wt])}}++C;break;case R.END_GEOMETRY:if(void 0!==_){it=K[1];const Dt=_(it,wt);if(Dt)return Dt}++C;break;case R.FILL:lt?ut++:this.fill_(t),++C;break;case R.MOVE_TO_LINE_TO:for(T=K[1],W=K[2],xt=I[T],Et=I[T+1],J=xt+.5|0,Q=Et+.5|0,(J!==A||Q!==b)&&(t.moveTo(xt,Et),A=J,b=Q),T+=2;T<W;T+=2)xt=I[T],Et=I[T+1],J=xt+.5|0,Q=Et+.5|0,(T==W-2||J!==A||Q!==b)&&(t.lineTo(xt,Et),A=J,b=Q);++C;break;case R.SET_FILL_STYLE:pt=K,this.alignFill_=K[2],ut&&(this.fill_(t),ut=0,gt&&(t.stroke(),gt=0)),t.fillStyle=K[1],++C;break;case R.SET_STROKE_STYLE:mt=K,gt&&(t.stroke(),gt=0),this.setStrokeStyle_(t,K),++C;break;case R.STROKE:lt?gt++:t.stroke(),++C;break;default:++C}}ut&&this.fill_(t),gt&&t.stroke()}execute(t,o,e,h,l,_){this.viewRotation_=h,this.execute_(t,o,e,this.instructions,l,void 0,void 0,_)}executeHitDetection(t,o,e,h,l){return this.viewRotation_=e,this.execute_(t,1,o,this.hitDetectionInstructions,!0,h,l)}};var zt=E(1992),we=E(9466);const ee=["Polygon","Circle","LineString","Image","Text","Default"],ie={},ue=class Ae{constructor(t,o,e,h,l,_){this.maxExtent_=t,this.overlaps_=h,this.pixelRatio_=e,this.resolution_=o,this.renderBuffer_=_,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,H.Ue)(),this.createExecutors_(l)}clip(t,o){const e=this.getClipCoords(o);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()}createExecutors_(t){for(const o in t){let e=this.executorsByZIndex_[o];void 0===e&&(e={},this.executorsByZIndex_[o]=e);const h=t[o];for(const l in h)e[l]=new Me(this.resolution_,this.pixelRatio_,this.overlaps_,h[l])}}hasExecutors(t){for(const o in this.executorsByZIndex_){const e=this.executorsByZIndex_[o];for(let h=0,l=t.length;h<l;++h)if(t[h]in e)return!0}return!1}forEachFeatureAtCoordinate(t,o,e,h,l,_){const g=2*(h=Math.round(h))+1,p=(0,H.qC)(this.hitDetectionTransform_,h+.5,h+.5,1/o,-1/o,-e,-t[0],-t[1]),I=!this.hitDetectionContext_;I&&(this.hitDetectionContext_=(0,zt.E4)(g,g,void 0,{willReadFrequently:!0}));const C=this.hitDetectionContext_;let O;C.canvas.width!==g||C.canvas.height!==g?(C.canvas.width=g,C.canvas.height=g):I||C.clearRect(0,0,g,g),void 0!==this.renderBuffer_&&(O=(0,f.lJ)(),(0,f.Wj)(O,t),(0,f.f3)(O,o*(this.renderBuffer_+h),O));const T=function ke($){if(void 0!==ie[$])return ie[$];const t=2*$+1,o=$*$,e=new Array(o+1);for(let l=0;l<=$;++l)for(let _=0;_<=$;++_){const g=l*l+_*_;if(g>o)break;let p=e[g];p||(p=[],e[g]=p),p.push(4*(($+l)*t+($+_))+3),l>0&&p.push(4*(($-l)*t+($+_))+3),_>0&&(p.push(4*(($+l)*t+($-_))+3),l>0&&p.push(4*(($-l)*t+($-_))+3))}const h=[];for(let l=0,_=e.length;l<_;++l)e[l]&&h.push(...e[l]);return ie[$]=h,h}(h);let W;function B(q,ht){const dt=C.getImageData(0,0,g,g).data;for(let nt=0,ut=T.length;nt<ut;nt++)if(dt[T[nt]]>0){if(!_||"Image"!==W&&"Text"!==W||_.includes(q)){const gt=(T[nt]-3)/4,pt=h-gt%g,mt=h-(gt/g|0),ft=l(q,ht,pt*pt+mt*mt);if(ft)return ft}C.clearRect(0,0,g,g);break}}const X=Object.keys(this.executorsByZIndex_).map(Number);let A,b,J,Q,tt;for(X.sort(z.j2),A=X.length-1;A>=0;--A){const q=X[A].toString();for(J=this.executorsByZIndex_[q],b=ee.length-1;b>=0;--b)if(W=ee[b],Q=J[W],void 0!==Q&&(tt=Q.executeHitDetection(C,p,e,B,O),tt))return tt}}getClipCoords(t){const o=this.maxExtent_;if(!o)return null;const e=o[0],h=o[1],l=o[2],_=o[3],g=[e,h,e,_,l,_,l,h];return(0,at.vT)(g,0,8,2,t,g),g}isEmpty(){return(0,we.x)(this.executorsByZIndex_)}execute(t,o,e,h,l,_,g){const p=Object.keys(this.executorsByZIndex_).map(Number);let I,C,O,T,W,B;for(p.sort(z.j2),this.maxExtent_&&(t.save(),this.clip(t,e)),_=_||ee,g&&p.reverse(),I=0,C=p.length;I<C;++I){const X=p[I].toString();for(W=this.executorsByZIndex_[X],O=0,T=_.length;O<T;++O)B=W[_[O]],void 0!==B&&B.execute(t,o,e,h,l,g)}this.maxExtent_&&t.restore()}};var Ht=E(8587),Fe=E(3620),Pe=E(9570);const Mt=.5;var Gt=E(8377),Xt=E(6003),be=E(3481);const Xe=class Ge extends ot.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,f.lJ)(),this.wrappedRenderedExtent_=(0,f.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,o,e){const h=o.extent,l=o.viewState,_=l.center,g=l.resolution,p=l.projection,I=l.rotation,C=p.getExtent(),O=this.getLayer().getSource(),T=o.pixelRatio,W=o.viewHints,B=!(W[Ht.Z.ANIMATING]||W[Ht.Z.INTERACTING]),X=this.compositionContext_,A=Math.round(o.size[0]*T),b=Math.round(o.size[1]*T),J=O.getWrapX()&&p.canWrapX(),Q=J?(0,f.dz)(C):null,tt=J?Math.ceil((h[2]-C[2])/Q)+1:1;let q=J?Math.floor((h[0]-C[0])/Q):0;do{const ht=this.getRenderTransform(_,g,I,T,A,b,q*Q);t.execute(X,1,ht,I,B,void 0,e)}while(++q<tt)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,zt.E4)(this.context.canvas.width,this.context.canvas.height,ot.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,zt.jy)(this.compositionContext_),ot.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,o){const e=t.pixelRatio,h=t.layerStatesArray[t.layerIndex];(0,H.n3)(this.pixelTransform,1/e,1/e),(0,H.nb)(this.inversePixelTransform,this.pixelTransform);const l=(0,H.BB)(this.pixelTransform);this.useContainer(o,l,this.getBackground(t));const _=this.context,g=_.canvas,p=this.replayGroup_,I=this.declutterExecutorGroup;if((!p||p.isEmpty())&&(!I||I.isEmpty()))return null;const C=Math.round(t.size[0]*e),O=Math.round(t.size[1]*e);g.width!=C||g.height!=O?(g.width=C,g.height=O,g.style.transform!==l&&(g.style.transform=l)):this.containerReused||_.clearRect(0,0,C,O),this.preRender(_,t);const T=t.viewState,W=T.projection;this.opacity_=h.opacity,this.setupCompositionContext_();let B=!1,X=!0;if(h.extent&&this.clipping){const A=(0,Xt.dY)(h.extent,W);X=(0,f.kK)(A,t.extent),B=X&&!(0,f.r4)(A,t.extent),B&&this.clipUnrotated(this.compositionContext_,t,A)}return X&&this.renderWorlds(p,t),B&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(_,t),this.renderedRotation_!==T.rotation&&(this.renderedRotation_=T.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(o=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,H.nn)(this.pixelTransform,e);const h=this.renderedCenter_,l=this.renderedResolution_,_=this.renderedRotation_,g=this.renderedProjection_,p=this.wrappedRenderedExtent_,I=this.getLayer(),C=[],O=e[0]*Mt,T=e[1]*Mt;C.push(this.getRenderTransform(h,l,_,Mt,O,T,0).slice());const W=I.getSource(),B=g.getExtent();if(W.getWrapX()&&g.canWrapX()&&!(0,f.r4)(B,p)){let X=p[0];const A=(0,f.dz)(B);let J,b=0;for(;X<B[0];)--b,J=A*b,C.push(this.getRenderTransform(h,l,_,Mt,O,T,J).slice()),X+=A;for(b=0,X=p[2];X>B[2];)++b,J=A*b,C.push(this.getRenderTransform(h,l,_,Mt,O,T,J).slice()),X-=A}this.hitDetectionImageData_=function We($,t,o,e,h,l,_){const I=(0,zt.E4)($[0]*Mt,$[1]*Mt);I.imageSmoothingEnabled=!1;const C=I.canvas,O=new Fe.Z(I,Mt,h,null,_),T=o.length,W=Math.floor(16777215/T),B={};for(let A=1;A<=T;++A){const b=o[A-1],J=b.getStyleFunction()||e;if(!e)continue;let Q=J(b,l);if(!Q)continue;Array.isArray(Q)||(Q=[Q]);const q=(A*W).toString(16).padStart(7,"#00000");for(let ht=0,dt=Q.length;ht<dt;++ht){const nt=Q[ht],ut=nt.getGeometryFunction()(b);if(!ut||!(0,f.kK)(h,ut.getExtent()))continue;const gt=nt.clone(),pt=gt.getFill();pt&&pt.setColor(q);const mt=gt.getStroke();mt&&(mt.setColor(q),mt.setLineDash(null)),gt.setText(void 0);const ft=nt.getImage();if(ft&&0!==ft.getOpacity()){const lt=ft.getImageSize();if(!lt)continue;const it=(0,zt.E4)(lt[0],lt[1],void 0,{alpha:!1}),xt=it.canvas;it.fillStyle=q,it.fillRect(0,0,xt.width,xt.height),gt.setImage(new Pe.Z({img:xt,imgSize:lt,anchor:ft.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ft.getOrigin(),opacity:1,size:ft.getSize(),scale:ft.getScale(),rotation:ft.getRotation(),rotateWithView:ft.getRotateWithView()}))}const Tt=gt.getZIndex()||0;let _t=B[Tt];_t||(_t={},B[Tt]=_t,_t.Polygon=[],_t.Circle=[],_t.LineString=[],_t.Point=[]);const et=ut.getType();if("GeometryCollection"===et){const lt=ut.getGeometriesArrayRecursive();for(let it=0,xt=lt.length;it<xt;++it){const Et=lt[it];_t[Et.getType().replace("Multi","")].push(Et,gt)}}else _t[et.replace("Multi","")].push(ut,gt)}}const X=Object.keys(B).map(Number).sort(z.j2);for(let A=0,b=X.length;A<b;++A){const J=B[X[A]];for(const Q in J){const tt=J[Q];for(let q=0,ht=tt.length;q<ht;q+=2){O.setStyle(tt[q+1]);for(let dt=0,nt=t.length;dt<nt;++dt)O.setTransform(t[dt]),O.drawGeometry(tt[q])}}}return I.getImageData(0,0,C.width,C.height)}(e,C,this.renderedFeatures_,I.getStyleFunction(),p,l,_)}o(function Be($,t,o){const e=[];if(o){const h=Math.floor(Math.round($[0])*Mt),l=Math.floor(Math.round($[1])*Mt),_=4*((0,L.uZ)(h,0,o.width-1)+(0,L.uZ)(l,0,o.height-1)*o.width),C=o.data[_+2]+256*(o.data[_+1]+256*o.data[_]),O=Math.floor(16777215/t.length);C&&C%O==0&&e.push(t[C/O-1])}return e}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,o,e,h,l){if(!this.replayGroup_)return;const _=o.viewState.resolution,g=o.viewState.rotation,p=this.getLayer(),I={},C=function(W,B,X){const A=(0,M.sq)(W),b=I[A];if(b){if(!0!==b&&X<b.distanceSq){if(0===X)return I[A]=!0,l.splice(l.lastIndexOf(b),1),h(W,p,B);b.geometry=B,b.distanceSq=X}}else{if(0===X)return I[A]=!0,h(W,p,B);l.push(I[A]={feature:W,layer:p,geometry:B,distanceSq:X,callback:h})}};let O;const T=[this.replayGroup_];return this.declutterExecutorGroup&&T.push(this.declutterExecutorGroup),T.some(W=>O=W.forEachFeatureAtCoordinate(t,_,g,e,C,W===this.declutterExecutorGroup&&o.declutterTree?o.declutterTree.all().map(B=>B.value):null)),O}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const o=this.getLayer(),e=o.getSource();if(!e)return!1;const h=t.viewHints[Ht.Z.ANIMATING],l=t.viewHints[Ht.Z.INTERACTING],_=o.getUpdateWhileAnimating(),g=o.getUpdateWhileInteracting();if(this.ready&&!_&&h||!g&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=t.extent,I=t.viewState,C=I.projection,O=I.resolution,T=t.pixelRatio,W=o.getRevision(),B=o.getRenderBuffer();let X=o.getRenderOrder();void 0===X&&(X=Gt.eR);const A=I.center.slice(),b=(0,f.f3)(p,B*O),J=b.slice(),Q=[b.slice()],tt=C.getExtent();if(e.getWrapX()&&C.canWrapX()&&!(0,f.r4)(tt,t.extent)){const et=(0,f.dz)(tt),lt=Math.max((0,f.dz)(b)/2,et);b[0]=tt[0]-lt,b[2]=tt[2]+lt,(0,be.Cf)(A,C);const it=(0,f.Cf)(Q[0],C);it[0]<tt[0]&&it[2]<tt[2]?Q.push([it[0]+et,it[1],it[2]+et,it[3]]):it[0]>tt[0]&&it[2]>tt[2]&&Q.push([it[0]-et,it[1],it[2]-et,it[3]])}if(this.ready&&this.renderedResolution_==O&&this.renderedRevision_==W&&this.renderedRenderOrder_==X&&(0,f.r4)(this.wrappedRenderedExtent_,b))return(0,z.fS)(this.renderedExtent_,J)||(this.hitDetectionImageData_=null,this.renderedExtent_=J),this.renderedCenter_=A,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const q=new st((0,Gt.Qz)(O,T),b,O,T);let ht;this.getLayer().getDeclutter()&&(ht=new st((0,Gt.Qz)(O,T),b,O,T));const dt=(0,Xt.Cs)();let nt;if(dt){for(let et=0,lt=Q.length;et<lt;++et){const xt=(0,Xt.Fj)(Q[et],C);e.loadFeatures(xt,(0,Xt.on)(O,C),dt)}nt=(0,Xt.WO)(dt,C)}else for(let et=0,lt=Q.length;et<lt;++et)e.loadFeatures(Q[et],O,C);const ut=(0,Gt.se)(O,T);let gt=!0;const pt=et=>{let lt;const it=et.getStyleFunction()||o.getStyleFunction();if(it&&(lt=it(et,O)),lt){const xt=this.renderFeature(et,ut,lt,q,nt,ht);gt=gt&&!xt}},mt=(0,Xt.Fj)(b,C),ft=e.getFeaturesInExtent(mt);X&&ft.sort(X);for(let et=0,lt=ft.length;et<lt;++et)pt(ft[et]);this.renderedFeatures_=ft,this.ready=gt;const Tt=q.finish(),_t=new ue(b,O,T,e.getOverlaps(),Tt,o.getRenderBuffer());return ht&&(this.declutterExecutorGroup=new ue(b,O,T,e.getOverlaps(),ht.finish(),o.getRenderBuffer())),this.renderedResolution_=O,this.renderedRevision_=W,this.renderedRenderOrder_=X,this.renderedExtent_=J,this.wrappedRenderedExtent_=b,this.renderedCenter_=A,this.renderedProjection_=C,this.replayGroup_=_t,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,o,e,h,l,_){if(!e)return!1;let g=!1;if(Array.isArray(e))for(let p=0,I=e.length;p<I;++p)g=(0,Gt.Pn)(h,t,e[p],o,this.boundHandleStyleImageChange_,l,_)||g;else g=(0,Gt.Pn)(h,t,e,o,this.boundHandleStyleImageChange_,l,_);return g}}},8377:(yt,rt,E)=>{"use strict";E.d(rt,{Pn:()=>G,Qz:()=>ct,eR:()=>Y,se:()=>R});var N=E(521),Z=E(119);const j=.5,D={Point:function c(d,u,r,a,M){const L=r.getImage(),P=r.getText();let w;if(L){if(L.getImageState()!=N.Z.LOADED)return;let k=d;if(M){const v=L.getDeclutterMode();if("none"!==v)if(k=M,"obstacle"===v){const F=d.getBuilder(r.getZIndex(),"Image");F.setImageStyle(L,w),F.drawPoint(u,a)}else P&&P.getText()&&(w={})}const m=k.getBuilder(r.getZIndex(),"Image");m.setImageStyle(L,w),m.drawPoint(u,a)}if(P&&P.getText()){let k=d;M&&(k=M);const m=k.getBuilder(r.getZIndex(),"Text");m.setTextStyle(P,w),m.drawText(u,a)}},LineString:function n(d,u,r,a,M){const L=r.getStroke();if(L){const w=d.getBuilder(r.getZIndex(),"LineString");w.setFillStrokeStyle(null,L),w.drawLineString(u,a)}const P=r.getText();if(P&&P.getText()){const w=(M||d).getBuilder(r.getZIndex(),"Text");w.setTextStyle(P),w.drawText(u,a)}},Polygon:function s(d,u,r,a,M){const L=r.getFill(),P=r.getStroke();if(L||P){const k=d.getBuilder(r.getZIndex(),"Polygon");k.setFillStrokeStyle(L,P),k.drawPolygon(u,a)}const w=r.getText();if(w&&w.getText()){const k=(M||d).getBuilder(r.getZIndex(),"Text");k.setTextStyle(w),k.drawText(u,a)}},MultiPoint:function S(d,u,r,a,M){const L=r.getImage(),P=r.getText();let w;if(L){if(L.getImageState()!=N.Z.LOADED)return;let k=d;if(M){const v=L.getDeclutterMode();if("none"!==v)if(k=M,"obstacle"===v){const F=d.getBuilder(r.getZIndex(),"Image");F.setImageStyle(L,w),F.drawMultiPoint(u,a)}else P&&P.getText()&&(w={})}const m=k.getBuilder(r.getZIndex(),"Image");m.setImageStyle(L,w),m.drawMultiPoint(u,a)}if(P&&P.getText()){let k=d;M&&(k=M);const m=k.getBuilder(r.getZIndex(),"Text");m.setTextStyle(P,w),m.drawText(u,a)}},MultiLineString:function x(d,u,r,a,M){const L=r.getStroke();if(L){const w=d.getBuilder(r.getZIndex(),"LineString");w.setFillStrokeStyle(null,L),w.drawMultiLineString(u,a)}const P=r.getText();if(P&&P.getText()){const w=(M||d).getBuilder(r.getZIndex(),"Text");w.setTextStyle(P),w.drawText(u,a)}},MultiPolygon:function i(d,u,r,a,M){const L=r.getFill(),P=r.getStroke();if(P||L){const k=d.getBuilder(r.getZIndex(),"Polygon");k.setFillStrokeStyle(L,P),k.drawMultiPolygon(u,a)}const w=r.getText();if(w&&w.getText()){const k=(M||d).getBuilder(r.getZIndex(),"Text");k.setTextStyle(w),k.drawText(u,a)}},GeometryCollection:function z(d,u,r,a,M){const L=u.getGeometriesArray();let P,w;for(P=0,w=L.length;P<w;++P)(0,D[L[P].getType()])(d,L[P],r,a,M)},Circle:function U(d,u,r,a,M){const L=r.getFill(),P=r.getStroke();if(L||P){const k=d.getBuilder(r.getZIndex(),"Circle");k.setFillStrokeStyle(L,P),k.drawCircle(u,a)}const w=r.getText();if(w&&w.getText()){const k=(M||d).getBuilder(r.getZIndex(),"Text");k.setTextStyle(w),k.drawText(u,a)}}};function Y(d,u){return parseInt((0,Z.sq)(d),10)-parseInt((0,Z.sq)(u),10)}function R(d,u){const r=ct(d,u);return r*r}function ct(d,u){return j*d/u}function G(d,u,r,a,M,L,P){let w=!1;const k=r.getImage();if(k){const m=k.getImageState();m==N.Z.LOADED||m==N.Z.ERROR?k.unlistenImageChange(M):(m==N.Z.IDLE&&k.load(),k.listenImageChange(M),w=!0)}return function f(d,u,r,a,M,L){const P=r.getGeometryFunction()(u);if(!P)return;const w=P.simplifyTransformed(a,M);r.getRenderer()?y(d,w,r,u):(0,D[w.getType()])(d,w,r,u,L)}(d,u,r,a,L,P),w}function y(d,u,r,a){if("GeometryCollection"!=u.getType())d.getBuilder(r.getZIndex(),"Default").drawCustom(u,a,r.getRenderer(),r.getHitDetectionRenderer());else{const L=u.getGeometries();for(let P=0,w=L.length;P<w;++P)y(d,L[P],r,a)}}},5947:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>w});var N=E(2815),Z=E(9889),j=E(8214),D=E(9972),Y=E(4587),R=E(2909),ct=E(4702),U=E(4412),G=E(1345);function y(k,m){return[[-1/0,-1/0,1/0,1/0]]}E(6003);var x=E(1911),i=E(760),c=E(2456),S=E(119),s=E(9466),d=E(1729);let u=!1;function a(k,m){return function(v,F,V,st,ot){const H=this;!function r(k,m,v,F,V,st,ot){const H=new XMLHttpRequest;H.open("GET","function"==typeof k?k(v,F,V):k,!0),"arraybuffer"==m.getType()&&(H.responseType="arraybuffer"),H.withCredentials=u,H.onload=function(at){if(!H.status||H.status>=200&&H.status<300){const It=m.getType();let St;"json"==It||"text"==It?St=H.responseText:"xml"==It?(St=H.responseXML,St||(St=(new DOMParser).parseFromString(H.responseText,"application/xml"))):"arraybuffer"==It&&(St=H.response),St?st(m.readFeatures(St,{extent:v,featureProjection:V}),m.readProjection(St)):ot()}else ot()},H.onerror=ot,H.send()}(k,m,v,F,V,function(at,It){H.addFeatures(at),void 0!==st&&st(at)},ot||G.Zn)}}class L extends j.ZP{constructor(m,v,F){super(m),this.feature=v,this.features=F}}const w=class P extends ct.Z{constructor(m){super({attributions:(m=m||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===m.wrapX||m.wrapX}),this.loader_=G.Zn,this.format_=m.format,this.overlaps_=void 0===m.overlaps||m.overlaps,this.url_=m.url,void 0!==m.loader?this.loader_=m.loader:void 0!==this.url_&&((0,x.h)(this.format_,7),this.loader_=a(this.url_,this.format_)),this.strategy_=void 0!==m.strategy?m.strategy:y;const v=void 0===m.useSpatialIndex||m.useSpatialIndex;let F,V;this.featuresRtree_=v?new R.Z:null,this.loadedExtentsRtree_=new R.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(m.features)?V=m.features:m.features&&(F=m.features,V=F.getArray()),!v&&void 0===F&&(F=new N.Z(V)),void 0!==V&&this.addFeaturesInternal(V),void 0!==F&&this.bindFeaturesCollection_(F)}addFeature(m){this.addFeatureInternal(m),this.changed()}addFeatureInternal(m){const v=(0,S.sq)(m);if(!this.addToIndex_(v,m))return void(this.featuresCollection_&&this.featuresCollection_.remove(m));this.setupChangeEvents_(v,m);const F=m.getGeometry();if(F){const V=F.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(V,m)}else this.nullGeometryFeatures_[v]=m;this.dispatchEvent(new L(U.Z.ADDFEATURE,m))}setupChangeEvents_(m,v){this.featureChangeKeys_[m]=[(0,d.oL)(v,D.Z.CHANGE,this.handleFeatureChange_,this),(0,d.oL)(v,Y.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(m,v){let F=!0;const V=v.getId();return void 0!==V&&(V.toString()in this.idIndex_?F=!1:this.idIndex_[V.toString()]=v),F&&((0,x.h)(!(m in this.uidIndex_),30),this.uidIndex_[m]=v),F}addFeatures(m){this.addFeaturesInternal(m),this.changed()}addFeaturesInternal(m){const v=[],F=[],V=[];for(let st=0,ot=m.length;st<ot;st++){const H=m[st],at=(0,S.sq)(H);this.addToIndex_(at,H)&&F.push(H)}for(let st=0,ot=F.length;st<ot;st++){const H=F[st],at=(0,S.sq)(H);this.setupChangeEvents_(at,H);const It=H.getGeometry();if(It){const St=It.getExtent();v.push(St),V.push(H)}else this.nullGeometryFeatures_[at]=H}if(this.featuresRtree_&&this.featuresRtree_.load(v,V),this.hasListener(U.Z.ADDFEATURE))for(let st=0,ot=F.length;st<ot;st++)this.dispatchEvent(new L(U.Z.ADDFEATURE,F[st]))}bindFeaturesCollection_(m){let v=!1;this.addEventListener(U.Z.ADDFEATURE,function(F){v||(v=!0,m.push(F.feature),v=!1)}),this.addEventListener(U.Z.REMOVEFEATURE,function(F){v||(v=!0,m.remove(F.feature),v=!1)}),m.addEventListener(Z.Z.ADD,F=>{v||(v=!0,this.addFeature(F.element),v=!1)}),m.addEventListener(Z.Z.REMOVE,F=>{v||(v=!0,this.removeFeature(F.element),v=!1)}),this.featuresCollection_=m}clear(m){if(m){for(const F in this.featureChangeKeys_)this.featureChangeKeys_[F].forEach(d.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(V=>{this.removeFeatureInternal(V)});for(const V in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[V])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const v=new L(U.Z.CLEAR);this.dispatchEvent(v),this.changed()}forEachFeature(m){if(this.featuresRtree_)return this.featuresRtree_.forEach(m);this.featuresCollection_&&this.featuresCollection_.forEach(m)}forEachFeatureAtCoordinateDirect(m,v){return this.forEachFeatureInExtent([m[0],m[1],m[0],m[1]],function(V){if(V.getGeometry().intersectsCoordinate(m))return v(V)})}forEachFeatureInExtent(m,v){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(m,v);this.featuresCollection_&&this.featuresCollection_.forEach(v)}forEachFeatureIntersectingExtent(m,v){return this.forEachFeatureInExtent(m,function(F){if(F.getGeometry().intersectsExtent(m)){const st=v(F);if(st)return st}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let m;return this.featuresCollection_?m=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(m=this.featuresRtree_.getAll(),(0,s.x)(this.nullGeometryFeatures_)||(0,c.l7)(m,Object.values(this.nullGeometryFeatures_))),m}getFeaturesAtCoordinate(m){const v=[];return this.forEachFeatureAtCoordinateDirect(m,function(F){v.push(F)}),v}getFeaturesInExtent(m,v){if(this.featuresRtree_){if(!(v&&v.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(m);const V=(0,i.MV)(m,v);return[].concat(...V.map(st=>this.featuresRtree_.getInExtent(st)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(m,v){const F=m[0],V=m[1];let st=null;const ot=[NaN,NaN];let H=1/0;const at=[-1/0,-1/0,1/0,1/0];return v=v||G.uX,this.featuresRtree_.forEachInExtent(at,function(It){if(v(It)){const St=It.getGeometry(),Bt=H;if(H=St.closestPointXY(F,V,ot,H),H<Bt){st=It;const Rt=Math.sqrt(H);at[0]=F-Rt,at[1]=V-Rt,at[2]=F+Rt,at[3]=V+Rt}}}),st}getExtent(m){return this.featuresRtree_.getExtent(m)}getFeatureById(m){const v=this.idIndex_[m.toString()];return void 0!==v?v:null}getFeatureByUid(m){const v=this.uidIndex_[m];return void 0!==v?v:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(m){const v=m.target,F=(0,S.sq)(v),V=v.getGeometry();if(V){const ot=V.getExtent();F in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[F],this.featuresRtree_&&this.featuresRtree_.insert(ot,v)):this.featuresRtree_&&this.featuresRtree_.update(ot,v)}else F in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(v),this.nullGeometryFeatures_[F]=v);const st=v.getId();if(void 0!==st){const ot=st.toString();this.idIndex_[ot]!==v&&(this.removeFromIdIndex_(v),this.idIndex_[ot]=v)}else this.removeFromIdIndex_(v),this.uidIndex_[F]=v;this.changed(),this.dispatchEvent(new L(U.Z.CHANGEFEATURE,v))}hasFeature(m){const v=m.getId();return void 0!==v?v in this.idIndex_:(0,S.sq)(m)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,s.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(m,v,F){const V=this.loadedExtentsRtree_,st=this.strategy_(m,v,F);for(let ot=0,H=st.length;ot<H;++ot){const at=st[ot];V.forEachInExtent(at,function(St){return(0,i.r4)(St.extent,at)})||(++this.loadingExtentsCount_,this.dispatchEvent(new L(U.Z.FEATURESLOADSTART)),this.loader_.call(this,at,v,F,St=>{--this.loadingExtentsCount_,this.dispatchEvent(new L(U.Z.FEATURESLOADEND,void 0,St))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new L(U.Z.FEATURESLOADERROR))}),V.insert(at,{extent:at.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(m){const v=this.loadedExtentsRtree_;let F;v.forEachInExtent(m,function(V){if((0,i.fS)(V.extent,m))return F=V,!0}),F&&v.remove(F)}removeFeature(m){if(!m)return;const v=(0,S.sq)(m);v in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[v]:this.featuresRtree_&&this.featuresRtree_.remove(m),this.removeFeatureInternal(m)&&this.changed()}removeFeatureInternal(m){const v=(0,S.sq)(m),F=this.featureChangeKeys_[v];if(!F)return;F.forEach(d.bN),delete this.featureChangeKeys_[v];const V=m.getId();return void 0!==V&&delete this.idIndex_[V.toString()],delete this.uidIndex_[v],this.dispatchEvent(new L(U.Z.REMOVEFEATURE,m)),m}removeFromIdIndex_(m){let v=!1;for(const F in this.idIndex_)if(this.idIndex_[F]===m){delete this.idIndex_[F],v=!0;break}return v}setLoader(m){this.loader_=m}setUrl(m){(0,x.h)(this.format_,7),this.url_=m,this.setLoader(a(m,this.format_))}}},4412:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>N});const N={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>R});var N=E(2402),Z=E(760),j=E(119),D=E(9466);const R=class Y{constructor(U){this.rbush_=new N(U),this.items_={}}insert(U,G){const f={minX:U[0],minY:U[1],maxX:U[2],maxY:U[3],value:G};this.rbush_.insert(f),this.items_[(0,j.sq)(G)]=f}load(U,G){const f=new Array(G.length);for(let y=0,z=G.length;y<z;y++){const n=U[y],x=G[y],i={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:x};f[y]=i,this.items_[(0,j.sq)(x)]=i}this.rbush_.load(f)}remove(U){const G=(0,j.sq)(U),f=this.items_[G];return delete this.items_[G],null!==this.rbush_.remove(f)}update(U,G){const f=this.items_[(0,j.sq)(G)];(0,Z.fS)([f.minX,f.minY,f.maxX,f.maxY],U)||(this.remove(G),this.insert(U,G))}getAll(){return this.rbush_.all().map(function(G){return G.value})}getInExtent(U){return this.rbush_.search({minX:U[0],minY:U[1],maxX:U[2],maxY:U[3]}).map(function(y){return y.value})}forEach(U){return this.forEach_(this.getAll(),U)}forEachInExtent(U,G){return this.forEach_(this.getInExtent(U),G)}forEach_(U,G){let f;for(let y=0,z=U.length;y<z;y++)if(f=G(U[y]),f)return f;return f}isEmpty(){return(0,D.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(U){const G=this.rbush_.toJSON();return(0,Z.T9)(G.minX,G.minY,G.maxX,G.maxY,U)}concat(U){this.rbush_.load(U.rbush_.all());for(const G in U.items_)this.items_[G]=U.items_[G]}}},7392:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>j});var N=E(8225);class Z extends N.Z{constructor(Y){super({points:1/0,fill:(Y=Y||{radius:5}).fill,radius:Y.radius,stroke:Y.stroke,scale:void 0!==Y.scale?Y.scale:1,rotation:void 0!==Y.rotation?Y.rotation:0,rotateWithView:void 0!==Y.rotateWithView&&Y.rotateWithView,displacement:void 0!==Y.displacement?Y.displacement:[0,0],declutterMode:Y.declutterMode})}clone(){const Y=this.getScale(),R=new Z({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(Y)?Y.slice():Y,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return R.setOpacity(this.getOpacity()),R}setRadius(Y){this.radius_=Y,this.render()}}const j=Z},5044:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>Z});class N{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null}clone(){const D=this.getColor();return new N({color:Array.isArray(D)?D.slice():D||void 0})}getColor(){return this.color_}setColor(D){this.color_=D}}const Z=N},9570:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>c});var N=E(9972),Z=E(521),j=E(6398),D=E(3783),Y=E(1911),R=E(8007),ct=E(1992),U=E(2956),G=E(3641);let f=null;class y extends R.Z{constructor(s,d,u,r,a,M){super(),this.hitDetectionImage_=null,this.image_=s,this.crossOrigin_=r,this.canvas_={},this.color_=M,this.unlisten_=null,this.imageState_=a,this.size_=u,this.src_=d}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Z.Z.LOADED){f||(f=(0,ct.E4)(1,1,void 0,{willReadFrequently:!0})),f.drawImage(this.image_,0,0);try{f.getImageData(0,0,1,1),this.tainted_=!1}catch{f=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(N.Z.CHANGE)}handleImageError_(){this.imageState_=Z.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Z.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(s){return this.image_||this.initializeImage_(),this.replaceColor_(s),this.canvas_[s]?this.canvas_[s]:this.image_}getPixelRatio(s){return this.replaceColor_(s),this.canvas_[s]?s:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const s=this.size_[0],d=this.size_[1],u=(0,ct.E4)(s,d);u.fillRect(0,0,s,d),this.hitDetectionImage_=u.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Z.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=Z.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,G.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(s){if(!this.color_||this.canvas_[s]||this.imageState_!==Z.Z.LOADED)return;const d=this.image_,u=document.createElement("canvas");u.width=Math.ceil(d.width*s),u.height=Math.ceil(d.height*s);const r=u.getContext("2d");r.scale(s,s),r.drawImage(d,0,0),r.globalCompositeOperation="multiply",r.fillStyle=(0,D.XC)(this.color_),r.fillRect(0,0,u.width/s,u.height/s),r.globalCompositeOperation="destination-in",r.drawImage(d,0,0),this.canvas_[s]=u}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var x=E(119);class i extends j.Z{constructor(s){super({opacity:void 0!==(s=s||{}).opacity?s.opacity:1,rotation:void 0!==s.rotation?s.rotation:0,scale:void 0!==s.scale?s.scale:1,displacement:void 0!==s.displacement?s.displacement:[0,0],rotateWithView:void 0!==s.rotateWithView&&s.rotateWithView,declutterMode:s.declutterMode}),this.anchor_=void 0!==s.anchor?s.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==s.anchorOrigin?s.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==s.anchorXUnits?s.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==s.anchorYUnits?s.anchorYUnits:"fraction",this.crossOrigin_=void 0!==s.crossOrigin?s.crossOrigin:null;const M=void 0!==s.img?s.img:null;this.imgSize_=s.imgSize;let L=s.src;(0,Y.h)(!(void 0!==L&&M),4),(0,Y.h)(!M||M&&this.imgSize_,5),(void 0===L||0===L.length)&&M&&(L=M.src||(0,x.sq)(M)),(0,Y.h)(void 0!==L&&L.length>0,6),(0,Y.h)(!((void 0!==s.width||void 0!==s.height)&&void 0!==s.scale),69);const P=void 0!==s.src?Z.Z.IDLE:Z.Z.LOADED;if(this.color_=void 0!==s.color?(0,D._2)(s.color):null,this.iconImage_=function z(S,s,d,u,r,a){let M=U.c.get(s,u,a);return M||(M=new y(S,s,d,u,r,a),U.c.set(s,u,a,M)),M}(M,L,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,P,this.color_),this.offset_=void 0!==s.offset?s.offset:[0,0],this.offsetOrigin_=void 0!==s.offsetOrigin?s.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==s.size?s.size:null,this.width_=s.width,this.height_=s.height,void 0!==this.width_||void 0!==this.height_){const w=this.getImage(1),k=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};w.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):w.addEventListener("load",k)}}clone(){let s=this.getScale();return s=Array.isArray(s)?s.slice():s,(void 0!==this.width_||void 0!==this.height_)&&(s=void 0),new i({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:s,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(s,d){const u=this.getImage(1);super.setScale(void 0!==s&&void 0!==d?[s/u.width,d/u.height]:void 0!==s?[s/u.width,s/u.width]:void 0!==d?[d/u.height,d/u.height]:[1,1])}getAnchor(){let s=this.normalizedAnchor_;if(!s){s=this.anchor_;const r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;s=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(s[0]*=r[0]),"fraction"==this.anchorYUnits_&&(s[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;s===this.anchor_&&(s=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[0]=-s[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[1]=-s[1]+r[1])}this.normalizedAnchor_=s}const d=this.getDisplacement(),u=this.getScaleArray();return[s[0]-d[0]/u[0],s[1]+d[1]/u[1]]}setAnchor(s){this.anchor_=s,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(s){return this.iconImage_.getImage(s)}getPixelRatio(s){return this.iconImage_.getPixelRatio(s)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let s=this.offset_;if("top-left"!=this.offsetOrigin_){const d=this.getSize(),u=this.iconImage_.getSize();if(!d||!u)return null;s=s.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[0]=u[0]-d[0]-s[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[1]=u[1]-d[1]-s[1])}return this.origin_=s,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(s){this.width_=s,this.updateScaleFromWidthAndHeight(s,this.height_)}setHeight(s){this.height_=s,this.updateScaleFromWidthAndHeight(this.width_,s)}setScale(s){super.setScale(s);const d=this.getImage(1);if(d){const u=Array.isArray(s)?s[0]:s;void 0!==u&&(this.width_=u*d.width);const r=Array.isArray(s)?s[1]:s;void 0!==r&&(this.height_=r*d.height)}}listenImageChange(s){this.iconImage_.addEventListener(N.Z.CHANGE,s)}load(){this.iconImage_.load()}unlistenImageChange(s){this.iconImage_.removeEventListener(N.Z.CHANGE,s)}}const c=i},6398:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>D});var N=E(119),Z=E(1750);class j{constructor(R){this.opacity_=R.opacity,this.rotateWithView_=R.rotateWithView,this.rotation_=R.rotation,this.scale_=R.scale,this.scaleArray_=(0,Z.Pq)(R.scale),this.displacement_=R.displacement,this.declutterMode_=R.declutterMode}clone(){const R=this.getScale();return new j({opacity:this.getOpacity(),scale:Array.isArray(R)?R.slice():R,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,N.O3)()}getImage(R){return(0,N.O3)()}getHitDetectionImage(){return(0,N.O3)()}getPixelRatio(R){return 1}getImageState(){return(0,N.O3)()}getImageSize(){return(0,N.O3)()}getOrigin(){return(0,N.O3)()}getSize(){return(0,N.O3)()}setDisplacement(R){this.displacement_=R}setOpacity(R){this.opacity_=R}setRotateWithView(R){this.rotateWithView_=R}setRotation(R){this.rotation_=R}setScale(R){this.scale_=R,this.scaleArray_=(0,Z.Pq)(R)}listenImageChange(R){(0,N.O3)()}load(){(0,N.O3)()}unlistenImageChange(R){(0,N.O3)()}}const D=j},8225:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>U});var N=E(521),Z=E(6398),j=E(3783),D=E(5813),Y=E(1992),R=E(4686);class ct extends Z.Z{constructor(f){super({opacity:1,rotateWithView:void 0!==f.rotateWithView&&f.rotateWithView,rotation:void 0!==f.rotation?f.rotation:0,scale:void 0!==f.scale?f.scale:1,displacement:void 0!==f.displacement?f.displacement:[0,0],declutterMode:f.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==f.fill?f.fill:null,this.origin_=[0,0],this.points_=f.points,this.radius_=void 0!==f.radius?f.radius:f.radius1,this.radius2_=f.radius2,this.angle_=void 0!==f.angle?f.angle:0,this.stroke_=void 0!==f.stroke?f.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const f=this.getScale(),y=new ct({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(f)?f.slice():f,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return y.setOpacity(this.getOpacity()),y}getAnchor(){const f=this.size_;if(!f)return null;const y=this.getDisplacement(),z=this.getScaleArray();return[f[0]/2-y[0]/z[0],f[1]/2+y[1]/z[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(f){this.fill_=f,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(f){let y=this.canvas_[f];if(!y){const z=this.renderOptions_,n=(0,Y.E4)(z.size*f,z.size*f);this.draw_(z,n,f),y=n.canvas,this.canvas_[f]=y}return y}getPixelRatio(f){return f}getImageSize(){return this.size_}getImageState(){return N.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(f){this.stroke_=f,this.render()}listenImageChange(f){}load(){}unlistenImageChange(f){}calculateLineJoinSize_(f,y,z){if(0===y||this.points_===1/0||"bevel"!==f&&"miter"!==f)return y;let n=this.radius_,x=void 0===this.radius2_?n:this.radius2_;if(n<x){const V=n;n=x,x=V}const c=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),S=x*Math.sin(c),d=n-Math.sqrt(x*x-S*S),u=Math.sqrt(S*S+d*d),r=u/S;if("miter"===f&&r<=z)return r*y;const a=y/2/r,M=y/2*(d/u),P=Math.sqrt((n+a)*(n+a)+M*M)-n;if(void 0===this.radius2_||"bevel"===f)return 2*P;const w=n*Math.sin(c),m=x-Math.sqrt(n*n-w*w),F=Math.sqrt(w*w+m*m)/w;return F<=z?2*Math.max(P,F*y/2-x-n):2*P}createRenderOptions(){let x,f=R.rc,y=0,z=null,n=0,i=0;this.stroke_&&(x=this.stroke_.getColor(),null===x&&(x=R.Tx),x=(0,D.y)(x),i=this.stroke_.getWidth(),void 0===i&&(i=R.yC),z=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),f=this.stroke_.getLineJoin(),void 0===f&&(f=R.rc),y=this.stroke_.getMiterLimit(),void 0===y&&(y=R.V4));const c=this.calculateLineJoinSize_(f,i,y),S=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:x,strokeWidth:i,size:Math.ceil(2*S+c),lineDash:z,lineDashOffset:n,lineJoin:f,miterLimit:y}}render(){this.renderOptions_=this.createRenderOptions();const f=this.renderOptions_.size;this.canvas_={},this.size_=[f,f]}draw_(f,y,z){if(y.scale(z,z),y.translate(f.size/2,f.size/2),this.createPath_(y),this.fill_){let n=this.fill_.getColor();null===n&&(n=R.bL),y.fillStyle=(0,D.y)(n),y.fill()}this.stroke_&&(y.strokeStyle=f.strokeStyle,y.lineWidth=f.strokeWidth,f.lineDash&&(y.setLineDash(f.lineDash),y.lineDashOffset=f.lineDashOffset),y.lineJoin=f.lineJoin,y.miterLimit=f.miterLimit,y.stroke())}createHitDetectionCanvas_(f){if(this.fill_){let y=this.fill_.getColor(),z=0;if("string"==typeof y&&(y=(0,j._2)(y)),null===y?z=1:Array.isArray(y)&&(z=4===y.length?y[3]:1),0===z){const n=(0,Y.E4)(f.size,f.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(f,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(f){let y=this.points_;const z=this.radius_;if(y===1/0)f.arc(0,0,z,0,2*Math.PI);else{const n=void 0===this.radius2_?z:this.radius2_;void 0!==this.radius2_&&(y*=2);const x=this.angle_-Math.PI/2,i=2*Math.PI/y;for(let c=0;c<y;c++){const S=x+c*i,s=c%2==0?z:n;f.lineTo(s*Math.cos(S),s*Math.sin(S))}f.closePath()}}drawHitDetectionCanvas_(f,y){y.translate(f.size/2,f.size/2),this.createPath_(y),y.fillStyle=R.bL,y.fill(),this.stroke_&&(y.strokeStyle=f.strokeStyle,y.lineWidth=f.strokeWidth,f.lineDash&&(y.setLineDash(f.lineDash),y.lineDashOffset=f.lineDashOffset),y.lineJoin=f.lineJoin,y.miterLimit=f.miterLimit,y.stroke())}}const U=ct},6785:(yt,rt,E)=>{"use strict";E.d(rt,{Z:()=>Z});class N{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null,this.lineCap_=D.lineCap,this.lineDash_=void 0!==D.lineDash?D.lineDash:null,this.lineDashOffset_=D.lineDashOffset,this.lineJoin_=D.lineJoin,this.miterLimit_=D.miterLimit,this.width_=D.width}clone(){const D=this.getColor();return new N({color:Array.isArray(D)?D.slice():D||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(D){this.color_=D}setLineCap(D){this.lineCap_=D}setLineDash(D){this.lineDash_=D}setLineDashOffset(D){this.lineDashOffset_=D}setLineJoin(D){this.lineJoin_=D}setMiterLimit(D){this.miterLimit_=D}setWidth(D){this.width_=D}}const Z=N},109:(yt,rt,E)=>{"use strict";E.d(rt,{J$:()=>R,Ly:()=>G,ZP:()=>y,yF:()=>U});var N=E(7392),Z=E(5044),j=E(6785),D=E(1911);class Y{constructor(n){n=n||{},this.geometry_=null,this.geometryFunction_=f,void 0!==n.geometry&&this.setGeometry(n.geometry),this.fill_=void 0!==n.fill?n.fill:null,this.image_=void 0!==n.image?n.image:null,this.renderer_=void 0!==n.renderer?n.renderer:null,this.hitDetectionRenderer_=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.stroke_=void 0!==n.stroke?n.stroke:null,this.text_=void 0!==n.text?n.text:null,this.zIndex_=n.zIndex}clone(){let n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new Y({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(n){this.renderer_=n}setHitDetectionRenderer(n){this.hitDetectionRenderer_=n}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(n){this.fill_=n}getImage(){return this.image_}setImage(n){this.image_=n}getStroke(){return this.stroke_}setStroke(n){this.stroke_=n}getText(){return this.text_}setText(n){this.text_=n}getZIndex(){return this.zIndex_}setGeometry(n){"function"==typeof n?this.geometryFunction_=n:"string"==typeof n?this.geometryFunction_=function(x){return x.get(n)}:n?void 0!==n&&(this.geometryFunction_=function(){return n}):this.geometryFunction_=f,this.geometry_=n}setZIndex(n){this.zIndex_=n}}function R(z){let n;if("function"==typeof z)n=z;else{let x;Array.isArray(z)?x=z:((0,D.h)("function"==typeof z.getZIndex,41),x=[z]),n=function(){return x}}return n}let ct=null;function U(z,n){if(!ct){const x=new Z.Z({color:"rgba(255,255,255,0.4)"}),i=new j.Z({color:"#3399CC",width:1.25});ct=[new Y({image:new N.Z({fill:x,stroke:i,radius:5}),fill:x,stroke:i})]}return ct}function G(){const z={},n=[255,255,255,1],x=[0,153,255,1];return z.Polygon=[new Y({fill:new Z.Z({color:[255,255,255,.5]})})],z.MultiPolygon=z.Polygon,z.LineString=[new Y({stroke:new j.Z({color:n,width:5})}),new Y({stroke:new j.Z({color:x,width:3})})],z.MultiLineString=z.LineString,z.Circle=z.Polygon.concat(z.LineString),z.Point=[new Y({image:new N.Z({radius:6,fill:new Z.Z({color:x}),stroke:new j.Z({color:n,width:1.5})}),zIndex:1/0})],z.MultiPoint=z.Point,z.GeometryCollection=z.Polygon.concat(z.LineString,z.Point),z}function f(z){return z.getGeometry()}const y=Y}}]);