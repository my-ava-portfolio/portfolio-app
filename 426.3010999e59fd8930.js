(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[426],{5625:(yt,rt,S)=>{"use strict";S.d(rt,{H:()=>j,p:()=>Y});var V=S(2687);const Y=V.FGq,j=V.TL5},2402:function(yt){yt.exports=function(){"use strict";function rt(i,c,y,C,s){!function u(r,o,w,O,F){for(;O>w;){if(O-w>600){var M=O-w+1,A=o-w+1,_=Math.log(M),R=.5*Math.exp(2*_/3),P=.5*Math.sqrt(_*R*(M-R)/M)*(A-M/2<0?-1:1);u(r,o,Math.max(w,Math.floor(o-A*R/M+P)),Math.min(O,Math.floor(o+(M-A)*R/M+P)),F)}var ot=r[o],H=w,at=O;for(S(r,w,o),F(r[O],ot)>0&&S(r,w,O);H<at;){for(S(r,H,at),H++,at--;F(r[H],ot)<0;)H++;for(;F(r[at],ot)>0;)at--}0===F(r[w],ot)?S(r,w,at):S(r,++at,O),at<=o&&(w=at+1),o<=at&&(O=at-1)}}(i,c,y||0,C||i.length-1,s||V)}function S(i,c,y){var C=i[c];i[c]=i[y],i[y]=C}function V(i,c){return i<c?-1:i>c?1:0}var Y=function(i){void 0===i&&(i=9),this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function j(i,c,y){if(!y)return c.indexOf(i);for(var C=0;C<c.length;C++)if(y(i,c[C]))return C;return-1}function D(i,c){Z(i,0,i.children.length,c,i)}function Z(i,c,y,C,s){s||(s=n(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var u=c;u<y;u++){var r=i.children[u];v(s,i.leaf?C(r):r)}return s}function v(i,c){return i.minX=Math.min(i.minX,c.minX),i.minY=Math.min(i.minY,c.minY),i.maxX=Math.max(i.maxX,c.maxX),i.maxY=Math.max(i.maxY,c.maxY),i}function ct(i,c){return i.minX-c.minX}function U(i,c){return i.minY-c.minY}function G(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function d(i){return i.maxX-i.minX+(i.maxY-i.minY)}function p(i,c){return i.minX<=c.minX&&i.minY<=c.minY&&c.maxX<=i.maxX&&c.maxY<=i.maxY}function z(i,c){return c.minX<=i.maxX&&c.minY<=i.maxY&&c.maxX>=i.minX&&c.maxY>=i.minY}function n(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(i,c,y,C,s){for(var u=[c,y];u.length;)if(!((y=u.pop())-(c=u.pop())<=C)){var r=c+Math.ceil((y-c)/C/2)*C;rt(i,r,c,y,s),u.push(c,r,r,y)}}return Y.prototype.all=function(){return this._all(this.data,[])},Y.prototype.search=function(i){var c=this.data,y=[];if(!z(i,c))return y;for(var C=this.toBBox,s=[];c;){for(var u=0;u<c.children.length;u++){var r=c.children[u],o=c.leaf?C(r):r;z(i,o)&&(c.leaf?y.push(r):p(i,o)?this._all(r,y):s.push(r))}c=s.pop()}return y},Y.prototype.collides=function(i){var c=this.data;if(!z(i,c))return!1;for(var y=[];c;){for(var C=0;C<c.children.length;C++){var s=c.children[C],u=c.leaf?this.toBBox(s):s;if(z(i,u)){if(c.leaf||p(i,u))return!0;y.push(s)}}c=y.pop()}return!1},Y.prototype.load=function(i){if(!i||!i.length)return this;if(i.length<this._minEntries){for(var c=0;c<i.length;c++)this.insert(i[c]);return this}var y=this._build(i.slice(),0,i.length-1,0);if(this.data.children.length)if(this.data.height===y.height)this._splitRoot(this.data,y);else{if(this.data.height<y.height){var C=this.data;this.data=y,y=C}this._insert(y,this.data.height-y.height-1,!0)}else this.data=y;return this},Y.prototype.insert=function(i){return i&&this._insert(i,this.data.height-1),this},Y.prototype.clear=function(){return this.data=n([]),this},Y.prototype.remove=function(i,c){if(!i)return this;for(var y,C,s,u=this.data,r=this.toBBox(i),o=[],w=[];u||o.length;){if(u||(u=o.pop(),C=o[o.length-1],y=w.pop(),s=!0),u.leaf){var O=j(i,u.children,c);if(-1!==O)return u.children.splice(O,1),o.push(u),this._condense(o),this}s||u.leaf||!p(u,r)?C?(y++,u=C.children[y],s=!1):u=null:(o.push(u),w.push(y),y=0,C=u,u=u.children[0])}return this},Y.prototype.toBBox=function(i){return i},Y.prototype.compareMinX=function(i,c){return i.minX-c.minX},Y.prototype.compareMinY=function(i,c){return i.minY-c.minY},Y.prototype.toJSON=function(){return this.data},Y.prototype.fromJSON=function(i){return this.data=i,this},Y.prototype._all=function(i,c){for(var y=[];i;)i.leaf?c.push.apply(c,i.children):y.push.apply(y,i.children),i=y.pop();return c},Y.prototype._build=function(i,c,y,C){var s,u=y-c+1,r=this._maxEntries;if(u<=r)return D(s=n(i.slice(c,y+1)),this.toBBox),s;C||(C=Math.ceil(Math.log(u)/Math.log(r)),r=Math.ceil(u/Math.pow(r,C-1))),(s=n([])).leaf=!1,s.height=C;var o=Math.ceil(u/r),w=o*Math.ceil(Math.sqrt(r));m(i,c,y,w,this.compareMinX);for(var O=c;O<=y;O+=w){var F=Math.min(O+w-1,y);m(i,O,F,o,this.compareMinY);for(var M=O;M<=F;M+=o){var A=Math.min(M+o-1,F);s.children.push(this._build(i,M,A,C-1))}}return D(s,this.toBBox),s},Y.prototype._chooseSubtree=function(i,c,y,C){for(;C.push(c),!c.leaf&&C.length-1!==y;){for(var s=1/0,u=1/0,r=void 0,o=0;o<c.children.length;o++){var w=c.children[o],O=G(w),F=(M=i,A=w,(Math.max(A.maxX,M.maxX)-Math.min(A.minX,M.minX))*(Math.max(A.maxY,M.maxY)-Math.min(A.minY,M.minY))-O);F<u?(u=F,s=O<s?O:s,r=w):F===u&&O<s&&(s=O,r=w)}c=r||c.children[0]}var M,A;return c},Y.prototype._insert=function(i,c,y){var C=y?i:this.toBBox(i),s=[],u=this._chooseSubtree(C,this.data,c,s);for(u.children.push(i),v(u,C);c>=0&&s[c].children.length>this._maxEntries;)this._split(s,c),c--;this._adjustParentBBoxes(C,s,c)},Y.prototype._split=function(i,c){var y=i[c],C=y.children.length,s=this._minEntries;this._chooseSplitAxis(y,s,C);var u=this._chooseSplitIndex(y,s,C),r=n(y.children.splice(u,y.children.length-u));r.height=y.height,r.leaf=y.leaf,D(y,this.toBBox),D(r,this.toBBox),c?i[c-1].children.push(r):this._splitRoot(y,r)},Y.prototype._splitRoot=function(i,c){this.data=n([i,c]),this.data.height=i.height+1,this.data.leaf=!1,D(this.data,this.toBBox)},Y.prototype._chooseSplitIndex=function(i,c,y){for(var C,s,u,r,o,w,O,F=1/0,M=1/0,A=c;A<=y-c;A++){var _=Z(i,0,A,this.toBBox),R=Z(i,A,y,this.toBBox),P=(s=_,u=R,void 0,void 0,void 0,void 0,r=Math.max(s.minX,u.minX),o=Math.max(s.minY,u.minY),w=Math.min(s.maxX,u.maxX),O=Math.min(s.maxY,u.maxY),Math.max(0,w-r)*Math.max(0,O-o)),N=G(_)+G(R);P<F?(F=P,C=A,M=N<M?N:M):P===F&&N<M&&(M=N,C=A)}return C||y-c},Y.prototype._chooseSplitAxis=function(i,c,y){var C=i.leaf?this.compareMinX:ct,s=i.leaf?this.compareMinY:U;this._allDistMargin(i,c,y,C)<this._allDistMargin(i,c,y,s)&&i.children.sort(C)},Y.prototype._allDistMargin=function(i,c,y,C){i.children.sort(C);for(var s=this.toBBox,u=Z(i,0,c,s),r=Z(i,y-c,y,s),o=d(u)+d(r),w=c;w<y-c;w++){var O=i.children[w];v(u,i.leaf?s(O):O),o+=d(u)}for(var F=y-c-1;F>=c;F--){var M=i.children[F];v(r,i.leaf?s(M):M),o+=d(r)}return o},Y.prototype._adjustParentBBoxes=function(i,c,y){for(var C=y;C>=0;C--)v(c[C],i)},Y.prototype._condense=function(i){for(var c=i.length-1,y=void 0;c>=0;c--)0===i[c].children.length?c>0?(y=i[c-1].children).splice(y.indexOf(i[c]),1):this.clear():D(i[c],this.toBBox)},Y}()},3171:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>ct});var V=S(3632),Y=S(9972),j=S(1911),D=S(1729);class Z extends V.Z{constructor(G){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),G&&("function"==typeof G.getSimplifiedGeometry?this.setGeometry(G):this.setProperties(G))}clone(){const G=new Z(this.hasProperties()?this.getProperties():null);G.setGeometryName(this.getGeometryName());const d=this.getGeometry();d&&G.setGeometry(d.clone());const p=this.getStyle();return p&&G.setStyle(p),G}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,D.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const G=this.getGeometry();G&&(this.geometryChangeKey_=(0,D.oL)(G,Y.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(G){this.set(this.geometryName_,G)}setStyle(G){this.style_=G,this.styleFunction_=G?function v(U){if("function"==typeof U)return U;let G;return Array.isArray(U)?G=U:((0,j.h)("function"==typeof U.getZIndex,41),G=[U]),function(){return G}}(G):void 0,this.changed()}setId(G){this.id_=G,this.changed()}setGeometryName(G){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=G,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const ct=Z},5813:(yt,rt,S)=>{"use strict";S.d(rt,{y:()=>Y});var V=S(3783);function Y(j){return Array.isArray(j)?(0,V.BB)(j):j}},3343:(yt,rt,S)=>{"use strict";function V(j,D,Z,v){let ct=j[D],U=j[D+1],G=0;for(let d=D+v;d<Z;d+=v){const p=j[d],z=j[d+1];G+=Math.sqrt((p-ct)*(p-ct)+(z-U)*(z-U)),ct=p,U=z}return G}S.d(rt,{W:()=>V})},6107:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>u});var V=S(4593),Y=S(2402),j=S(109),D=S(7392),Z=S(5044),v=S(9570),ct=S(8225),U=S(6785),G=S(1750);class p{constructor(o){this.font_=(o=o||{}).font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.scaleArray_=(0,G.Pq)(void 0!==o.scale?o.scale:1),this.text_=o.text,this.textAlign_=o.textAlign,this.justify_=o.justify,this.repeat_=o.repeat,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new Z.Z({color:"#333"}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:"point",this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding}clone(){const o=this.getScale();return new p({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(o)?o.slice():o,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(o){this.overflow_=o}setFont(o){this.font_=o}setMaxAngle(o){this.maxAngle_=o}setOffsetX(o){this.offsetX_=o}setOffsetY(o){this.offsetY_=o}setPlacement(o){this.placement_=o}setRepeat(o){this.repeat_=o}setRotateWithView(o){this.rotateWithView_=o}setFill(o){this.fill_=o}setRotation(o){this.rotation_=o}setScale(o){this.scale_=o,this.scaleArray_=(0,G.Pq)(void 0!==o?o:1)}setStroke(o){this.stroke_=o}setText(o){this.text_=o}setTextAlign(o){this.textAlign_=o}setJustify(o){this.justify_=o}setTextBaseline(o){this.textBaseline_=o}setBackgroundFill(o){this.backgroundFill_=o}setBackgroundStroke(o){this.backgroundStroke_=o}setPadding(o){this.padding_=o}}const z=p;function n(r){return new j.ZP({fill:m(r,""),stroke:i(r,""),text:c(r),image:y(r)})}function m(r,o){const w=r[o+"fill-color"];if(w)return new Z.Z({color:w})}function i(r,o){const w=r[o+"stroke-width"],O=r[o+"stroke-color"];if(w||O)return new U.Z({width:w,color:O,lineCap:r[o+"stroke-line-cap"],lineJoin:r[o+"stroke-line-join"],lineDash:r[o+"stroke-line-dash"],lineDashOffset:r[o+"stroke-line-dash-offset"],miterLimit:r[o+"stroke-miter-limit"]})}function c(r){const o=r["text-value"];return o?new z({text:o,font:r["text-font"],maxAngle:r["text-max-angle"],offsetX:r["text-offset-x"],offsetY:r["text-offset-y"],overflow:r["text-overflow"],placement:r["text-placement"],repeat:r["text-repeat"],scale:r["text-scale"],rotateWithView:r["text-rotate-with-view"],rotation:r["text-rotation"],textAlign:r["text-align"],justify:r["text-justify"],textBaseline:r["text-baseline"],padding:r["text-padding"],fill:m(r,"text-"),backgroundFill:m(r,"text-background-"),stroke:i(r,"text-"),backgroundStroke:i(r,"text-background-")}):void 0}function y(r){const o=r["icon-src"],w=r["icon-img"];if(o||w)return new v.Z({src:o,img:w,imgSize:r["icon-img-size"],anchor:r["icon-anchor"],anchorOrigin:r["icon-anchor-origin"],anchorXUnits:r["icon-anchor-x-units"],anchorYUnits:r["icon-anchor-y-units"],color:r["icon-color"],crossOrigin:r["icon-cross-origin"],offset:r["icon-offset"],displacement:r["icon-displacement"],opacity:r["icon-opacity"],scale:r["icon-scale"],width:r["icon-width"],height:r["icon-height"],rotation:r["icon-rotation"],rotateWithView:r["icon-rotate-with-view"],size:r["icon-size"],declutterMode:r["icon-declutter-mode"]});const O=r["shape-points"];if(O){const M="shape-";return new ct.Z({points:O,fill:m(r,M),stroke:i(r,M),radius:r["shape-radius"],radius1:r["shape-radius1"],radius2:r["shape-radius2"],angle:r["shape-angle"],displacement:r["shape-displacement"],rotation:r["shape-rotation"],rotateWithView:r["shape-rotate-with-view"],scale:r["shape-scale"],declutterMode:r["shape-declutter-mode"]})}const F=r["circle-radius"];if(F){const M="circle-";return new D.Z({radius:F,fill:m(r,M),stroke:i(r,M),displacement:r["circle-displacement"],scale:r["circle-scale"],rotation:r["circle-rotation"],rotateWithView:r["circle-rotate-with-view"],declutterMode:r["circle-declutter-mode"]})}}const u=class s extends V.Z{constructor(o){o=o||{};const w=Object.assign({},o);delete w.style,delete w.renderBuffer,delete w.updateWhileAnimating,delete w.updateWhileInteracting,super(w),this.declutter_=void 0!==o.declutter&&o.declutter,this.renderBuffer_=void 0!==o.renderBuffer?o.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(o.style),this.updateWhileAnimating_=void 0!==o.updateWhileAnimating&&o.updateWhileAnimating,this.updateWhileInteracting_=void 0!==o.updateWhileInteracting&&o.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(o){return super.getFeatures(o)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(o){o.declutterTree||(o.declutterTree=new Y(9)),this.getRenderer().renderDeclutter(o)}setRenderOrder(o){this.set("renderOrder",o)}setStyle(o){let w;if(void 0===o)w=j.yF;else if(null===o)w=null;else if("function"==typeof o)w=o;else if(o instanceof j.ZP)w=o;else if(Array.isArray(o)){const O=o.length,F=new Array(O);for(let M=0;M<O;++M){const A=o[M];F[M]=A instanceof j.ZP?A:n(A)}w=F}else w=n(o);this.style_=w,this.styleFunction_=null===o?void 0:(0,j.J$)(this.style_),this.changed()}}},7639:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>Y});const Y=class V{drawCustom(D,Z,v,ct){}drawGeometry(D){}setStyle(D){}drawCircle(D,Z){}drawFeature(D,Z){}drawGeometryCollection(D,Z){}drawLineString(D,Z){}drawMultiLineString(D,Z){}drawMultiPoint(D,Z){}drawMultiPolygon(D,Z){}drawPoint(D,Z){}drawPolygon(D,Z){}drawText(D,Z){}setFillStrokeStyle(D,Z){}setImageStyle(D,Z){}setTextStyle(D,Z){}}},3620:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>p});var V=S(7639),Y=S(5813),j=S(483),D=S(4686),Z=S(2456),v=S(760),ct=S(2156),U=S(874),G=S(2774);const p=class d extends V.Z{constructor(n,m,i,c,y,C,s){super(),this.context_=n,this.pixelRatio_=m,this.extent_=i,this.transform_=c,this.transformRotation_=c?(0,ct.FH)(Math.atan2(c[1],c[0]),10):0,this.viewRotation_=y,this.squaredTolerance_=C,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,j.Ue)()}drawImages_(n,m,i,c){if(!this.image_)return;const y=(0,U.vT)(n,m,i,c,this.transform_,this.pixelCoordinates_),C=this.context_,s=this.tmpLocalTransform_,u=C.globalAlpha;1!=this.imageOpacity_&&(C.globalAlpha=u*this.imageOpacity_);let r=this.imageRotation_;0===this.transformRotation_&&(r-=this.viewRotation_),this.imageRotateWithView_&&(r+=this.viewRotation_);for(let o=0,w=y.length;o<w;o+=2){const O=y[o]-this.imageAnchorX_,F=y[o+1]-this.imageAnchorY_;if(0!==r||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const M=O+this.imageAnchorX_,A=F+this.imageAnchorY_;(0,j.qC)(s,M,A,1,1,r,-M,-A),C.setTransform.apply(C,s),C.translate(M,A),C.scale(this.imageScale_[0],this.imageScale_[1]),C.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),C.setTransform(1,0,0,1,0,0)}else C.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,O,F,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(C.globalAlpha=u)}drawText_(n,m,i,c){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const y=(0,U.vT)(n,m,i,c,this.transform_,this.pixelCoordinates_),C=this.context_;let s=this.textRotation_;for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);m<i;m+=c){const u=y[m]+this.textOffsetX_,r=y[m+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(C.translate(u-this.textOffsetX_,r-this.textOffsetY_),C.rotate(s),C.translate(this.textOffsetX_,this.textOffsetY_),C.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&C.strokeText(this.text_,0,0),this.textFillState_&&C.fillText(this.text_,0,0),C.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&C.strokeText(this.text_,u,r),this.textFillState_&&C.fillText(this.text_,u,r))}}moveToLineTo_(n,m,i,c,y){const C=this.context_,s=(0,U.vT)(n,m,i,c,this.transform_,this.pixelCoordinates_);C.moveTo(s[0],s[1]);let u=s.length;y&&(u-=2);for(let r=2;r<u;r+=2)C.lineTo(s[r],s[r+1]);return y&&C.closePath(),i}drawRings_(n,m,i,c){for(let y=0,C=i.length;y<C;++y)m=this.moveToLineTo_(n,m,i[y],c,!0);return m}drawCircle(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,n.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const m=(0,G.Kr)(n,this.transform_,this.pixelCoordinates_),i=m[2]-m[0],c=m[3]-m[1],y=Math.sqrt(i*i+c*c),C=this.context_;C.beginPath(),C.arc(m[0],m[1],y,0,2*Math.PI),this.fillState_&&C.fill(),this.strokeState_&&C.stroke()}""!==this.text_&&this.drawText_(n.getCenter(),0,2,2)}}setStyle(n){this.setFillStrokeStyle(n.getFill(),n.getStroke()),this.setImageStyle(n.getImage()),this.setTextStyle(n.getText())}setTransform(n){this.transform_=n}drawGeometry(n){switch(n.getType()){case"Point":this.drawPoint(n);break;case"LineString":this.drawLineString(n);break;case"Polygon":this.drawPolygon(n);break;case"MultiPoint":this.drawMultiPoint(n);break;case"MultiLineString":this.drawMultiLineString(n);break;case"MultiPolygon":this.drawMultiPolygon(n);break;case"GeometryCollection":this.drawGeometryCollection(n);break;case"Circle":this.drawCircle(n)}}drawFeature(n,m){const i=m.getGeometryFunction()(n);i&&(this.setStyle(m),this.drawGeometry(i))}drawGeometryCollection(n){const m=n.getGeometriesArray();for(let i=0,c=m.length;i<c;++i)this.drawGeometry(m[i])}drawPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const m=n.getFlatCoordinates(),i=n.getStride();this.image_&&this.drawImages_(m,0,m.length,i),""!==this.text_&&this.drawText_(m,0,m.length,i)}drawMultiPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const m=n.getFlatCoordinates(),i=n.getStride();this.image_&&this.drawImages_(m,0,m.length,i),""!==this.text_&&this.drawText_(m,0,m.length,i)}drawLineString(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,n.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const m=this.context_,i=n.getFlatCoordinates();m.beginPath(),this.moveToLineTo_(i,0,i.length,n.getStride(),!1),m.stroke()}if(""!==this.text_){const m=n.getFlatMidpoint();this.drawText_(m,0,2,2)}}}drawMultiLineString(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const m=n.getExtent();if((0,v.kK)(this.extent_,m)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,c=n.getFlatCoordinates();let y=0;const C=n.getEnds(),s=n.getStride();i.beginPath();for(let u=0,r=C.length;u<r;++u)y=this.moveToLineTo_(c,y,C[u],s,!1);i.stroke()}if(""!==this.text_){const i=n.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const m=this.context_;m.beginPath(),this.drawRings_(n.getOrientedFlatCoordinates(),0,n.getEnds(),n.getStride()),this.fillState_&&m.fill(),this.strokeState_&&m.stroke()}if(""!==this.text_){const m=n.getFlatInteriorPoint();this.drawText_(m,0,2,2)}}}drawMultiPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,v.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const m=this.context_,i=n.getOrientedFlatCoordinates();let c=0;const y=n.getEndss(),C=n.getStride();m.beginPath();for(let s=0,u=y.length;s<u;++s)c=this.drawRings_(i,c,y[s],C);this.fillState_&&m.fill(),this.strokeState_&&m.stroke()}if(""!==this.text_){const m=n.getFlatInteriorPoints();this.drawText_(m,0,m.length,2)}}}setContextFillState_(n){const m=this.context_,i=this.contextFillState_;i?i.fillStyle!=n.fillStyle&&(i.fillStyle=n.fillStyle,m.fillStyle=n.fillStyle):(m.fillStyle=n.fillStyle,this.contextFillState_={fillStyle:n.fillStyle})}setContextStrokeState_(n){const m=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=n.lineCap&&(i.lineCap=n.lineCap,m.lineCap=n.lineCap),(0,Z.fS)(i.lineDash,n.lineDash)||m.setLineDash(i.lineDash=n.lineDash),i.lineDashOffset!=n.lineDashOffset&&(i.lineDashOffset=n.lineDashOffset,m.lineDashOffset=n.lineDashOffset),i.lineJoin!=n.lineJoin&&(i.lineJoin=n.lineJoin,m.lineJoin=n.lineJoin),i.lineWidth!=n.lineWidth&&(i.lineWidth=n.lineWidth,m.lineWidth=n.lineWidth),i.miterLimit!=n.miterLimit&&(i.miterLimit=n.miterLimit,m.miterLimit=n.miterLimit),i.strokeStyle!=n.strokeStyle&&(i.strokeStyle=n.strokeStyle,m.strokeStyle=n.strokeStyle)):(m.lineCap=n.lineCap,m.setLineDash(n.lineDash),m.lineDashOffset=n.lineDashOffset,m.lineJoin=n.lineJoin,m.lineWidth=n.lineWidth,m.miterLimit=n.miterLimit,m.strokeStyle=n.strokeStyle,this.contextStrokeState_={lineCap:n.lineCap,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset,lineJoin:n.lineJoin,lineWidth:n.lineWidth,miterLimit:n.miterLimit,strokeStyle:n.strokeStyle})}setContextTextState_(n){const m=this.context_,i=this.contextTextState_,c=n.textAlign?n.textAlign:D.PH;i?(i.font!=n.font&&(i.font=n.font,m.font=n.font),i.textAlign!=c&&(i.textAlign=c,m.textAlign=c),i.textBaseline!=n.textBaseline&&(i.textBaseline=n.textBaseline,m.textBaseline=n.textBaseline)):(m.font=n.font,m.textAlign=c,m.textBaseline=n.textBaseline,this.contextTextState_={font:n.font,textAlign:c,textBaseline:n.textBaseline})}setFillStrokeStyle(n,m){if(n){const i=n.getColor();this.fillState_={fillStyle:(0,Y.y)(i||D.bL)}}else this.fillState_=null;if(m){const i=m.getColor(),c=m.getLineCap(),y=m.getLineDash(),C=m.getLineDashOffset(),s=m.getLineJoin(),u=m.getWidth(),r=m.getMiterLimit(),o=y||D.X9;this.strokeState_={lineCap:void 0!==c?c:D.mb,lineDash:1===this.pixelRatio_?o:o.map(w=>w*this.pixelRatio_),lineDashOffset:(C||D.He)*this.pixelRatio_,lineJoin:void 0!==s?s:D.rc,lineWidth:(void 0!==u?u:D.yC)*this.pixelRatio_,miterLimit:void 0!==r?r:D.V4,strokeStyle:(0,Y.y)(i||D.Tx)}}else this.strokeState_=null}setImageStyle(n){let m;if(!n||!(m=n.getSize()))return void(this.image_=null);const i=n.getPixelRatio(this.pixelRatio_),c=n.getAnchor(),y=n.getOrigin();this.image_=n.getImage(this.pixelRatio_),this.imageAnchorX_=c[0]*i,this.imageAnchorY_=c[1]*i,this.imageHeight_=m[1]*i,this.imageOpacity_=n.getOpacity(),this.imageOriginX_=y[0],this.imageOriginY_=y[1],this.imageRotateWithView_=n.getRotateWithView(),this.imageRotation_=n.getRotation();const C=n.getScaleArray();this.imageScale_=[C[0]*this.pixelRatio_/i,C[1]*this.pixelRatio_/i],this.imageWidth_=m[0]*i}setTextStyle(n){if(n){const m=n.getFill();if(m){const F=m.getColor();this.textFillState_={fillStyle:(0,Y.y)(F||D.bL)}}else this.textFillState_=null;const i=n.getStroke();if(i){const F=i.getColor(),M=i.getLineCap(),A=i.getLineDash(),_=i.getLineDashOffset(),R=i.getLineJoin(),P=i.getWidth(),N=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==M?M:D.mb,lineDash:A||D.X9,lineDashOffset:_||D.He,lineJoin:void 0!==R?R:D.rc,lineWidth:void 0!==P?P:D.yC,miterLimit:void 0!==N?N:D.V4,strokeStyle:(0,Y.y)(F||D.Tx)}}else this.textStrokeState_=null;const c=n.getFont(),y=n.getOffsetX(),C=n.getOffsetY(),s=n.getRotateWithView(),u=n.getRotation(),r=n.getScaleArray(),o=n.getText(),w=n.getTextAlign(),O=n.getTextBaseline();this.textState_={font:void 0!==c?c:D.Df,textAlign:void 0!==w?w:D.PH,textBaseline:void 0!==O?O:D.ru},this.text_=void 0!==o?Array.isArray(o)?o.reduce((F,M,A)=>F+(A%2?" ":M),""):o:"",this.textOffsetX_=void 0!==y?this.pixelRatio_*y:0,this.textOffsetY_=void 0!==C?this.pixelRatio_*C:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==u?u:0,this.textScale_=[this.pixelRatio_*r[0],this.pixelRatio_*r[1]]}else this.text_=""}}},5695:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>Xe});const V={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Y=[V.FILL],j=[V.STROKE],D=[V.BEGIN_PATH],Z=[V.CLOSE_PATH],v=V;var ct=S(2401),U=S(7639),G=S(5813),d=S(760),p=S(4686),z=S(2456),n=S(392);const i=class m extends U.Z{constructor(t,a,e,h){super(),this.tolerance=t,this.maxExtent=a,this.pixelRatio=h,this.maxLineWidth=0,this.resolution=e,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const a=this.pixelRatio;return 1==a?t:t.map(function(e){return e*a})}appendFlatPointCoordinates(t,a){const e=this.getBufferedMaxExtent(),h=this.tmpCoordinate_,l=this.coordinates;let g=l.length;for(let f=0,x=t.length;f<x;f+=a)h[0]=t[f],h[1]=t[f+1],(0,d.b8)(e,h)&&(l[g++]=h[0],l[g++]=h[1]);return g}appendFlatLineCoordinates(t,a,e,h,l,g){const f=this.coordinates;let x=f.length;const E=this.getBufferedMaxExtent();g&&(a+=h);let I=t[a],L=t[a+1];const T=this.tmpCoordinate_;let B,X,k,W=!0;for(B=a+h;B<e;B+=h)T[0]=t[B],T[1]=t[B+1],k=(0,d.pX)(E,T),k!==X?(W&&(f[x++]=I,f[x++]=L,W=!1),f[x++]=T[0],f[x++]=T[1]):k===ct.Z.INTERSECTING?(f[x++]=T[0],f[x++]=T[1],W=!1):W=!0,I=T[0],L=T[1],X=k;return(l&&W||B===a+h)&&(f[x++]=I,f[x++]=L),x}drawCustomCoordinates_(t,a,e,h,l){for(let g=0,f=e.length;g<f;++g){const x=e[g],E=this.appendFlatLineCoordinates(t,a,x,h,!1,!1);l.push(E),a=x}return a}drawCustom(t,a,e,h){this.beginGeometry(t,a);const l=t.getType(),g=t.getStride(),f=this.coordinates.length;let x,E,I,L,T;switch(l){case"MultiPolygon":x=t.getOrientedFlatCoordinates(),L=[];const W=t.getEndss();T=0;for(let B=0,X=W.length;B<X;++B){const k=[];T=this.drawCustomCoordinates_(x,T,W[B],g,k),L.push(k)}this.instructions.push([v.CUSTOM,f,L,t,e,n.ug]),this.hitDetectionInstructions.push([v.CUSTOM,f,L,t,h||e,n.ug]);break;case"Polygon":case"MultiLineString":I=[],x="Polygon"==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),T=this.drawCustomCoordinates_(x,0,t.getEnds(),g,I),this.instructions.push([v.CUSTOM,f,I,t,e,n.o1]),this.hitDetectionInstructions.push([v.CUSTOM,f,I,t,h||e,n.o1]);break;case"LineString":case"Circle":x=t.getFlatCoordinates(),E=this.appendFlatLineCoordinates(x,0,x.length,g,!1,!1),this.instructions.push([v.CUSTOM,f,E,t,e,n.Ml]),this.hitDetectionInstructions.push([v.CUSTOM,f,E,t,h||e,n.Ml]);break;case"MultiPoint":x=t.getFlatCoordinates(),E=this.appendFlatPointCoordinates(x,g),E>f&&(this.instructions.push([v.CUSTOM,f,E,t,e,n.Ml]),this.hitDetectionInstructions.push([v.CUSTOM,f,E,t,h||e,n.Ml]));break;case"Point":x=t.getFlatCoordinates(),this.coordinates.push(x[0],x[1]),E=this.coordinates.length,this.instructions.push([v.CUSTOM,f,E,t,e]),this.hitDetectionInstructions.push([v.CUSTOM,f,E,t,h||e])}this.endGeometry(a)}beginGeometry(t,a){this.beginGeometryInstruction1_=[v.BEGIN_GEOMETRY,a,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[v.BEGIN_GEOMETRY,a,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let a;t.reverse();const e=t.length;let h,l,g=-1;for(a=0;a<e;++a)h=t[a],l=h[0],l==v.END_GEOMETRY?g=a:l==v.BEGIN_GEOMETRY&&(h[2]=a,(0,z.FZ)(this.hitDetectionInstructions,g,a),g=-1)}setFillStrokeStyle(t,a){const e=this.state;if(t){const h=t.getColor();e.fillStyle=(0,G.y)(h||p.bL)}else e.fillStyle=void 0;if(a){const h=a.getColor();e.strokeStyle=(0,G.y)(h||p.Tx);const l=a.getLineCap();e.lineCap=void 0!==l?l:p.mb;const g=a.getLineDash();e.lineDash=g?g.slice():p.X9;const f=a.getLineDashOffset();e.lineDashOffset=f||p.He;const x=a.getLineJoin();e.lineJoin=void 0!==x?x:p.rc;const E=a.getWidth();e.lineWidth=void 0!==E?E:p.yC;const I=a.getMiterLimit();e.miterLimit=void 0!==I?I:p.V4,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0}createFill(t){const a=t.fillStyle,e=[v.SET_FILL_STYLE,a];return"string"!=typeof a&&e.push(!0),e}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[v.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,a){const e=t.fillStyle;("string"!=typeof e||t.currentFillStyle!=e)&&(void 0!==e&&this.instructions.push(a.call(this,t)),t.currentFillStyle=e)}updateStrokeStyle(t,a){const e=t.strokeStyle,h=t.lineCap,l=t.lineDash,g=t.lineDashOffset,f=t.lineJoin,x=t.lineWidth,E=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=h||l!=t.currentLineDash&&!(0,z.fS)(t.currentLineDash,l)||t.currentLineDashOffset!=g||t.currentLineJoin!=f||t.currentLineWidth!=x||t.currentMiterLimit!=E)&&(void 0!==e&&a.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=h,t.currentLineDash=l,t.currentLineDashOffset=g,t.currentLineJoin=f,t.currentLineWidth=x,t.currentMiterLimit=E)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const a=[v.END_GEOMETRY,t];this.instructions.push(a),this.hitDetectionInstructions.push(a)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,d.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,d.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var u=S(9182);const o=class r extends i{constructor(t,a,e,h){super(t,a,e,h)}drawFlatCoordinatess_(t,a,e,h){const l=this.state,g=void 0!==l.fillStyle,f=void 0!==l.strokeStyle,x=e.length;this.instructions.push(D),this.hitDetectionInstructions.push(D);for(let E=0;E<x;++E){const I=e[E],L=this.coordinates.length,T=this.appendFlatLineCoordinates(t,a,I,h,!0,!f),W=[v.MOVE_TO_LINE_TO,L,T];this.instructions.push(W),this.hitDetectionInstructions.push(W),f&&(this.instructions.push(Z),this.hitDetectionInstructions.push(Z)),a=I}return g&&(this.instructions.push(Y),this.hitDetectionInstructions.push(Y)),f&&(this.instructions.push(j),this.hitDetectionInstructions.push(j)),a}drawCircle(t,a){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,a),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([v.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const g=t.getFlatCoordinates(),f=t.getStride(),x=this.coordinates.length;this.appendFlatLineCoordinates(g,0,g.length,f,!1,!1);const E=[v.CIRCLE,x];this.instructions.push(D,E),this.hitDetectionInstructions.push(D,E),void 0!==e.fillStyle&&(this.instructions.push(Y),this.hitDetectionInstructions.push(Y)),void 0!==e.strokeStyle&&(this.instructions.push(j),this.hitDetectionInstructions.push(j)),this.endGeometry(a)}drawPolygon(t,a){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,a),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([v.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const g=t.getEnds(),f=t.getOrientedFlatCoordinates(),x=t.getStride();this.drawFlatCoordinatess_(f,0,g,x),this.endGeometry(a)}drawMultiPolygon(t,a){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,a),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([v.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const g=t.getEndss(),f=t.getOrientedFlatCoordinates(),x=t.getStride();let E=0;for(let I=0,L=g.length;I<L;++I)E=this.drawFlatCoordinatess_(f,E,g[I],x);this.endGeometry(a)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const a=this.coordinates;for(let e=0,h=a.length;e<h;++e)a[e]=(0,u.uZ)(a[e],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var w=S(119),O=S(2156);function F($,t,a,e,h){const l=[];let g=a,f=0,x=t.slice(a,2);for(;f<$&&g+h<e;){const[E,I]=x.slice(-2),L=t[g+h],T=t[g+h+1],W=Math.sqrt((L-E)*(L-E)+(T-I)*(T-I));if(f+=W,f>=$){const B=($-f+W)/W,X=(0,O.t7)(E,L,B),k=(0,O.t7)(I,T,B);x.push(X,k),l.push(x),x=[X,k],f==$&&(g+=h),f=0}else if(f<$)x.push(t[g+h],t[g+h+1]),g+=h;else{const B=W-f,X=(0,O.t7)(E,L,B/W),k=(0,O.t7)(I,T,B/W);x.push(X,k),l.push(x),x=[X,k],f=0,g+=h}}return f>0&&l.push(x),l}function M($,t,a,e,h){let I,L,T,W,B,X,k,b,J,Q,l=a,g=a,f=0,x=0,E=a;for(L=a;L<e;L+=h){const tt=t[L],q=t[L+1];void 0!==B&&(J=tt-B,Q=q-X,W=Math.sqrt(J*J+Q*Q),void 0!==k&&(x+=T,I=Math.acos((k*J+b*Q)/(T*W)),I>$&&(x>f&&(f=x,l=E,g=L),x=0,E=L-h)),T=W,k=J,b=Q),B=tt,X=q}return x+=W,x>f?[E,L]:[l,g]}const A={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},P={Circle:o,Default:i,Image:class c extends i{constructor(t,a,e,h){super(t,a,e,h),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,a){if(!this.image_)return;this.beginGeometry(t,a);const e=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length,g=this.appendFlatPointCoordinates(e,h);this.instructions.push([v.DRAW_IMAGE,l,g,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([v.DRAW_IMAGE,l,g,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}drawMultiPoint(t,a){if(!this.image_)return;this.beginGeometry(t,a);const e=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length,g=this.appendFlatPointCoordinates(e,h);this.instructions.push([v.DRAW_IMAGE,l,g,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([v.DRAW_IMAGE,l,g,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,a){const e=t.getAnchor(),h=t.getSize(),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=h[1],this.opacity_=t.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=h[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=a}},LineString:class C extends i{constructor(t,a,e,h){super(t,a,e,h)}drawFlatCoordinates_(t,a,e,h){const l=this.coordinates.length,g=this.appendFlatLineCoordinates(t,a,e,h,!1,!1),f=[v.MOVE_TO_LINE_TO,l,g];return this.instructions.push(f),this.hitDetectionInstructions.push(f),e}drawLineString(t,a){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,a),this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,p.X9,p.He],D);const g=t.getFlatCoordinates(),f=t.getStride();this.drawFlatCoordinates_(g,0,g.length,f),this.hitDetectionInstructions.push(j),this.endGeometry(a)}drawMultiLineString(t,a){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,a),this.hitDetectionInstructions.push([v.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],D);const g=t.getEnds(),f=t.getFlatCoordinates(),x=t.getStride();let E=0;for(let I=0,L=g.length;I<L;++I)E=this.drawFlatCoordinates_(f,E,g[I],x);this.hitDetectionInstructions.push(j),this.endGeometry(a)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(j),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(j),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(D)}},Polygon:o,Text:class _ extends i{constructor(t,a,e,h){super(t,a,e,h),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,a){const l=this.textState_;if(""===this.text_||!l||!this.textFillState_&&!this.textStrokeState_)return;const g=this.coordinates;let f=g.length;const x=t.getType();let E=null,I=t.getStride();if("line"!==l.placement||"LineString"!=x&&"MultiLineString"!=x&&"Polygon"!=x&&"MultiPolygon"!=x){let L=l.overflow?null:[];switch(x){case"Point":case"MultiPoint":E=t.getFlatCoordinates();break;case"LineString":E=t.getFlatMidpoint();break;case"Circle":E=t.getCenter();break;case"MultiLineString":E=t.getFlatMidpoints(),I=2;break;case"Polygon":E=t.getFlatInteriorPoint(),l.overflow||L.push(E[2]/this.resolution),I=3;break;case"MultiPolygon":const k=t.getFlatInteriorPoints();E=[];for(let b=0,J=k.length;b<J;b+=3)l.overflow||L.push(k[b+2]/this.resolution),E.push(k[b],k[b+1]);if(0===E.length)return;I=2}const T=this.appendFlatPointCoordinates(E,I);if(T===f)return;if(L&&(T-f)/2!=E.length/I){let k=f/2;L=L.filter((b,J)=>{const Q=g[2*(k+J)]===E[J*I]&&g[2*(k+J)+1]===E[J*I+1];return Q||--k,Q})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,a);let W=l.padding;if(W!=p.oB&&(l.scale[0]<0||l.scale[1]<0)){let k=l.padding[0],b=l.padding[1],J=l.padding[2],Q=l.padding[3];l.scale[0]<0&&(b=-b,Q=-Q),l.scale[1]<0&&(k=-k,J=-J),W=[k,b,J,Q]}const B=this.pixelRatio;this.instructions.push([v.DRAW_IMAGE,f,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,W==p.oB?p.oB:W.map(function(k){return k*B}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,L]);const X=1/B;this.hitDetectionInstructions.push([v.DRAW_IMAGE,f,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[X,X],NaN,void 0,this.declutterImageWithText_,W,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,L]),this.endGeometry(a)}else{if(!(0,d.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let L;if(E=t.getFlatCoordinates(),"LineString"==x)L=[E.length];else if("MultiLineString"==x)L=t.getEnds();else if("Polygon"==x)L=t.getEnds().slice(0,1);else if("MultiPolygon"==x){const X=t.getEndss();L=[];for(let k=0,b=X.length;k<b;++k)L.push(X[k][0])}this.beginGeometry(t,a);const T=l.repeat,W=T?void 0:l.textAlign;let B=0;for(let X=0,k=L.length;X<k;++X){let b;b=T?F(T*this.resolution,E,B,L[X],I):[E.slice(B,L[X])];for(let J=0,Q=b.length;J<Q;++J){const tt=b[J];let q=0,ht=tt.length;if(null==W){const nt=M(l.maxAngle,tt,0,tt.length,2);q=nt[0],ht=nt[1]}for(let nt=q;nt<ht;nt+=I)g.push(tt[nt],tt[nt+1]);const dt=g.length;B=L[X],this.drawChars_(f,dt),f=dt}}this.endGeometry(a)}}saveTextStates_(){const t=this.textStrokeState_,a=this.textState_,e=this.textFillState_,h=this.strokeKey_;t&&(h in this.strokeStates||(this.strokeStates[h]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:a.font,textAlign:a.textAlign||p.PH,justify:a.justify,textBaseline:a.textBaseline||p.ru,scale:a.scale});const g=this.fillKey_;e&&(g in this.fillStates||(this.fillStates[g]={fillStyle:e.fillStyle}))}drawChars_(t,a){const e=this.textStrokeState_,h=this.textState_,l=this.strokeKey_,g=this.textKey_,f=this.fillKey_;this.saveTextStates_();const x=this.pixelRatio,E=A[h.textBaseline],I=this.textOffsetY_*x,L=this.text_,T=e?e.lineWidth*Math.abs(h.scale[0])/2:0;this.instructions.push([v.DRAW_CHARS,t,a,E,h.overflow,f,h.maxAngle,x,I,l,T*x,L,g,1]),this.hitDetectionInstructions.push([v.DRAW_CHARS,t,a,E,h.overflow,f,h.maxAngle,1,I,l,T,L,g,1/x])}setTextStyle(t,a){let e,h,l;if(t){const g=t.getFill();g?(h=this.textFillState_,h||(h={},this.textFillState_=h),h.fillStyle=(0,G.y)(g.getColor()||p.bL)):(h=null,this.textFillState_=h);const f=t.getStroke();if(f){l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const B=f.getLineDash(),X=f.getLineDashOffset(),k=f.getWidth(),b=f.getMiterLimit();l.lineCap=f.getLineCap()||p.mb,l.lineDash=B?B.slice():p.X9,l.lineDashOffset=void 0===X?p.He:X,l.lineJoin=f.getLineJoin()||p.rc,l.lineWidth=void 0===k?p.yC:k,l.miterLimit=void 0===b?p.V4:b,l.strokeStyle=(0,G.y)(f.getColor()||p.Tx)}else l=null,this.textStrokeState_=l;e=this.textState_;const x=t.getFont()||p.Df;(0,p.Qx)(x);const E=t.getScaleArray();e.overflow=t.getOverflow(),e.font=x,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.repeat=t.getRepeat(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||p.ru,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||p.oB,e.scale=void 0===E?[1,1]:E;const I=t.getOffsetX(),L=t.getOffsetY(),T=t.getRotateWithView(),W=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===I?0:I,this.textOffsetY_=void 0===L?0:L,this.textRotateWithView_=void 0!==T&&T,this.textRotation_=void 0===W?0:W,this.strokeKey_=l?("string"==typeof l.strokeStyle?l.strokeStyle:(0,w.sq)(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.repeat||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=h?"string"==typeof h.fillStyle?h.fillStyle:"|"+(0,w.sq)(h.fillStyle):""}else this.text_="";this.declutterImageWithText_=a}}},st=class N{constructor(t,a,e,h){this.tolerance_=t,this.maxExtent_=a,this.pixelRatio_=h,this.resolution_=e,this.buildersByZIndex_={}}finish(){const t={};for(const a in this.buildersByZIndex_){t[a]=t[a]||{};const e=this.buildersByZIndex_[a];for(const h in e){const l=e[h].finish();t[a][h]=l}}return t}getBuilder(t,a){const e=void 0!==t?t.toString():"0";let h=this.buildersByZIndex_[e];void 0===h&&(h={},this.buildersByZIndex_[e]=h);let l=h[a];return void 0===l&&(l=new(0,P[a])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),h[a]=l),l}};var ot=S(2121),H=S(483),at=S(874);function It($,t,a,e,h,l,g,f,x,E,I,L){let T=$[t],W=$[t+1],B=0,X=0,k=0,b=0;function J(){B=T,X=W,T=$[t+=e],W=$[t+1],b+=k,k=Math.sqrt((T-B)*(T-B)+(W-X)*(W-X))}do{J()}while(t<a-e&&b+k<l);let Q=0===k?0:(l-b)/k;const tt=(0,O.t7)(B,T,Q),q=(0,O.t7)(X,W,Q),ht=t-e,dt=b,nt=l+f*x(E,h,I);for(;t<a-e&&b+k<nt;)J();Q=0===k?0:(nt-b)/k;const ut=(0,O.t7)(B,T,Q),gt=(0,O.t7)(X,W,Q);let pt;if(L){const et=[tt,q,ut,gt];(0,at.U1)(et,0,4,2,L,et,et),pt=et[0]>et[2]}else pt=tt>ut;const mt=Math.PI,ft=[],Tt=ht+e===t;let _t;if(k=0,b=dt,T=$[t=ht],W=$[t+1],Tt)return J(),_t=Math.atan2(W-X,T-B),pt&&(_t+=_t>0?-mt:mt),ft[0]=[(ut+tt)/2,(gt+q)/2,(nt-l)/2,_t,h],ft;for(let et=0,lt=(h=h.replace(/\n/g," ")).length;et<lt;){J();let it=Math.atan2(W-X,T-B);if(pt&&(it+=it>0?-mt:mt),void 0!==_t){let At=it-_t;if(At+=At>mt?-2*mt:At<-mt?2*mt:0,Math.abs(At)>g)return null}_t=it;const xt=et;let Et=0;for(;et<lt;++et){const Yt=f*x(E,h[pt?lt-et-1:et],I);if(t+e<a&&b+k<l+Et+Yt/2)break;Et+=Yt}if(et===xt)continue;const wt=pt?h.substring(lt-xt,lt-et):h.substring(xt,et);Q=0===k?0:(l+Et/2-b)/k;const K=(0,O.t7)(B,T,Q),fe=(0,O.t7)(X,W,Q);ft.push([K,fe,Et/2,it,wt]),l+=Et}return ft}var St=S(3343);const Bt=(0,d.lJ)(),Rt=[],kt=[],Ft=[],bt=[];function ce($){return $[3].declutterBox}const ve=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function de($,t){return("start"===t||"end"===t)&&!ve.test($)&&(t="start"===t?"left":"right"),A[t]}function Oe($,t,a){return a>0&&$.push("\n",""),$.push(t,""),$}const Me=class Le{constructor(t,a,e,h){this.overlaps=e,this.pixelRatio=a,this.resolution=t,this.instructions=h.instructions,this.coordinates=h.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,H.Ue)(),this.hitDetectionInstructions=h.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=h.fillStates||{},this.strokeStates=h.strokeStates||{},this.textStates=h.textStates||{},this.widths_={},this.labels_={}}createLabel(t,a,e,h){const l=t+a+e+h;if(this.labels_[l])return this.labels_[l];const g=h?this.strokeStates[h]:null,f=e?this.fillStates[e]:null,x=this.textStates[a],E=this.pixelRatio,I=[x.scale[0]*E,x.scale[1]*E],L=Array.isArray(t),T=x.justify?A[x.justify]:de(Array.isArray(t)?t[0]:t,x.textAlign||p.PH),W=h&&g.lineWidth?g.lineWidth:0,B=L?t:t.split("\n").reduce(Oe,[]),{width:X,height:k,widths:b,heights:J,lineWidths:Q}=(0,p.Zw)(x,B),tt=X+W,q=[],ht=(tt+2)*I[0],dt=(k+W)*I[1],nt={width:ht<0?Math.floor(ht):Math.ceil(ht),height:dt<0?Math.floor(dt):Math.ceil(dt),contextInstructions:q};(1!=I[0]||1!=I[1])&&q.push("scale",I),h&&(q.push("strokeStyle",g.strokeStyle),q.push("lineWidth",W),q.push("lineCap",g.lineCap),q.push("lineJoin",g.lineJoin),q.push("miterLimit",g.miterLimit),q.push("setLineDash",[g.lineDash]),q.push("lineDashOffset",g.lineDashOffset)),e&&q.push("fillStyle",f.fillStyle),q.push("textBaseline","middle"),q.push("textAlign","center");const ut=.5-T;let gt=T*tt+ut*W;const pt=[],mt=[];let lt,ft=0,Tt=0,_t=0,et=0;for(let it=0,xt=B.length;it<xt;it+=2){const Et=B[it];if("\n"===Et){Tt+=ft,ft=0,gt=T*tt+ut*W,++et;continue}const wt=B[it+1]||x.font;wt!==lt&&(h&&pt.push("font",wt),e&&mt.push("font",wt),lt=wt),ft=Math.max(ft,J[_t]);const K=[Et,gt+ut*b[_t]+T*(b[_t]-Q[et]),.5*(W+ft)+Tt];gt+=b[_t],h&&pt.push("strokeText",K),e&&mt.push("fillText",K),++_t}return Array.prototype.push.apply(q,pt),Array.prototype.push.apply(q,mt),this.labels_[l]=nt,nt}replayTextBackground_(t,a,e,h,l,g,f){t.beginPath(),t.moveTo.apply(t,a),t.lineTo.apply(t,e),t.lineTo.apply(t,h),t.lineTo.apply(t,l),t.lineTo.apply(t,a),g&&(this.alignFill_=g[2],this.fill_(t)),f&&(this.setStrokeStyle_(t,f),t.stroke())}calculateImageOrLabelDimensions_(t,a,e,h,l,g,f,x,E,I,L,T,W,B,X,k){let b=e-(f*=T[0]),J=h-(x*=T[1]);const Q=l+E>t?t-E:l,tt=g+I>a?a-I:g,q=B[3]+Q*T[0]+B[1],ht=B[0]+tt*T[1]+B[2],dt=b-B[3],nt=J-B[0];let ut;return(X||0!==L)&&(Rt[0]=dt,bt[0]=dt,Rt[1]=nt,kt[1]=nt,kt[0]=dt+q,Ft[0]=kt[0],Ft[1]=nt+ht,bt[1]=Ft[1]),0!==L?(ut=(0,H.qC)((0,H.Ue)(),e,h,1,1,L,-e,-h),(0,H.nn)(ut,Rt),(0,H.nn)(ut,kt),(0,H.nn)(ut,Ft),(0,H.nn)(ut,bt),(0,d.T9)(Math.min(Rt[0],kt[0],Ft[0],bt[0]),Math.min(Rt[1],kt[1],Ft[1],bt[1]),Math.max(Rt[0],kt[0],Ft[0],bt[0]),Math.max(Rt[1],kt[1],Ft[1],bt[1]),Bt)):(0,d.T9)(Math.min(dt,dt+q),Math.min(nt,nt+ht),Math.max(dt,dt+q),Math.max(nt,nt+ht),Bt),W&&(b=Math.round(b),J=Math.round(J)),{drawImageX:b,drawImageY:J,drawImageW:Q,drawImageH:tt,originX:E,originY:I,declutterBox:{minX:Bt[0],minY:Bt[1],maxX:Bt[2],maxY:Bt[3],value:k},canvasTransform:ut,scale:T}}replayImageOrLabel_(t,a,e,h,l,g,f){const E=h.declutterBox,I=t.canvas,L=f?f[2]*h.scale[0]/2:0;return E.minX-L<=I.width/a&&E.maxX+L>=0&&E.minY-L<=I.height/a&&E.maxY+L>=0&&(!(!g&&!f)&&this.replayTextBackground_(t,Rt,kt,Ft,bt,g,f),(0,p._f)(t,h.canvasTransform,l,e,h.originX,h.originY,h.drawImageW,h.drawImageH,h.drawImageX,h.drawImageY,h.scale)),!0}fill_(t){if(this.alignFill_){const a=(0,H.nn)(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(a[0]%e,a[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,a){t.strokeStyle=a[1],t.lineWidth=a[2],t.lineCap=a[3],t.lineJoin=a[4],t.miterLimit=a[5],t.lineDashOffset=a[7],t.setLineDash(a[6])}drawLabelWithPointPlacement_(t,a,e,h){const l=this.textStates[a],g=this.createLabel(t,a,h,e),f=this.strokeStates[e],x=this.pixelRatio,E=de(Array.isArray(t)?t[0]:t,l.textAlign||p.PH),I=A[l.textBaseline||p.ru],L=f&&f.lineWidth?f.lineWidth:0;return{label:g,anchorX:E*(g.width/x-2*l.scale[0])+2*(.5-E)*L,anchorY:I*g.height/x+2*(.5-I)*L}}execute_(t,a,e,h,l,g,f,x){let E;this.pixelCoordinates_&&(0,z.fS)(e,this.renderedTransform_)?E=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),E=(0,at.vT)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,H.lk)(this.renderedTransform_,e));let I=0;const L=h.length;let W,B,X,k,b,J,Q,tt,q,ht,dt,nt,T=0,ut=0,gt=0,pt=null,mt=null;const ft=this.coordinateCache_,Tt=this.viewRotation_,_t=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,et={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Tt},lt=this.instructions!=h||this.overlaps?0:200;let it,xt,Et,wt;for(;I<L;){const K=h[I];switch(K[0]){case v.BEGIN_GEOMETRY:it=K[1],wt=K[3],it.getGeometry()?void 0===f||(0,d.kK)(f,wt.getExtent())?++I:I=K[2]+1:I=K[2];break;case v.BEGIN_PATH:ut>lt&&(this.fill_(t),ut=0),gt>lt&&(t.stroke(),gt=0),!ut&&!gt&&(t.beginPath(),k=NaN,b=NaN),++I;break;case v.CIRCLE:T=K[1];const At=E[T],Yt=E[T+1],ge=E[T+2]-At,_e=E[T+3]-Yt,me=Math.sqrt(ge*ge+_e*_e);t.moveTo(At+me,Yt),t.arc(At,Yt,me,0,2*Math.PI,!0),++I;break;case v.CLOSE_PATH:t.closePath(),++I;break;case v.CUSTOM:T=K[1],W=K[2];const Ue=K[4],xe=6==K.length?K[5]:void 0;et.geometry=K[3],et.feature=it,I in ft||(ft[I]=[]);const Ut=ft[I];xe?xe(E,T,W,2,Ut):(Ut[0]=E[T],Ut[1]=E[T+1],Ut.length=2),Ue(Ut,et),++I;break;case v.DRAW_IMAGE:T=K[1],W=K[2],tt=K[3],B=K[4],X=K[5];let ne=K[6];const Ke=K[7],Ne=K[8],Ve=K[9],pe=K[10];let se=K[11];const je=K[12];let Jt=K[13];const ye=K[14],Kt=K[15];if(!tt&&K.length>=20){q=K[19],ht=K[20],dt=K[21],nt=K[22];const Dt=this.drawLabelWithPointPlacement_(q,ht,dt,nt);tt=Dt.label,K[3]=tt,B=(Dt.anchorX-K[23])*this.pixelRatio,K[4]=B,X=(Dt.anchorY-K[24])*this.pixelRatio,K[5]=X,ne=tt.height,K[6]=ne,Jt=tt.width,K[13]=Jt}let re,oe,Qt,$t;K.length>25&&(re=K[25]),K.length>17?(oe=K[16],Qt=K[17],$t=K[18]):(oe=p.oB,Qt=!1,$t=!1),pe&&_t?se+=Tt:!pe&&!_t&&(se-=Tt);let He=0;for(;T<W;T+=2){if(re&&re[He++]<Jt/this.pixelRatio)continue;const Dt=this.calculateImageOrLabelDimensions_(tt.width,tt.height,E[T],E[T+1],Jt,ne,B,X,Ne,Ve,se,je,l,oe,Qt||$t,it),Zt=[t,a,tt,Dt,Ke,Qt?pt:null,$t?mt:null];if(x){if("none"===ye)continue;if("obstacle"===ye){x.insert(Dt.declutterBox);continue}{let Ot,Pt;if(Kt){const vt=W-T;if(!Kt[vt]){Kt[vt]=Zt;continue}if(Ot=Kt[vt],delete Kt[vt],Pt=ce(Ot),x.collides(Pt))continue}if(x.collides(Dt.declutterBox))continue;Ot&&(x.insert(Pt),this.replayImageOrLabel_.apply(this,Ot)),x.insert(Dt.declutterBox)}}this.replayImageOrLabel_.apply(this,Zt)}++I;break;case v.DRAW_CHARS:const Se=K[1],Ee=K[2],ae=K[3],Je=K[4];nt=K[5];const Qe=K[6],Ie=K[7],Ce=K[8];dt=K[9];const he=K[10];q=K[11],ht=K[12];const Re=[K[13],K[13]],le=this.textStates[ht],Nt=le.font,Vt=[le.scale[0]*Ie,le.scale[1]*Ie];let jt;Nt in this.widths_?jt=this.widths_[Nt]:(jt={},this.widths_[Nt]=jt);const Te=(0,St.W)(E,Se,Ee,2),De=Math.abs(Vt[0])*(0,p.Kd)(Nt,q,jt);if(Je||De<=Te){const Ot=It(E,Se,Ee,2,q,(Te-De)*A[this.textStates[ht].textAlign],Qe,Math.abs(Vt[0]),p.Kd,Nt,jt,_t?0:this.viewRotation_);t:if(Ot){const Pt=[];let vt,qt,te,Ct,Lt;if(dt)for(vt=0,qt=Ot.length;vt<qt;++vt){Lt=Ot[vt],te=Lt[4],Ct=this.createLabel(te,ht,"",dt),B=Lt[2]+(Vt[0]<0?-he:he),X=ae*Ct.height+2*(.5-ae)*he*Vt[1]/Vt[0]-Ce;const Wt=this.calculateImageOrLabelDimensions_(Ct.width,Ct.height,Lt[0],Lt[1],Ct.width,Ct.height,B,X,0,0,Lt[3],Re,!1,p.oB,!1,it);if(x&&x.collides(Wt.declutterBox))break t;Pt.push([t,a,Ct,Wt,1,null,null])}if(nt)for(vt=0,qt=Ot.length;vt<qt;++vt){Lt=Ot[vt],te=Lt[4],Ct=this.createLabel(te,ht,nt,""),B=Lt[2],X=ae*Ct.height-Ce;const Wt=this.calculateImageOrLabelDimensions_(Ct.width,Ct.height,Lt[0],Lt[1],Ct.width,Ct.height,B,X,0,0,Lt[3],Re,!1,p.oB,!1,it);if(x&&x.collides(Wt.declutterBox))break t;Pt.push([t,a,Ct,Wt,1,null,null])}x&&x.load(Pt.map(ce));for(let Wt=0,$e=Pt.length;Wt<$e;++Wt)this.replayImageOrLabel_.apply(this,Pt[Wt])}}++I;break;case v.END_GEOMETRY:if(void 0!==g){it=K[1];const Dt=g(it,wt);if(Dt)return Dt}++I;break;case v.FILL:lt?ut++:this.fill_(t),++I;break;case v.MOVE_TO_LINE_TO:for(T=K[1],W=K[2],xt=E[T],Et=E[T+1],J=xt+.5|0,Q=Et+.5|0,(J!==k||Q!==b)&&(t.moveTo(xt,Et),k=J,b=Q),T+=2;T<W;T+=2)xt=E[T],Et=E[T+1],J=xt+.5|0,Q=Et+.5|0,(T==W-2||J!==k||Q!==b)&&(t.lineTo(xt,Et),k=J,b=Q);++I;break;case v.SET_FILL_STYLE:pt=K,this.alignFill_=K[2],ut&&(this.fill_(t),ut=0,gt&&(t.stroke(),gt=0)),t.fillStyle=K[1],++I;break;case v.SET_STROKE_STYLE:mt=K,gt&&(t.stroke(),gt=0),this.setStrokeStyle_(t,K),++I;break;case v.STROKE:lt?gt++:t.stroke(),++I;break;default:++I}}ut&&this.fill_(t),gt&&t.stroke()}execute(t,a,e,h,l,g){this.viewRotation_=h,this.execute_(t,a,e,this.instructions,l,void 0,void 0,g)}executeHitDetection(t,a,e,h,l){return this.viewRotation_=e,this.execute_(t,1,a,this.hitDetectionInstructions,!0,h,l)}};var zt=S(1992),we=S(9466);const ee=["Polygon","Circle","LineString","Image","Text","Default"],ie={},ue=class Ae{constructor(t,a,e,h,l,g){this.maxExtent_=t,this.overlaps_=h,this.pixelRatio_=e,this.resolution_=a,this.renderBuffer_=g,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,H.Ue)(),this.createExecutors_(l)}clip(t,a){const e=this.getClipCoords(a);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()}createExecutors_(t){for(const a in t){let e=this.executorsByZIndex_[a];void 0===e&&(e={},this.executorsByZIndex_[a]=e);const h=t[a];for(const l in h)e[l]=new Me(this.resolution_,this.pixelRatio_,this.overlaps_,h[l])}}hasExecutors(t){for(const a in this.executorsByZIndex_){const e=this.executorsByZIndex_[a];for(let h=0,l=t.length;h<l;++h)if(t[h]in e)return!0}return!1}forEachFeatureAtCoordinate(t,a,e,h,l,g){const f=2*(h=Math.round(h))+1,x=(0,H.qC)(this.hitDetectionTransform_,h+.5,h+.5,1/a,-1/a,-e,-t[0],-t[1]),E=!this.hitDetectionContext_;E&&(this.hitDetectionContext_=(0,zt.E4)(f,f,void 0,{willReadFrequently:!0}));const I=this.hitDetectionContext_;let L;I.canvas.width!==f||I.canvas.height!==f?(I.canvas.width=f,I.canvas.height=f):E||I.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(L=(0,d.lJ)(),(0,d.Wj)(L,t),(0,d.f3)(L,a*(this.renderBuffer_+h),L));const T=function ke($){if(void 0!==ie[$])return ie[$];const t=2*$+1,a=$*$,e=new Array(a+1);for(let l=0;l<=$;++l)for(let g=0;g<=$;++g){const f=l*l+g*g;if(f>a)break;let x=e[f];x||(x=[],e[f]=x),x.push(4*(($+l)*t+($+g))+3),l>0&&x.push(4*(($-l)*t+($+g))+3),g>0&&(x.push(4*(($+l)*t+($-g))+3),l>0&&x.push(4*(($-l)*t+($-g))+3))}const h=[];for(let l=0,g=e.length;l<g;++l)e[l]&&h.push(...e[l]);return ie[$]=h,h}(h);let W;function B(q,ht){const dt=I.getImageData(0,0,f,f).data;for(let nt=0,ut=T.length;nt<ut;nt++)if(dt[T[nt]]>0){if(!g||"Image"!==W&&"Text"!==W||g.includes(q)){const gt=(T[nt]-3)/4,pt=h-gt%f,mt=h-(gt/f|0),ft=l(q,ht,pt*pt+mt*mt);if(ft)return ft}I.clearRect(0,0,f,f);break}}const X=Object.keys(this.executorsByZIndex_).map(Number);let k,b,J,Q,tt;for(X.sort(z.j2),k=X.length-1;k>=0;--k){const q=X[k].toString();for(J=this.executorsByZIndex_[q],b=ee.length-1;b>=0;--b)if(W=ee[b],Q=J[W],void 0!==Q&&(tt=Q.executeHitDetection(I,x,e,B,L),tt))return tt}}getClipCoords(t){const a=this.maxExtent_;if(!a)return null;const e=a[0],h=a[1],l=a[2],g=a[3],f=[e,h,e,g,l,g,l,h];return(0,at.vT)(f,0,8,2,t,f),f}isEmpty(){return(0,we.x)(this.executorsByZIndex_)}execute(t,a,e,h,l,g,f){const x=Object.keys(this.executorsByZIndex_).map(Number);let E,I,L,T,W,B;for(x.sort(z.j2),this.maxExtent_&&(t.save(),this.clip(t,e)),g=g||ee,f&&x.reverse(),E=0,I=x.length;E<I;++E){const X=x[E].toString();for(W=this.executorsByZIndex_[X],L=0,T=g.length;L<T;++L)B=W[g[L]],void 0!==B&&B.execute(t,a,e,h,l,f)}this.maxExtent_&&t.restore()}};var Ht=S(8587),Fe=S(3620),Pe=S(9570);const Mt=.5;var Gt=S(8377),Xt=S(6003),be=S(3481);const Xe=class Ge extends ot.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,d.lJ)(),this.wrappedRenderedExtent_=(0,d.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,a,e){const h=a.extent,l=a.viewState,g=l.center,f=l.resolution,x=l.projection,E=l.rotation,I=x.getExtent(),L=this.getLayer().getSource(),T=a.pixelRatio,W=a.viewHints,B=!(W[Ht.Z.ANIMATING]||W[Ht.Z.INTERACTING]),X=this.compositionContext_,k=Math.round(a.size[0]*T),b=Math.round(a.size[1]*T),J=L.getWrapX()&&x.canWrapX(),Q=J?(0,d.dz)(I):null,tt=J?Math.ceil((h[2]-I[2])/Q)+1:1;let q=J?Math.floor((h[0]-I[0])/Q):0;do{const ht=this.getRenderTransform(g,f,E,T,k,b,q*Q);t.execute(X,1,ht,E,B,void 0,e)}while(++q<tt)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,zt.E4)(this.context.canvas.width,this.context.canvas.height,ot.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,zt.jy)(this.compositionContext_),ot.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,a){const e=t.pixelRatio,h=t.layerStatesArray[t.layerIndex];(0,H.n3)(this.pixelTransform,1/e,1/e),(0,H.nb)(this.inversePixelTransform,this.pixelTransform);const l=(0,H.BB)(this.pixelTransform);this.useContainer(a,l,this.getBackground(t));const g=this.context,f=g.canvas,x=this.replayGroup_,E=this.declutterExecutorGroup;if((!x||x.isEmpty())&&(!E||E.isEmpty()))return null;const I=Math.round(t.size[0]*e),L=Math.round(t.size[1]*e);f.width!=I||f.height!=L?(f.width=I,f.height=L,f.style.transform!==l&&(f.style.transform=l)):this.containerReused||g.clearRect(0,0,I,L),this.preRender(g,t);const T=t.viewState,W=T.projection;this.opacity_=h.opacity,this.setupCompositionContext_();let B=!1,X=!0;if(h.extent&&this.clipping){const k=(0,Xt.dY)(h.extent,W);X=(0,d.kK)(k,t.extent),B=X&&!(0,d.r4)(k,t.extent),B&&this.clipUnrotated(this.compositionContext_,t,k)}return X&&this.renderWorlds(x,t),B&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(g,t),this.renderedRotation_!==T.rotation&&(this.renderedRotation_=T.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(a=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,H.nn)(this.pixelTransform,e);const h=this.renderedCenter_,l=this.renderedResolution_,g=this.renderedRotation_,f=this.renderedProjection_,x=this.wrappedRenderedExtent_,E=this.getLayer(),I=[],L=e[0]*Mt,T=e[1]*Mt;I.push(this.getRenderTransform(h,l,g,Mt,L,T,0).slice());const W=E.getSource(),B=f.getExtent();if(W.getWrapX()&&f.canWrapX()&&!(0,d.r4)(B,x)){let X=x[0];const k=(0,d.dz)(B);let J,b=0;for(;X<B[0];)--b,J=k*b,I.push(this.getRenderTransform(h,l,g,Mt,L,T,J).slice()),X+=k;for(b=0,X=x[2];X>B[2];)++b,J=k*b,I.push(this.getRenderTransform(h,l,g,Mt,L,T,J).slice()),X-=k}this.hitDetectionImageData_=function We($,t,a,e,h,l,g){const E=(0,zt.E4)($[0]*Mt,$[1]*Mt);E.imageSmoothingEnabled=!1;const I=E.canvas,L=new Fe.Z(E,Mt,h,null,g),T=a.length,W=Math.floor(16777215/T),B={};for(let k=1;k<=T;++k){const b=a[k-1],J=b.getStyleFunction()||e;if(!e)continue;let Q=J(b,l);if(!Q)continue;Array.isArray(Q)||(Q=[Q]);const q=(k*W).toString(16).padStart(7,"#00000");for(let ht=0,dt=Q.length;ht<dt;++ht){const nt=Q[ht],ut=nt.getGeometryFunction()(b);if(!ut||!(0,d.kK)(h,ut.getExtent()))continue;const gt=nt.clone(),pt=gt.getFill();pt&&pt.setColor(q);const mt=gt.getStroke();mt&&(mt.setColor(q),mt.setLineDash(null)),gt.setText(void 0);const ft=nt.getImage();if(ft&&0!==ft.getOpacity()){const lt=ft.getImageSize();if(!lt)continue;const it=(0,zt.E4)(lt[0],lt[1],void 0,{alpha:!1}),xt=it.canvas;it.fillStyle=q,it.fillRect(0,0,xt.width,xt.height),gt.setImage(new Pe.Z({img:xt,imgSize:lt,anchor:ft.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ft.getOrigin(),opacity:1,size:ft.getSize(),scale:ft.getScale(),rotation:ft.getRotation(),rotateWithView:ft.getRotateWithView()}))}const Tt=gt.getZIndex()||0;let _t=B[Tt];_t||(_t={},B[Tt]=_t,_t.Polygon=[],_t.Circle=[],_t.LineString=[],_t.Point=[]);const et=ut.getType();if("GeometryCollection"===et){const lt=ut.getGeometriesArrayRecursive();for(let it=0,xt=lt.length;it<xt;++it){const Et=lt[it];_t[Et.getType().replace("Multi","")].push(Et,gt)}}else _t[et.replace("Multi","")].push(ut,gt)}}const X=Object.keys(B).map(Number).sort(z.j2);for(let k=0,b=X.length;k<b;++k){const J=B[X[k]];for(const Q in J){const tt=J[Q];for(let q=0,ht=tt.length;q<ht;q+=2){L.setStyle(tt[q+1]);for(let dt=0,nt=t.length;dt<nt;++dt)L.setTransform(t[dt]),L.drawGeometry(tt[q])}}}return E.getImageData(0,0,I.width,I.height)}(e,I,this.renderedFeatures_,E.getStyleFunction(),x,l,g)}a(function Be($,t,a){const e=[];if(a){const h=Math.floor(Math.round($[0])*Mt),l=Math.floor(Math.round($[1])*Mt),g=4*((0,O.uZ)(h,0,a.width-1)+(0,O.uZ)(l,0,a.height-1)*a.width),I=a.data[g+2]+256*(a.data[g+1]+256*a.data[g]),L=Math.floor(16777215/t.length);I&&I%L==0&&e.push(t[I/L-1])}return e}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,a,e,h,l){if(!this.replayGroup_)return;const g=a.viewState.resolution,f=a.viewState.rotation,x=this.getLayer(),E={},I=function(W,B,X){const k=(0,w.sq)(W),b=E[k];if(b){if(!0!==b&&X<b.distanceSq){if(0===X)return E[k]=!0,l.splice(l.lastIndexOf(b),1),h(W,x,B);b.geometry=B,b.distanceSq=X}}else{if(0===X)return E[k]=!0,h(W,x,B);l.push(E[k]={feature:W,layer:x,geometry:B,distanceSq:X,callback:h})}};let L;const T=[this.replayGroup_];return this.declutterExecutorGroup&&T.push(this.declutterExecutorGroup),T.some(W=>L=W.forEachFeatureAtCoordinate(t,g,f,e,I,W===this.declutterExecutorGroup&&a.declutterTree?a.declutterTree.all().map(B=>B.value):null)),L}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const a=this.getLayer(),e=a.getSource();if(!e)return!1;const h=t.viewHints[Ht.Z.ANIMATING],l=t.viewHints[Ht.Z.INTERACTING],g=a.getUpdateWhileAnimating(),f=a.getUpdateWhileInteracting();if(this.ready&&!g&&h||!f&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const x=t.extent,E=t.viewState,I=E.projection,L=E.resolution,T=t.pixelRatio,W=a.getRevision(),B=a.getRenderBuffer();let X=a.getRenderOrder();void 0===X&&(X=Gt.eR);const k=E.center.slice(),b=(0,d.f3)(x,B*L),J=b.slice(),Q=[b.slice()],tt=I.getExtent();if(e.getWrapX()&&I.canWrapX()&&!(0,d.r4)(tt,t.extent)){const et=(0,d.dz)(tt),lt=Math.max((0,d.dz)(b)/2,et);b[0]=tt[0]-lt,b[2]=tt[2]+lt,(0,be.Cf)(k,I);const it=(0,d.Cf)(Q[0],I);it[0]<tt[0]&&it[2]<tt[2]?Q.push([it[0]+et,it[1],it[2]+et,it[3]]):it[0]>tt[0]&&it[2]>tt[2]&&Q.push([it[0]-et,it[1],it[2]-et,it[3]])}if(this.ready&&this.renderedResolution_==L&&this.renderedRevision_==W&&this.renderedRenderOrder_==X&&(0,d.r4)(this.wrappedRenderedExtent_,b))return(0,z.fS)(this.renderedExtent_,J)||(this.hitDetectionImageData_=null,this.renderedExtent_=J),this.renderedCenter_=k,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const q=new st((0,Gt.Qz)(L,T),b,L,T);let ht;this.getLayer().getDeclutter()&&(ht=new st((0,Gt.Qz)(L,T),b,L,T));const dt=(0,Xt.Cs)();let nt;if(dt){for(let et=0,lt=Q.length;et<lt;++et){const xt=(0,Xt.Fj)(Q[et],I);e.loadFeatures(xt,(0,Xt.on)(L,I),dt)}nt=(0,Xt.WO)(dt,I)}else for(let et=0,lt=Q.length;et<lt;++et)e.loadFeatures(Q[et],L,I);const ut=(0,Gt.se)(L,T);let gt=!0;const pt=et=>{let lt;const it=et.getStyleFunction()||a.getStyleFunction();if(it&&(lt=it(et,L)),lt){const xt=this.renderFeature(et,ut,lt,q,nt,ht);gt=gt&&!xt}},mt=(0,Xt.Fj)(b,I),ft=e.getFeaturesInExtent(mt);X&&ft.sort(X);for(let et=0,lt=ft.length;et<lt;++et)pt(ft[et]);this.renderedFeatures_=ft,this.ready=gt;const Tt=q.finish(),_t=new ue(b,L,T,e.getOverlaps(),Tt,a.getRenderBuffer());return ht&&(this.declutterExecutorGroup=new ue(b,L,T,e.getOverlaps(),ht.finish(),a.getRenderBuffer())),this.renderedResolution_=L,this.renderedRevision_=W,this.renderedRenderOrder_=X,this.renderedExtent_=J,this.wrappedRenderedExtent_=b,this.renderedCenter_=k,this.renderedProjection_=I,this.replayGroup_=_t,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,a,e,h,l,g){if(!e)return!1;let f=!1;if(Array.isArray(e))for(let x=0,E=e.length;x<E;++x)f=(0,Gt.Pn)(h,t,e[x],a,this.boundHandleStyleImageChange_,l,g)||f;else f=(0,Gt.Pn)(h,t,e,a,this.boundHandleStyleImageChange_,l,g);return f}}},8377:(yt,rt,S)=>{"use strict";S.d(rt,{Pn:()=>G,Qz:()=>ct,eR:()=>Z,se:()=>v});var V=S(521),Y=S(119);const j=.5,D={Point:function c(s,u,r,o,w){const O=r.getImage(),F=r.getText();let M;if(O){if(O.getImageState()!=V.Z.LOADED)return;let A=s;if(w){const R=O.getDeclutterMode();if("none"!==R)if(A=w,"obstacle"===R){const P=s.getBuilder(r.getZIndex(),"Image");P.setImageStyle(O,M),P.drawPoint(u,o)}else F&&F.getText()&&(M={})}const _=A.getBuilder(r.getZIndex(),"Image");_.setImageStyle(O,M),_.drawPoint(u,o)}if(F&&F.getText()){let A=s;w&&(A=w);const _=A.getBuilder(r.getZIndex(),"Text");_.setTextStyle(F,M),_.drawText(u,o)}},LineString:function n(s,u,r,o,w){const O=r.getStroke();if(O){const M=s.getBuilder(r.getZIndex(),"LineString");M.setFillStrokeStyle(null,O),M.drawLineString(u,o)}const F=r.getText();if(F&&F.getText()){const M=(w||s).getBuilder(r.getZIndex(),"Text");M.setTextStyle(F),M.drawText(u,o)}},Polygon:function C(s,u,r,o,w){const O=r.getFill(),F=r.getStroke();if(O||F){const A=s.getBuilder(r.getZIndex(),"Polygon");A.setFillStrokeStyle(O,F),A.drawPolygon(u,o)}const M=r.getText();if(M&&M.getText()){const A=(w||s).getBuilder(r.getZIndex(),"Text");A.setTextStyle(M),A.drawText(u,o)}},MultiPoint:function y(s,u,r,o,w){const O=r.getImage(),F=r.getText();let M;if(O){if(O.getImageState()!=V.Z.LOADED)return;let A=s;if(w){const R=O.getDeclutterMode();if("none"!==R)if(A=w,"obstacle"===R){const P=s.getBuilder(r.getZIndex(),"Image");P.setImageStyle(O,M),P.drawMultiPoint(u,o)}else F&&F.getText()&&(M={})}const _=A.getBuilder(r.getZIndex(),"Image");_.setImageStyle(O,M),_.drawMultiPoint(u,o)}if(F&&F.getText()){let A=s;w&&(A=w);const _=A.getBuilder(r.getZIndex(),"Text");_.setTextStyle(F,M),_.drawText(u,o)}},MultiLineString:function m(s,u,r,o,w){const O=r.getStroke();if(O){const M=s.getBuilder(r.getZIndex(),"LineString");M.setFillStrokeStyle(null,O),M.drawMultiLineString(u,o)}const F=r.getText();if(F&&F.getText()){const M=(w||s).getBuilder(r.getZIndex(),"Text");M.setTextStyle(F),M.drawText(u,o)}},MultiPolygon:function i(s,u,r,o,w){const O=r.getFill(),F=r.getStroke();if(F||O){const A=s.getBuilder(r.getZIndex(),"Polygon");A.setFillStrokeStyle(O,F),A.drawMultiPolygon(u,o)}const M=r.getText();if(M&&M.getText()){const A=(w||s).getBuilder(r.getZIndex(),"Text");A.setTextStyle(M),A.drawText(u,o)}},GeometryCollection:function z(s,u,r,o,w){const O=u.getGeometriesArray();let F,M;for(F=0,M=O.length;F<M;++F)(0,D[O[F].getType()])(s,O[F],r,o,w)},Circle:function U(s,u,r,o,w){const O=r.getFill(),F=r.getStroke();if(O||F){const A=s.getBuilder(r.getZIndex(),"Circle");A.setFillStrokeStyle(O,F),A.drawCircle(u,o)}const M=r.getText();if(M&&M.getText()){const A=(w||s).getBuilder(r.getZIndex(),"Text");A.setTextStyle(M),A.drawText(u,o)}}};function Z(s,u){return parseInt((0,Y.sq)(s),10)-parseInt((0,Y.sq)(u),10)}function v(s,u){const r=ct(s,u);return r*r}function ct(s,u){return j*s/u}function G(s,u,r,o,w,O,F){let M=!1;const A=r.getImage();if(A){const _=A.getImageState();_==V.Z.LOADED||_==V.Z.ERROR?A.unlistenImageChange(w):(_==V.Z.IDLE&&A.load(),A.listenImageChange(w),M=!0)}return function d(s,u,r,o,w,O){const F=r.getGeometryFunction()(u);if(!F)return;const M=F.simplifyTransformed(o,w);r.getRenderer()?p(s,M,r,u):(0,D[M.getType()])(s,M,r,u,O)}(s,u,r,o,O,F),M}function p(s,u,r,o){if("GeometryCollection"!=u.getType())s.getBuilder(r.getZIndex(),"Default").drawCustom(u,o,r.getRenderer(),r.getHitDetectionRenderer());else{const O=u.getGeometries();for(let F=0,M=O.length;F<M;++F)p(s,O[F],r,o)}}},5947:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>M});var V=S(2815),Y=S(9889),j=S(8214),D=S(9972),Z=S(4587),v=S(2909),ct=S(4702),U=S(4412),G=S(1345);function p(A,_){return[[-1/0,-1/0,1/0,1/0]]}S(6003);var m=S(1911),i=S(760),c=S(2456),y=S(119),C=S(9466),s=S(1729);function o(A,_){return function(R,P,N,st,ot){const H=this;!function r(A,_,R,P,N,st,ot){const H=new XMLHttpRequest;H.open("GET","function"==typeof A?A(R,P,N):A,!0),"arraybuffer"==_.getType()&&(H.responseType="arraybuffer"),H.withCredentials=false,H.onload=function(at){if(!H.status||H.status>=200&&H.status<300){const It=_.getType();let St;"json"==It||"text"==It?St=H.responseText:"xml"==It?(St=H.responseXML,St||(St=(new DOMParser).parseFromString(H.responseText,"application/xml"))):"arraybuffer"==It&&(St=H.response),St?st(_.readFeatures(St,{extent:R,featureProjection:N}),_.readProjection(St)):ot()}else ot()},H.onerror=ot,H.send()}(A,_,R,P,N,function(at,It){H.addFeatures(at),void 0!==st&&st(at)},ot||G.Zn)}}class O extends j.ZP{constructor(_,R,P){super(_),this.feature=R,this.features=P}}const M=class F extends ct.Z{constructor(_){super({attributions:(_=_||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===_.wrapX||_.wrapX}),this.loader_=G.Zn,this.format_=_.format,this.overlaps_=void 0===_.overlaps||_.overlaps,this.url_=_.url,void 0!==_.loader?this.loader_=_.loader:void 0!==this.url_&&((0,m.h)(this.format_,7),this.loader_=o(this.url_,this.format_)),this.strategy_=void 0!==_.strategy?_.strategy:p;const R=void 0===_.useSpatialIndex||_.useSpatialIndex;let P,N;this.featuresRtree_=R?new v.Z:null,this.loadedExtentsRtree_=new v.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(_.features)?N=_.features:_.features&&(P=_.features,N=P.getArray()),!R&&void 0===P&&(P=new V.Z(N)),void 0!==N&&this.addFeaturesInternal(N),void 0!==P&&this.bindFeaturesCollection_(P)}addFeature(_){this.addFeatureInternal(_),this.changed()}addFeatureInternal(_){const R=(0,y.sq)(_);if(!this.addToIndex_(R,_))return void(this.featuresCollection_&&this.featuresCollection_.remove(_));this.setupChangeEvents_(R,_);const P=_.getGeometry();if(P){const N=P.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(N,_)}else this.nullGeometryFeatures_[R]=_;this.dispatchEvent(new O(U.Z.ADDFEATURE,_))}setupChangeEvents_(_,R){this.featureChangeKeys_[_]=[(0,s.oL)(R,D.Z.CHANGE,this.handleFeatureChange_,this),(0,s.oL)(R,Z.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(_,R){let P=!0;const N=R.getId();return void 0!==N&&(N.toString()in this.idIndex_?P=!1:this.idIndex_[N.toString()]=R),P&&((0,m.h)(!(_ in this.uidIndex_),30),this.uidIndex_[_]=R),P}addFeatures(_){this.addFeaturesInternal(_),this.changed()}addFeaturesInternal(_){const R=[],P=[],N=[];for(let st=0,ot=_.length;st<ot;st++){const H=_[st],at=(0,y.sq)(H);this.addToIndex_(at,H)&&P.push(H)}for(let st=0,ot=P.length;st<ot;st++){const H=P[st],at=(0,y.sq)(H);this.setupChangeEvents_(at,H);const It=H.getGeometry();if(It){const St=It.getExtent();R.push(St),N.push(H)}else this.nullGeometryFeatures_[at]=H}if(this.featuresRtree_&&this.featuresRtree_.load(R,N),this.hasListener(U.Z.ADDFEATURE))for(let st=0,ot=P.length;st<ot;st++)this.dispatchEvent(new O(U.Z.ADDFEATURE,P[st]))}bindFeaturesCollection_(_){let R=!1;this.addEventListener(U.Z.ADDFEATURE,function(P){R||(R=!0,_.push(P.feature),R=!1)}),this.addEventListener(U.Z.REMOVEFEATURE,function(P){R||(R=!0,_.remove(P.feature),R=!1)}),_.addEventListener(Y.Z.ADD,P=>{R||(R=!0,this.addFeature(P.element),R=!1)}),_.addEventListener(Y.Z.REMOVE,P=>{R||(R=!0,this.removeFeature(P.element),R=!1)}),this.featuresCollection_=_}clear(_){if(_){for(const P in this.featureChangeKeys_)this.featureChangeKeys_[P].forEach(s.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(N=>{this.removeFeatureInternal(N)});for(const N in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[N])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const R=new O(U.Z.CLEAR);this.dispatchEvent(R),this.changed()}forEachFeature(_){if(this.featuresRtree_)return this.featuresRtree_.forEach(_);this.featuresCollection_&&this.featuresCollection_.forEach(_)}forEachFeatureAtCoordinateDirect(_,R){return this.forEachFeatureInExtent([_[0],_[1],_[0],_[1]],function(N){if(N.getGeometry().intersectsCoordinate(_))return R(N)})}forEachFeatureInExtent(_,R){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(_,R);this.featuresCollection_&&this.featuresCollection_.forEach(R)}forEachFeatureIntersectingExtent(_,R){return this.forEachFeatureInExtent(_,function(P){if(P.getGeometry().intersectsExtent(_)){const st=R(P);if(st)return st}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let _;return this.featuresCollection_?_=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(_=this.featuresRtree_.getAll(),(0,C.x)(this.nullGeometryFeatures_)||(0,c.l7)(_,Object.values(this.nullGeometryFeatures_))),_}getFeaturesAtCoordinate(_){const R=[];return this.forEachFeatureAtCoordinateDirect(_,function(P){R.push(P)}),R}getFeaturesInExtent(_,R){if(this.featuresRtree_){if(!(R&&R.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(_);const N=(0,i.MV)(_,R);return[].concat(...N.map(st=>this.featuresRtree_.getInExtent(st)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(_,R){const P=_[0],N=_[1];let st=null;const ot=[NaN,NaN];let H=1/0;const at=[-1/0,-1/0,1/0,1/0];return R=R||G.uX,this.featuresRtree_.forEachInExtent(at,function(It){if(R(It)){const St=It.getGeometry(),Bt=H;if(H=St.closestPointXY(P,N,ot,H),H<Bt){st=It;const Rt=Math.sqrt(H);at[0]=P-Rt,at[1]=N-Rt,at[2]=P+Rt,at[3]=N+Rt}}}),st}getExtent(_){return this.featuresRtree_.getExtent(_)}getFeatureById(_){const R=this.idIndex_[_.toString()];return void 0!==R?R:null}getFeatureByUid(_){const R=this.uidIndex_[_];return void 0!==R?R:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(_){const R=_.target,P=(0,y.sq)(R),N=R.getGeometry();if(N){const ot=N.getExtent();P in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[P],this.featuresRtree_&&this.featuresRtree_.insert(ot,R)):this.featuresRtree_&&this.featuresRtree_.update(ot,R)}else P in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(R),this.nullGeometryFeatures_[P]=R);const st=R.getId();if(void 0!==st){const ot=st.toString();this.idIndex_[ot]!==R&&(this.removeFromIdIndex_(R),this.idIndex_[ot]=R)}else this.removeFromIdIndex_(R),this.uidIndex_[P]=R;this.changed(),this.dispatchEvent(new O(U.Z.CHANGEFEATURE,R))}hasFeature(_){const R=_.getId();return void 0!==R?R in this.idIndex_:(0,y.sq)(_)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,C.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(_,R,P){const N=this.loadedExtentsRtree_,st=this.strategy_(_,R,P);for(let ot=0,H=st.length;ot<H;++ot){const at=st[ot];N.forEachInExtent(at,function(St){return(0,i.r4)(St.extent,at)})||(++this.loadingExtentsCount_,this.dispatchEvent(new O(U.Z.FEATURESLOADSTART)),this.loader_.call(this,at,R,P,St=>{--this.loadingExtentsCount_,this.dispatchEvent(new O(U.Z.FEATURESLOADEND,void 0,St))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new O(U.Z.FEATURESLOADERROR))}),N.insert(at,{extent:at.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(_){const R=this.loadedExtentsRtree_;let P;R.forEachInExtent(_,function(N){if((0,i.fS)(N.extent,_))return P=N,!0}),P&&R.remove(P)}removeFeature(_){if(!_)return;const R=(0,y.sq)(_);R in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[R]:this.featuresRtree_&&this.featuresRtree_.remove(_),this.removeFeatureInternal(_)&&this.changed()}removeFeatureInternal(_){const R=(0,y.sq)(_),P=this.featureChangeKeys_[R];if(!P)return;P.forEach(s.bN),delete this.featureChangeKeys_[R];const N=_.getId();return void 0!==N&&delete this.idIndex_[N.toString()],delete this.uidIndex_[R],this.dispatchEvent(new O(U.Z.REMOVEFEATURE,_)),_}removeFromIdIndex_(_){let R=!1;for(const P in this.idIndex_)if(this.idIndex_[P]===_){delete this.idIndex_[P],R=!0;break}return R}setLoader(_){this.loader_=_}setUrl(_){(0,m.h)(this.format_,7),this.url_=_,this.setLoader(o(_,this.format_))}}},4412:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>V});const V={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>v});var V=S(2402),Y=S(760),j=S(119),D=S(9466);const v=class Z{constructor(U){this.rbush_=new V(U),this.items_={}}insert(U,G){const d={minX:U[0],minY:U[1],maxX:U[2],maxY:U[3],value:G};this.rbush_.insert(d),this.items_[(0,j.sq)(G)]=d}load(U,G){const d=new Array(G.length);for(let p=0,z=G.length;p<z;p++){const n=U[p],m=G[p],i={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:m};d[p]=i,this.items_[(0,j.sq)(m)]=i}this.rbush_.load(d)}remove(U){const G=(0,j.sq)(U),d=this.items_[G];return delete this.items_[G],null!==this.rbush_.remove(d)}update(U,G){const d=this.items_[(0,j.sq)(G)];(0,Y.fS)([d.minX,d.minY,d.maxX,d.maxY],U)||(this.remove(G),this.insert(U,G))}getAll(){return this.rbush_.all().map(function(G){return G.value})}getInExtent(U){return this.rbush_.search({minX:U[0],minY:U[1],maxX:U[2],maxY:U[3]}).map(function(p){return p.value})}forEach(U){return this.forEach_(this.getAll(),U)}forEachInExtent(U,G){return this.forEach_(this.getInExtent(U),G)}forEach_(U,G){let d;for(let p=0,z=U.length;p<z;p++)if(d=G(U[p]),d)return d;return d}isEmpty(){return(0,D.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(U){const G=this.rbush_.toJSON();return(0,Y.T9)(G.minX,G.minY,G.maxX,G.maxY,U)}concat(U){this.rbush_.load(U.rbush_.all());for(const G in U.items_)this.items_[G]=U.items_[G]}}},7392:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>j});var V=S(8225);class Y extends V.Z{constructor(Z){super({points:1/0,fill:(Z=Z||{radius:5}).fill,radius:Z.radius,stroke:Z.stroke,scale:void 0!==Z.scale?Z.scale:1,rotation:void 0!==Z.rotation?Z.rotation:0,rotateWithView:void 0!==Z.rotateWithView&&Z.rotateWithView,displacement:void 0!==Z.displacement?Z.displacement:[0,0],declutterMode:Z.declutterMode})}clone(){const Z=this.getScale(),v=new Y({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(Z)?Z.slice():Z,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return v.setOpacity(this.getOpacity()),v}setRadius(Z){this.radius_=Z,this.render()}}const j=Y},5044:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>Y});class V{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null}clone(){const D=this.getColor();return new V({color:Array.isArray(D)?D.slice():D||void 0})}getColor(){return this.color_}setColor(D){this.color_=D}}const Y=V},9570:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>y});var V=S(9972),Y=S(521),j=S(6398),D=S(3783),Z=S(1911),v=S(8007),ct=S(1992),U=S(2956),G=S(3641);let d=null;class p extends v.Z{constructor(s,u,r,o,w,O){super(),this.hitDetectionImage_=null,this.image_=s,this.crossOrigin_=o,this.canvas_={},this.color_=O,this.unlisten_=null,this.imageState_=w,this.size_=r,this.src_=u}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Y.Z.LOADED){d||(d=(0,ct.E4)(1,1,void 0,{willReadFrequently:!0})),d.drawImage(this.image_,0,0);try{d.getImageData(0,0,1,1),this.tainted_=!1}catch{d=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(V.Z.CHANGE)}handleImageError_(){this.imageState_=Y.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Y.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(s){return this.image_||this.initializeImage_(),this.replaceColor_(s),this.canvas_[s]?this.canvas_[s]:this.image_}getPixelRatio(s){return this.replaceColor_(s),this.canvas_[s]?s:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const s=this.size_[0],u=this.size_[1],r=(0,ct.E4)(s,u);r.fillRect(0,0,s,u),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Y.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=Y.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,G.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(s){if(!this.color_||this.canvas_[s]||this.imageState_!==Y.Z.LOADED)return;const u=this.image_,r=document.createElement("canvas");r.width=Math.ceil(u.width*s),r.height=Math.ceil(u.height*s);const o=r.getContext("2d");o.scale(s,s),o.drawImage(u,0,0),o.globalCompositeOperation="multiply",o.fillStyle=(0,D.XC)(this.color_),o.fillRect(0,0,r.width/s,r.height/s),o.globalCompositeOperation="destination-in",o.drawImage(u,0,0),this.canvas_[s]=r}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var m=S(119);function i(C,s,u,r){return void 0!==u&&void 0!==r?[u/C,r/s]:void 0!==u?u/C:void 0!==r?r/s:1}class c extends j.Z{constructor(s){super({opacity:void 0!==(s=s||{}).opacity?s.opacity:1,rotation:void 0!==s.rotation?s.rotation:0,scale:void 0!==s.scale?s.scale:1,displacement:void 0!==s.displacement?s.displacement:[0,0],rotateWithView:void 0!==s.rotateWithView&&s.rotateWithView,declutterMode:s.declutterMode}),this.anchor_=void 0!==s.anchor?s.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==s.anchorOrigin?s.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==s.anchorXUnits?s.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==s.anchorYUnits?s.anchorYUnits:"fraction",this.crossOrigin_=void 0!==s.crossOrigin?s.crossOrigin:null;const O=void 0!==s.img?s.img:null;this.imgSize_=s.imgSize;let F=s.src;(0,Z.h)(!(void 0!==F&&O),4),(0,Z.h)(!O||O&&this.imgSize_,5),(void 0===F||0===F.length)&&O&&(F=O.src||(0,m.sq)(O)),(0,Z.h)(void 0!==F&&F.length>0,6),(0,Z.h)(!((void 0!==s.width||void 0!==s.height)&&void 0!==s.scale),69);const M=void 0!==s.src?Y.Z.IDLE:Y.Z.LOADED;if(this.color_=void 0!==s.color?(0,D._2)(s.color):null,this.iconImage_=function z(C,s,u,r,o,w){let O=U.c.get(s,r,w);return O||(O=new p(C,s,u,r,o,w),U.c.set(s,r,w,O)),O}(O,F,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,M,this.color_),this.offset_=void 0!==s.offset?s.offset:[0,0],this.offsetOrigin_=void 0!==s.offsetOrigin?s.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==s.size?s.size:null,void 0!==s.width||void 0!==s.height){let A,_;if(s.size)[A,_]=s.size;else{const R=this.getImage(1);if(!(R instanceof HTMLCanvasElement||R.src&&R.complete)){this.initialOptions_=s;const P=()=>{if(this.unlistenImageChange(P),!this.initialOptions_)return;const N=this.iconImage_.getSize();this.setScale(i(N[0],N[1],s.width,s.height))};return void this.listenImageChange(P)}A=R.width,_=R.height}void 0!==A&&this.setScale(i(A,_,s.width,s.height))}}clone(){let s,u,r;return this.initialOptions_?(u=this.initialOptions_.width,r=this.initialOptions_.height):(s=this.getScale(),s=Array.isArray(s)?s.slice():s),new c({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:s,width:u,height:r,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let s=this.normalizedAnchor_;if(!s){s=this.anchor_;const o=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!o)return null;s=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(s[0]*=o[0]),"fraction"==this.anchorYUnits_&&(s[1]*=o[1])}if("top-left"!=this.anchorOrigin_){if(!o)return null;s===this.anchor_&&(s=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[0]=-s[0]+o[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[1]=-s[1]+o[1])}this.normalizedAnchor_=s}const u=this.getDisplacement(),r=this.getScaleArray();return[s[0]-u[0]/r[0],s[1]+u[1]/r[1]]}setAnchor(s){this.anchor_=s,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(s){return this.iconImage_.getImage(s)}getPixelRatio(s){return this.iconImage_.getPixelRatio(s)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let s=this.offset_;if("top-left"!=this.offsetOrigin_){const u=this.getSize(),r=this.iconImage_.getSize();if(!u||!r)return null;s=s.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[0]=r[0]-u[0]-s[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[1]=r[1]-u[1]-s[1])}return this.origin_=s,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const s=this.getScaleArray();return this.size_?this.size_[0]*s[0]:this.iconImage_.getImageState()==Y.Z.LOADED?this.iconImage_.getSize()[0]*s[0]:void 0}getHeight(){const s=this.getScaleArray();return this.size_?this.size_[1]*s[1]:this.iconImage_.getImageState()==Y.Z.LOADED?this.iconImage_.getSize()[1]*s[1]:void 0}setScale(s){delete this.initialOptions_,super.setScale(s)}listenImageChange(s){this.iconImage_.addEventListener(V.Z.CHANGE,s)}load(){this.iconImage_.load()}unlistenImageChange(s){this.iconImage_.removeEventListener(V.Z.CHANGE,s)}}const y=c},6398:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>D});var V=S(119),Y=S(1750);class j{constructor(v){this.opacity_=v.opacity,this.rotateWithView_=v.rotateWithView,this.rotation_=v.rotation,this.scale_=v.scale,this.scaleArray_=(0,Y.Pq)(v.scale),this.displacement_=v.displacement,this.declutterMode_=v.declutterMode}clone(){const v=this.getScale();return new j({opacity:this.getOpacity(),scale:Array.isArray(v)?v.slice():v,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,V.O3)()}getImage(v){return(0,V.O3)()}getHitDetectionImage(){return(0,V.O3)()}getPixelRatio(v){return 1}getImageState(){return(0,V.O3)()}getImageSize(){return(0,V.O3)()}getOrigin(){return(0,V.O3)()}getSize(){return(0,V.O3)()}setDisplacement(v){this.displacement_=v}setOpacity(v){this.opacity_=v}setRotateWithView(v){this.rotateWithView_=v}setRotation(v){this.rotation_=v}setScale(v){this.scale_=v,this.scaleArray_=(0,Y.Pq)(v)}listenImageChange(v){(0,V.O3)()}load(){(0,V.O3)()}unlistenImageChange(v){(0,V.O3)()}}const D=j},8225:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>U});var V=S(521),Y=S(6398),j=S(3783),D=S(5813),Z=S(1992),v=S(4686);class ct extends Y.Z{constructor(d){super({opacity:1,rotateWithView:void 0!==d.rotateWithView&&d.rotateWithView,rotation:void 0!==d.rotation?d.rotation:0,scale:void 0!==d.scale?d.scale:1,displacement:void 0!==d.displacement?d.displacement:[0,0],declutterMode:d.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==d.fill?d.fill:null,this.origin_=[0,0],this.points_=d.points,this.radius_=void 0!==d.radius?d.radius:d.radius1,this.radius2_=d.radius2,this.angle_=void 0!==d.angle?d.angle:0,this.stroke_=void 0!==d.stroke?d.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const d=this.getScale(),p=new ct({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(d)?d.slice():d,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return p.setOpacity(this.getOpacity()),p}getAnchor(){const d=this.size_;if(!d)return null;const p=this.getDisplacement(),z=this.getScaleArray();return[d[0]/2-p[0]/z[0],d[1]/2+p[1]/z[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(d){this.fill_=d,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(d){let p=this.canvas_[d];if(!p){const z=this.renderOptions_,n=(0,Z.E4)(z.size*d,z.size*d);this.draw_(z,n,d),p=n.canvas,this.canvas_[d]=p}return p}getPixelRatio(d){return d}getImageSize(){return this.size_}getImageState(){return V.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(d){this.stroke_=d,this.render()}listenImageChange(d){}load(){}unlistenImageChange(d){}calculateLineJoinSize_(d,p,z){if(0===p||this.points_===1/0||"bevel"!==d&&"miter"!==d)return p;let n=this.radius_,m=void 0===this.radius2_?n:this.radius2_;if(n<m){const N=n;n=m,m=N}const c=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),y=m*Math.sin(c),s=n-Math.sqrt(m*m-y*y),u=Math.sqrt(y*y+s*s),r=u/y;if("miter"===d&&r<=z)return r*p;const o=p/2/r,w=p/2*(s/u),F=Math.sqrt((n+o)*(n+o)+w*w)-n;if(void 0===this.radius2_||"bevel"===d)return 2*F;const M=n*Math.sin(c),_=m-Math.sqrt(n*n-M*M),P=Math.sqrt(M*M+_*_)/M;return P<=z?2*Math.max(F,P*p/2-m-n):2*F}createRenderOptions(){let m,d=v.rc,p=0,z=null,n=0,i=0;this.stroke_&&(m=this.stroke_.getColor(),null===m&&(m=v.Tx),m=(0,D.y)(m),i=this.stroke_.getWidth(),void 0===i&&(i=v.yC),z=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),d=this.stroke_.getLineJoin(),void 0===d&&(d=v.rc),p=this.stroke_.getMiterLimit(),void 0===p&&(p=v.V4));const c=this.calculateLineJoinSize_(d,i,p),y=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:m,strokeWidth:i,size:Math.ceil(2*y+c),lineDash:z,lineDashOffset:n,lineJoin:d,miterLimit:p}}render(){this.renderOptions_=this.createRenderOptions();const d=this.renderOptions_.size;this.canvas_={},this.size_=[d,d]}draw_(d,p,z){if(p.scale(z,z),p.translate(d.size/2,d.size/2),this.createPath_(p),this.fill_){let n=this.fill_.getColor();null===n&&(n=v.bL),p.fillStyle=(0,D.y)(n),p.fill()}this.stroke_&&(p.strokeStyle=d.strokeStyle,p.lineWidth=d.strokeWidth,d.lineDash&&(p.setLineDash(d.lineDash),p.lineDashOffset=d.lineDashOffset),p.lineJoin=d.lineJoin,p.miterLimit=d.miterLimit,p.stroke())}createHitDetectionCanvas_(d){if(this.fill_){let p=this.fill_.getColor(),z=0;if("string"==typeof p&&(p=(0,j._2)(p)),null===p?z=1:Array.isArray(p)&&(z=4===p.length?p[3]:1),0===z){const n=(0,Z.E4)(d.size,d.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(d,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(d){let p=this.points_;const z=this.radius_;if(p===1/0)d.arc(0,0,z,0,2*Math.PI);else{const n=void 0===this.radius2_?z:this.radius2_;void 0!==this.radius2_&&(p*=2);const m=this.angle_-Math.PI/2,i=2*Math.PI/p;for(let c=0;c<p;c++){const y=m+c*i,C=c%2==0?z:n;d.lineTo(C*Math.cos(y),C*Math.sin(y))}d.closePath()}}drawHitDetectionCanvas_(d,p){p.translate(d.size/2,d.size/2),this.createPath_(p),p.fillStyle=v.bL,p.fill(),this.stroke_&&(p.strokeStyle=d.strokeStyle,p.lineWidth=d.strokeWidth,d.lineDash&&(p.setLineDash(d.lineDash),p.lineDashOffset=d.lineDashOffset),p.lineJoin=d.lineJoin,p.miterLimit=d.miterLimit,p.stroke())}}const U=ct},6785:(yt,rt,S)=>{"use strict";S.d(rt,{Z:()=>Y});class V{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null,this.lineCap_=D.lineCap,this.lineDash_=void 0!==D.lineDash?D.lineDash:null,this.lineDashOffset_=D.lineDashOffset,this.lineJoin_=D.lineJoin,this.miterLimit_=D.miterLimit,this.width_=D.width}clone(){const D=this.getColor();return new V({color:Array.isArray(D)?D.slice():D||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(D){this.color_=D}setLineCap(D){this.lineCap_=D}setLineDash(D){this.lineDash_=D}setLineDashOffset(D){this.lineDashOffset_=D}setLineJoin(D){this.lineJoin_=D}setMiterLimit(D){this.miterLimit_=D}setWidth(D){this.width_=D}}const Y=V},109:(yt,rt,S)=>{"use strict";S.d(rt,{J$:()=>v,Ly:()=>G,ZP:()=>p,yF:()=>U});var V=S(7392),Y=S(5044),j=S(6785),D=S(1911);class Z{constructor(n){n=n||{},this.geometry_=null,this.geometryFunction_=d,void 0!==n.geometry&&this.setGeometry(n.geometry),this.fill_=void 0!==n.fill?n.fill:null,this.image_=void 0!==n.image?n.image:null,this.renderer_=void 0!==n.renderer?n.renderer:null,this.hitDetectionRenderer_=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.stroke_=void 0!==n.stroke?n.stroke:null,this.text_=void 0!==n.text?n.text:null,this.zIndex_=n.zIndex}clone(){let n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new Z({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(n){this.renderer_=n}setHitDetectionRenderer(n){this.hitDetectionRenderer_=n}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(n){this.fill_=n}getImage(){return this.image_}setImage(n){this.image_=n}getStroke(){return this.stroke_}setStroke(n){this.stroke_=n}getText(){return this.text_}setText(n){this.text_=n}getZIndex(){return this.zIndex_}setGeometry(n){"function"==typeof n?this.geometryFunction_=n:"string"==typeof n?this.geometryFunction_=function(m){return m.get(n)}:n?void 0!==n&&(this.geometryFunction_=function(){return n}):this.geometryFunction_=d,this.geometry_=n}setZIndex(n){this.zIndex_=n}}function v(z){let n;if("function"==typeof z)n=z;else{let m;Array.isArray(z)?m=z:((0,D.h)("function"==typeof z.getZIndex,41),m=[z]),n=function(){return m}}return n}let ct=null;function U(z,n){if(!ct){const m=new Y.Z({color:"rgba(255,255,255,0.4)"}),i=new j.Z({color:"#3399CC",width:1.25});ct=[new Z({image:new V.Z({fill:m,stroke:i,radius:5}),fill:m,stroke:i})]}return ct}function G(){const z={},n=[255,255,255,1],m=[0,153,255,1];return z.Polygon=[new Z({fill:new Y.Z({color:[255,255,255,.5]})})],z.MultiPolygon=z.Polygon,z.LineString=[new Z({stroke:new j.Z({color:n,width:5})}),new Z({stroke:new j.Z({color:m,width:3})})],z.MultiLineString=z.LineString,z.Circle=z.Polygon.concat(z.LineString),z.Point=[new Z({image:new V.Z({radius:6,fill:new Y.Z({color:m}),stroke:new j.Z({color:n,width:1.5})}),zIndex:1/0})],z.MultiPoint=z.Point,z.GeometryCollection=z.Polygon.concat(z.LineString,z.Point),z}function d(z){return z.getGeometry()}const p=Z}}]);