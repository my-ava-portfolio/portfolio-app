(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[154],{5625:(Rt,gt,v)=>{"use strict";v.d(gt,{H:()=>nt,p:()=>K});var it=v(2687);const K=it.FGq,nt=it.TL5},2402:function(Rt){Rt.exports=function(){"use strict";function gt(o,f,g,D,n){!function h(u,O,Z,k,U){for(;k>Z;){if(k-Z>600){var W=k-Z+1,X=O-Z+1,m=Math.log(W),T=.5*Math.exp(2*m/3),B=.5*Math.sqrt(m*T*(W-T)/W)*(X-W/2<0?-1:1);h(u,O,Math.max(Z,Math.floor(O-X*T/W+B)),Math.min(k,Math.floor(O+(W-X)*T/W+B)),U)}var mt=u[O],st=Z,xt=k;for(v(u,Z,O),U(u[k],mt)>0&&v(u,Z,k);st<xt;){for(v(u,st,xt),st++,xt--;U(u[st],mt)<0;)st++;for(;U(u[xt],mt)>0;)xt--}0===U(u[Z],mt)?v(u,Z,xt):v(u,++xt,k),xt<=O&&(Z=xt+1),O<=xt&&(k=xt-1)}}(o,f,g||0,D||o.length-1,n||it)}function v(o,f,g){var D=o[f];o[f]=o[g],o[g]=D}function it(o,f){return o<f?-1:o>f?1:0}var K=function(o){void 0===o&&(o=9),this._maxEntries=Math.max(4,o),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function nt(o,f,g){if(!g)return f.indexOf(o);for(var D=0;D<f.length;D++)if(g(o,f[D]))return D;return-1}function F(o,f){$(o,0,o.children.length,f,o)}function $(o,f,g,D,n){n||(n=a(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var h=f;h<g;h++){var u=o.children[h];M(n,o.leaf?D(u):u)}return n}function M(o,f){return o.minX=Math.min(o.minX,f.minX),o.minY=Math.min(o.minY,f.minY),o.maxX=Math.max(o.maxX,f.maxX),o.maxY=Math.max(o.maxY,f.maxY),o}function pt(o,f){return o.minX-f.minX}function Q(o,f){return o.minY-f.minY}function j(o){return(o.maxX-o.minX)*(o.maxY-o.minY)}function p(o){return o.maxX-o.minX+(o.maxY-o.minY)}function y(o,f){return o.minX<=f.minX&&o.minY<=f.minY&&f.maxX<=o.maxX&&f.maxY<=o.maxY}function H(o,f){return f.minX<=o.maxX&&f.minY<=o.maxY&&f.maxX>=o.minX&&f.maxY>=o.minY}function a(o){return{children:o,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(o,f,g,D,n){for(var h=[f,g];h.length;)if(!((g=h.pop())-(f=h.pop())<=D)){var u=f+Math.ceil((g-f)/D/2)*D;gt(o,u,f,g,n),h.push(f,u,u,g)}}return K.prototype.all=function(){return this._all(this.data,[])},K.prototype.search=function(o){var f=this.data,g=[];if(!H(o,f))return g;for(var D=this.toBBox,n=[];f;){for(var h=0;h<f.children.length;h++){var u=f.children[h],O=f.leaf?D(u):u;H(o,O)&&(f.leaf?g.push(u):y(o,O)?this._all(u,g):n.push(u))}f=n.pop()}return g},K.prototype.collides=function(o){var f=this.data;if(!H(o,f))return!1;for(var g=[];f;){for(var D=0;D<f.children.length;D++){var n=f.children[D],h=f.leaf?this.toBBox(n):n;if(H(o,h)){if(f.leaf||y(o,h))return!0;g.push(n)}}f=g.pop()}return!1},K.prototype.load=function(o){if(!o||!o.length)return this;if(o.length<this._minEntries){for(var f=0;f<o.length;f++)this.insert(o[f]);return this}var g=this._build(o.slice(),0,o.length-1,0);if(this.data.children.length)if(this.data.height===g.height)this._splitRoot(this.data,g);else{if(this.data.height<g.height){var D=this.data;this.data=g,g=D}this._insert(g,this.data.height-g.height-1,!0)}else this.data=g;return this},K.prototype.insert=function(o){return o&&this._insert(o,this.data.height-1),this},K.prototype.clear=function(){return this.data=a([]),this},K.prototype.remove=function(o,f){if(!o)return this;for(var g,D,n,h=this.data,u=this.toBBox(o),O=[],Z=[];h||O.length;){if(h||(h=O.pop(),D=O[O.length-1],g=Z.pop(),n=!0),h.leaf){var k=nt(o,h.children,f);if(-1!==k)return h.children.splice(k,1),O.push(h),this._condense(O),this}n||h.leaf||!y(h,u)?D?(g++,h=D.children[g],n=!1):h=null:(O.push(h),Z.push(g),g=0,D=h,h=h.children[0])}return this},K.prototype.toBBox=function(o){return o},K.prototype.compareMinX=function(o,f){return o.minX-f.minX},K.prototype.compareMinY=function(o,f){return o.minY-f.minY},K.prototype.toJSON=function(){return this.data},K.prototype.fromJSON=function(o){return this.data=o,this},K.prototype._all=function(o,f){for(var g=[];o;)o.leaf?f.push.apply(f,o.children):g.push.apply(g,o.children),o=g.pop();return f},K.prototype._build=function(o,f,g,D){var n,h=g-f+1,u=this._maxEntries;if(h<=u)return F(n=a(o.slice(f,g+1)),this.toBBox),n;D||(D=Math.ceil(Math.log(h)/Math.log(u)),u=Math.ceil(h/Math.pow(u,D-1))),(n=a([])).leaf=!1,n.height=D;var O=Math.ceil(h/u),Z=O*Math.ceil(Math.sqrt(u));R(o,f,g,Z,this.compareMinX);for(var k=f;k<=g;k+=Z){var U=Math.min(k+Z-1,g);R(o,k,U,O,this.compareMinY);for(var W=k;W<=U;W+=O){var X=Math.min(W+O-1,U);n.children.push(this._build(o,W,X,D-1))}}return F(n,this.toBBox),n},K.prototype._chooseSubtree=function(o,f,g,D){for(;D.push(f),!f.leaf&&D.length-1!==g;){for(var n=1/0,h=1/0,u=void 0,O=0;O<f.children.length;O++){var Z=f.children[O],k=j(Z),U=(W=o,X=Z,(Math.max(X.maxX,W.maxX)-Math.min(X.minX,W.minX))*(Math.max(X.maxY,W.maxY)-Math.min(X.minY,W.minY))-k);U<h?(h=U,n=k<n?k:n,u=Z):U===h&&k<n&&(n=k,u=Z)}f=u||f.children[0]}var W,X;return f},K.prototype._insert=function(o,f,g){var D=g?o:this.toBBox(o),n=[],h=this._chooseSubtree(D,this.data,f,n);for(h.children.push(o),M(h,D);f>=0&&n[f].children.length>this._maxEntries;)this._split(n,f),f--;this._adjustParentBBoxes(D,n,f)},K.prototype._split=function(o,f){var g=o[f],D=g.children.length,n=this._minEntries;this._chooseSplitAxis(g,n,D);var h=this._chooseSplitIndex(g,n,D),u=a(g.children.splice(h,g.children.length-h));u.height=g.height,u.leaf=g.leaf,F(g,this.toBBox),F(u,this.toBBox),f?o[f-1].children.push(u):this._splitRoot(g,u)},K.prototype._splitRoot=function(o,f){this.data=a([o,f]),this.data.height=o.height+1,this.data.leaf=!1,F(this.data,this.toBBox)},K.prototype._chooseSplitIndex=function(o,f,g){for(var D,n,h,u,O,Z,k,U=1/0,W=1/0,X=f;X<=g-f;X++){var m=$(o,0,X,this.toBBox),T=$(o,X,g,this.toBBox),B=(n=m,h=T,void 0,void 0,void 0,void 0,u=Math.max(n.minX,h.minX),O=Math.max(n.minY,h.minY),Z=Math.min(n.maxX,h.maxX),k=Math.min(n.maxY,h.maxY),Math.max(0,Z-u)*Math.max(0,k-O)),tt=j(m)+j(T);B<U?(U=B,D=X,W=tt<W?tt:W):B===U&&tt<W&&(W=tt,D=X)}return D||g-f},K.prototype._chooseSplitAxis=function(o,f,g){var D=o.leaf?this.compareMinX:pt,n=o.leaf?this.compareMinY:Q;this._allDistMargin(o,f,g,D)<this._allDistMargin(o,f,g,n)&&o.children.sort(D)},K.prototype._allDistMargin=function(o,f,g,D){o.children.sort(D);for(var n=this.toBBox,h=$(o,0,f,n),u=$(o,g-f,g,n),O=p(h)+p(u),Z=f;Z<g-f;Z++){var k=o.children[Z];M(h,o.leaf?n(k):k),O+=p(h)}for(var U=g-f-1;U>=f;U--){var W=o.children[U];M(u,o.leaf?n(W):W),O+=p(u)}return O},K.prototype._adjustParentBBoxes=function(o,f,g){for(var D=g;D>=0;D--)M(f[D],o)},K.prototype._condense=function(o){for(var f=o.length-1,g=void 0;f>=0;f--)0===o[f].children.length?f>0?(g=o[f-1].children).splice(g.indexOf(o[f]),1):this.clear():F(o[f],this.toBBox)},K}()},3171:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>pt});var it=v(3632),K=v(9972),nt=v(1911),F=v(1729);class $ extends it.Z{constructor(j){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),j&&("function"==typeof j.getSimplifiedGeometry?this.setGeometry(j):this.setProperties(j))}clone(){const j=new $(this.hasProperties()?this.getProperties():null);j.setGeometryName(this.getGeometryName());const p=this.getGeometry();p&&j.setGeometry(p.clone());const y=this.getStyle();return y&&j.setStyle(y),j}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,F.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const j=this.getGeometry();j&&(this.geometryChangeKey_=(0,F.oL)(j,K.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(j){this.set(this.geometryName_,j)}setStyle(j){this.style_=j,this.styleFunction_=j?function M(Q){if("function"==typeof Q)return Q;let j;return Array.isArray(Q)?j=Q:((0,nt.h)("function"==typeof Q.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),j=[Q]),function(){return j}}(j):void 0,this.changed()}setId(j){this.id_=j,this.changed()}setGeometryName(j){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=j,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const pt=$},5813:(Rt,gt,v)=>{"use strict";v.d(gt,{y:()=>K});var it=v(3783);function K(nt){return Array.isArray(nt)?(0,it.BB)(nt):nt}},3343:(Rt,gt,v)=>{"use strict";function it(nt,F,$,M){let pt=nt[F],Q=nt[F+1],j=0;for(let p=F+M;p<$;p+=M){const y=nt[p],H=nt[p+1];j+=Math.sqrt((y-pt)*(y-pt)+(H-Q)*(H-Q)),pt=y,Q=H}return j}v.d(gt,{W:()=>it})},3324:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>D});var it=v(2815),K=v(9889),nt=v(8214),F=v(3171),$=v(4840),M=v(7053),pt=v(1345),Q=v(9466),j=v(109),p=v(2456),y=v(119),H=v(6597);class R extends nt.ZP{constructor(h,u,O,Z){super(h),this.selected=u,this.deselected=O,this.mapBrowserEvent=Z}}const o={};class f extends $.ZP{constructor(h){let u;if(super(),h=h||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=h.condition?h.condition:H.Kf,this.addCondition_=h.addCondition?h.addCondition:H.Fi,this.removeCondition_=h.removeCondition?h.removeCondition:H.Fi,this.toggleCondition_=h.toggleCondition?h.toggleCondition:H.vY,this.multi_=!!h.multi&&h.multi,this.filter_=h.filter?h.filter:pt.uX,this.hitTolerance_=h.hitTolerance?h.hitTolerance:0,this.style_=void 0!==h.style?h.style:function g(){const n=(0,j.Ly)();return(0,p.l7)(n.Polygon,n.LineString),(0,p.l7)(n.GeometryCollection,n.LineString),function(h){return h.getGeometry()?n[h.getGeometry().getType()]:null}}(),this.features_=h.features||new it.Z,h.layers)if("function"==typeof h.layers)u=h.layers;else{const O=h.layers;u=function(Z){return O.includes(Z)}}else u=pt.uX;this.layerFilter_=u,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(h,u){this.featureLayerAssociation_[(0,y.sq)(h)]=u}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(h){return this.featureLayerAssociation_[(0,y.sq)(h)]}setHitTolerance(h){this.hitTolerance_=h}setMap(h){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(h),h?(this.features_.addEventListener(K.Z.ADD,this.boundAddFeature_),this.features_.addEventListener(K.Z.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(K.Z.ADD,this.boundAddFeature_),this.features_.removeEventListener(K.Z.REMOVE,this.boundRemoveFeature_))}addFeature_(h){const u=h.element;if(this.style_&&this.applySelectedStyle_(u),!this.getLayer(u)){const O=this.getMap().getAllLayers().find(function(Z){if(Z instanceof M.Z&&Z.getSource()&&Z.getSource().hasFeature(u))return Z});O&&this.addFeatureLayerAssociation_(u,O)}}removeFeature_(h){this.style_&&this.restorePreviousStyle_(h.element)}getStyle(){return this.style_}applySelectedStyle_(h){const u=(0,y.sq)(h);u in o||(o[u]=h.getStyle()),h.setStyle(this.style_)}restorePreviousStyle_(h){const u=this.getMap().getInteractions().getArray();for(let Z=u.length-1;Z>=0;--Z){const k=u[Z];if(k!==this&&k instanceof f&&k.getStyle()&&-1!==k.getFeatures().getArray().lastIndexOf(h))return void h.setStyle(k.getStyle())}const O=(0,y.sq)(h);h.setStyle(o[O]),delete o[O]}removeFeatureLayerAssociation_(h){delete this.featureLayerAssociation_[(0,y.sq)(h)]}handleEvent(h){if(!this.condition_(h))return!0;const u=this.addCondition_(h),O=this.removeCondition_(h),Z=this.toggleCondition_(h),k=!u&&!O&&!Z,U=h.map,W=this.getFeatures(),X=[],m=[];if(k){(0,Q.Z)(this.featureLayerAssociation_),U.forEachFeatureAtPixel(h.pixel,(T,B)=>{if(T instanceof F.Z&&this.filter_(T,B))return this.addFeatureLayerAssociation_(T,B),m.push(T),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let T=W.getLength()-1;T>=0;--T){const B=W.item(T),tt=m.indexOf(B);tt>-1?m.splice(tt,1):(W.remove(B),X.push(B))}0!==m.length&&W.extend(m)}else{U.forEachFeatureAtPixel(h.pixel,(T,B)=>{if(T instanceof F.Z&&this.filter_(T,B))return!u&&!Z||W.getArray().includes(T)?(O||Z)&&W.getArray().includes(T)&&(X.push(T),this.removeFeatureLayerAssociation_(T)):(this.addFeatureLayerAssociation_(T,B),m.push(T)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let T=X.length-1;T>=0;--T)W.remove(X[T]);W.extend(m)}return(m.length>0||X.length>0)&&this.dispatchEvent(new R("select",m,X,h)),!0}}const D=f},9988:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>V});var it=v(4593),K=v(2402),nt=v(109),F=v(7392),$=v(5044),M=v(9570),pt=v(8225),Q=v(6785),j=v(1750);class y{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=(0,j.Pq)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new $.Z({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new y({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=(0,j.Pq)(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const H=y;var a=v(2456);let R=0;const f=1<<R++,g=1<<R++,D=1<<R++,n=1<<R++,h=1<<R++,u=Math.pow(2,5)-1,O={[f]:"boolean",[g]:"number",[D]:"string",[n]:"color",[h]:"number[]"},Z=Object.keys(O).map(Number).sort(a.j2);function k(i){const e=[];for(const s of Z)U(i,s)&&e.push(O[s]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function U(i,e){return(i&e)===e}function W(i,e){return!!(i&e)}class m{constructor(e,s){this.type=e,this.value=s}}class T{constructor(e,s,...C){this.type=e,this.operator=s,this.args=C}}function B(){return{variables:new Set,properties:new Set}}function tt(i,e){switch(typeof i){case"boolean":return new m(f,i);case"number":return new m(g,i);case"string":return new m(D,i)}if(!Array.isArray(i))throw new Error("Expression must be an array or a primitive value");if(0===i.length)throw new Error("Empty expression");if("string"==typeof i[0])return function At(i,e){const s=i[0],C=mt[s];if(!C)throw new Error(`Unknown operator: ${s}`);return C(i,e)}(i,e);for(const C of i)if("number"!=typeof C)throw new Error("Expected an array of numbers");let s=h;return(3===i.length||4===i.length)&&(s|=n),new m(s,i)}const A={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},mt={[A.Number]:_t(ft(1,1/0,u),g),[A.String]:_t(ft(1,1/0,u),D),[A.Get]:_t(function st(i,e){if(2!==i.length)throw new Error("Expected 1 argument for get operation");const s=tt(i[1],e);if(!(s instanceof m))throw new Error("Expected a literal argument for get operation");if("string"!=typeof s.value)throw new Error("Expected a string argument for get operation");return e.properties.add(s.value),[s]},u),[A.Var]:_t(function xt(i,e){if(2!==i.length)throw new Error("Expected 1 argument for var operation");const s=tt(i[1],e);if(!(s instanceof m))throw new Error("Expected a literal argument for var operation");if("string"!=typeof s.value)throw new Error("Expected a string argument for get operation");return e.variables.add(s.value),[s]},u),[A.Resolution]:_t(function Dt(i,e){if(1!==i.length)throw new Error(`Expected no arguments for ${i[0]} operation`);return[]},g),[A.Any]:_t(ft(2,1/0,f),f),[A.All]:_t(ft(2,1/0,f),f),[A.Not]:_t(ft(1,1,f),f),[A.Equal]:_t(ft(2,2,u),f),[A.NotEqual]:_t(ft(2,2,u),f),[A.GreaterThan]:_t(ft(2,2,u),f),[A.GreaterThanOrEqualTo]:_t(ft(2,2,u),f),[A.LessThan]:_t(ft(2,2,u),f),[A.LessThanOrEqualTo]:_t(ft(2,2,u),f),[A.Multiply]:_t(ft(2,1/0,g),g),[A.Divide]:_t(ft(2,2,g),g),[A.Add]:_t(ft(2,1/0,g),g),[A.Subtract]:_t(ft(2,2,g),g),[A.Clamp]:_t(ft(3,3,g),g),[A.Mod]:_t(ft(2,2,g),g),[A.Pow]:_t(ft(2,2,g),g),[A.Abs]:_t(ft(1,1,g),g),[A.Floor]:_t(ft(1,1,g),g),[A.Ceil]:_t(ft(1,1,g),g),[A.Round]:_t(ft(1,1,g),g),[A.Sin]:_t(ft(1,1,g),g),[A.Cos]:_t(ft(1,1,g),g),[A.Atan]:_t(ft(1,2,g),g),[A.Sqrt]:_t(ft(1,1,g),g),[A.Match]:_t(ft(4,1/0,D|g),u)};function ft(i,e,s){return function(C,x){const _=C[0],G=C.length-1;if(i===e){if(G!==i)throw new Error(`Expected ${i} argument${1===i?"":"s"} for operation ${_}, got ${G}`)}else if(G<i||G>e)throw new Error(`Expected ${i} to ${e} arguments for operation ${_}, got ${G}`);const N=new Array(G);for(let et=0;et<G;++et){const rt=tt(C[et+1],x);if(!W(s,rt.type)){const lt=k(s),ut=k(rt.type);throw new Error(`Unexpected type for argument ${et} of ${_} operation : got ${lt} but expected ${ut}`)}N[et]=rt}return N}}function _t(i,e){return function(s,C){const x=s[0],_=i(s,C);return new T(e,x,..._)}}function wt(i,e,s){const C=tt(i,s);if(!W(e,C.type)){const x=k(e),_=k(C.type);throw new Error(`Expected expression to be of type ${x}, got ${_}`)}return Lt(C,s)}function Lt(i,e){if(i instanceof m)return function(){return i.value};const s=i.operator;switch(s){case A.Number:case A.String:return function oe(i,e){const s=i.operator,C=i.args.length,x=new Array(C);for(let _=0;_<C;++_)x[_]=Lt(i.args[_],e);switch(s){case A.Number:case A.String:return _=>{for(let G=0;G<C;++G){const N=x[G](_);if(typeof N===s)return N}throw new Error(`Expected one of the values to be a ${s}`)};default:throw new Error(`Unsupported assertion operator ${s}`)}}(i,e);case A.Get:case A.Var:return function ae(i,e){const s=i.args[0];if(!(s instanceof m))throw new Error("Expected literal name");const C=s.value;if("string"!=typeof C)throw new Error("Expected string name");switch(i.operator){case A.Get:return x=>x.properties[C];case A.Var:return x=>x.variables[C];default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}(i);case A.Resolution:return C=>C.resolution;case A.Any:case A.All:case A.Not:return function _e(i,e){const s=i.operator,C=i.args.length,x=new Array(C);for(let _=0;_<C;++_)x[_]=Lt(i.args[_],e);switch(s){case A.Any:return _=>{for(let G=0;G<C;++G)if(x[G](_))return!0;return!1};case A.All:return _=>{for(let G=0;G<C;++G)if(!x[G](_))return!1;return!0};case A.Not:return _=>!x[0](_);default:throw new Error(`Unsupported logical operator ${s}`)}}(i,e);case A.Equal:case A.NotEqual:case A.LessThan:case A.LessThanOrEqualTo:case A.GreaterThan:case A.GreaterThanOrEqualTo:return function te(i,e){const s=i.operator,C=Lt(i.args[0],e),x=Lt(i.args[1],e);switch(s){case A.Equal:return _=>C(_)===x(_);case A.NotEqual:return _=>C(_)!==x(_);case A.LessThan:return _=>C(_)<x(_);case A.LessThanOrEqualTo:return _=>C(_)<=x(_);case A.GreaterThan:return _=>C(_)>x(_);case A.GreaterThanOrEqualTo:return _=>C(_)>=x(_);default:throw new Error(`Unsupported comparison operator ${s}`)}}(i,e);case A.Multiply:case A.Divide:case A.Add:case A.Subtract:case A.Clamp:case A.Mod:case A.Pow:case A.Abs:case A.Floor:case A.Ceil:case A.Round:case A.Sin:case A.Cos:case A.Atan:case A.Sqrt:return function me(i,e){const s=i.operator,C=i.args.length,x=new Array(C);for(let _=0;_<C;++_)x[_]=Lt(i.args[_],e);switch(s){case A.Multiply:return _=>{let G=1;for(let N=0;N<C;++N)G*=x[N](_);return G};case A.Divide:return _=>x[0](_)/x[1](_);case A.Add:return _=>{let G=0;for(let N=0;N<C;++N)G+=x[N](_);return G};case A.Subtract:return _=>x[0](_)-x[1](_);case A.Clamp:return _=>{const G=x[0](_),N=x[1](_);if(G<N)return N;const et=x[2](_);return G>et?et:G};case A.Mod:return _=>x[0](_)%x[1](_);case A.Pow:return _=>Math.pow(x[0](_),x[1](_));case A.Abs:return _=>Math.abs(x[0](_));case A.Floor:return _=>Math.floor(x[0](_));case A.Ceil:return _=>Math.ceil(x[0](_));case A.Round:return _=>Math.round(x[0](_));case A.Sin:return _=>Math.sin(x[0](_));case A.Cos:return _=>Math.cos(x[0](_));case A.Atan:return 2===C?_=>Math.atan2(x[0](_),x[1](_)):_=>Math.atan(x[0](_));case A.Sqrt:return _=>Math.sqrt(x[0](_));default:throw new Error(`Unsupported numeric operator ${s}`)}}(i,e);case A.Match:return function xe(i,e){const s=i.args.length,C=new Array(s);for(let x=0;x<s;++x)C[x]=Lt(i.args[x],e);return x=>{const _=C[0](x);for(let G=1;G<s;G+=2)if(_===C[G](x))return C[G+1](x);return C[s-1](x)}}(i,e);default:throw new Error(`Unsupported operator ${s}`)}}function zt(i){return!0}function Ht(i){const e=B(),s=i.length,C=new Array(s);for(let G=0;G<s;++G)C[G]=jt(i[G],e);const x={variables:{},properties:{},resolution:NaN},_=new Array(s);return function(G,N){x.properties=G.getPropertiesInternal(),x.resolution=N;for(let et=0;et<s;++et)_[et]=C[et](x);return _}}function jt(i,e){const s=Vt(i,"",e),C=Kt(i,"",e),x=function le(i,e){const s="text-",C=Zt(i,s+"value",e);if(!C)return null;const x=Vt(i,s,e),_=Vt(i,s+"background-",e),G=Kt(i,s,e),N=Kt(i,s+"background-",e),et=Zt(i,s+"font",e),rt=Ot(i,s+"max-angle",e),lt=Ot(i,s+"offset-x",e),ut=Ot(i,s+"offset-y",e),at=Bt(i,s+"overflow",e),Tt=Zt(i,s+"placement",e),Et=Ot(i,s+"repeat",e),ct=Qt(i,s+"scale",e),dt=Bt(i,s+"rotate-with-view",e),ht=Ot(i,s+"rotation",e),It=Zt(i,s+"align",e),vt=Zt(i,s+"justify",e),Mt=Zt(i,s+"baseline",e),q=he(i,s+"padding",e),St=new H({});return function(yt){if(St.setText(C(yt)),x&&St.setFill(x(yt)),_&&St.setBackgroundFill(_(yt)),G&&St.setStroke(G(yt)),N&&St.setBackgroundStroke(N(yt)),et&&St.setFont(et(yt)),rt&&St.setMaxAngle(rt(yt)),lt&&St.setOffsetX(lt(yt)),ut&&St.setOffsetY(ut(yt)),at&&St.setOverflow(at(yt)),Tt){const Ct=Tt(yt);if("point"!==Ct&&"line"!==Ct)throw new Error("Expected point or line for text-placement");St.setPlacement(Ct)}if(Et&&St.setRepeat(Et(yt)),ct&&St.setScale(ct(yt)),dt&&St.setRotateWithView(dt(yt)),ht&&St.setRotation(ht(yt)),It){const Ct=It(yt);if("left"!==Ct&&"center"!==Ct&&"right"!==Ct&&"end"!==Ct&&"start"!==Ct)throw new Error("Expected left, right, center, start, or end for text-align");St.setTextAlign(Ct)}if(vt){const Ct=vt(yt);if("left"!==Ct&&"right"!==Ct&&"center"!==Ct)throw new Error("Expected left, right, or center for text-justify");St.setJustify(Ct)}if(Mt){const Ct=Mt(yt);if("bottom"!==Ct&&"top"!==Ct&&"middle"!==Ct&&"alphabetic"!==Ct&&"hanging"!==Ct)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");St.setTextBaseline(Ct)}return q&&St.setPadding(q(yt)),St}}(i,e),_=function Jt(i,e){return"icon-src"in i?function Ee(i,e){const s="icon-",C=s+"src",x=w(i[C],C),_=$t(i,s+"anchor",e),G=Qt(i,s+"scale",e),N=Ot(i,s+"opacity",e),et=$t(i,s+"displacement",e),rt=Ot(i,s+"rotation",e),lt=Bt(i,s+"rotate-with-view",e),ut=r(i,s+"anchor-origin"),at=c(i,s+"anchor-x-units"),Tt=c(i,s+"anchor-y-units"),Et=function S(i,e){const s=i[e];if(void 0!==s)return b(s,e)}(i,s+"color"),ct=function l(i,e){const s=i[e];if(void 0!==s){if("string"!=typeof s)throw new Error(`Expected a string for ${e}`);return s}}(i,s+"cross-origin"),dt=function d(i,e){const s=i[e];if(void 0!==s)return I(s,e)}(i,s+"offset"),ht=r(i,s+"offset-origin"),It=ot(i,s+"width"),vt=ot(i,s+"height"),Mt=function t(i,e){const s=i[e];if(void 0!==s){if("number"==typeof s)return(0,j.Pq)(s);if(!Array.isArray(s))throw new Error(`Expected a number or size array for ${e}`);if(2!==s.length||"number"!=typeof s[0]||"number"!=typeof s[1])throw new Error(`Expected a number or size array for ${e}`);return s}}(i,s+"size"),q=E(i,s+"declutter"),St=new M.Z({src:x,anchorOrigin:ut,anchorXUnits:at,anchorYUnits:Tt,color:Et,crossOrigin:ct,offset:dt,offsetOrigin:ht,height:vt,width:It,size:Mt,declutterMode:q});return function(yt){return N&&St.setOpacity(N(yt)),et&&St.setDisplacement(et(yt)),rt&&St.setRotation(rt(yt)),lt&&St.setRotateWithView(lt(yt)),G&&St.setScale(G(yt)),_&&St.setAnchor(_(yt)),St}}(i,e):"shape-points"in i?function Se(i,e){const s="shape-",C=s+"points",x=L(i[C],C),_=Vt(i,s,e),G=Kt(i,s,e),N=Qt(i,s+"scale",e),et=$t(i,s+"displacement",e),rt=Ot(i,s+"rotation",e),lt=Bt(i,s+"rotate-with-view",e),ut=ot(i,s+"radius"),at=ot(i,s+"radius1"),Tt=ot(i,s+"radius2"),Et=ot(i,s+"angle"),ct=E(i,s+"declutter-mode"),dt=new pt.Z({points:x,radius:ut,radius1:at,radius2:Tt,angle:Et,declutterMode:ct});return function(ht){return _&&dt.setFill(_(ht)),G&&dt.setStroke(G(ht)),et&&dt.setDisplacement(et(ht)),rt&&dt.setRotation(rt(ht)),lt&&dt.setRotateWithView(lt(ht)),N&&dt.setScale(N(ht)),dt}}(i,e):"circle-radius"in i?function Wt(i,e){const s="circle-",C=Vt(i,s,e),x=Kt(i,s,e),_=Ot(i,s+"radius",e),G=Qt(i,s+"scale",e),N=$t(i,s+"displacement",e),et=Ot(i,s+"rotation",e),rt=Bt(i,s+"rotate-with-view",e),lt=E(i,s+"declutter-mode"),ut=new F.Z({radius:5,declutterMode:lt});return function(at){return _&&ut.setRadius(_(at)),C&&ut.setFill(C(at)),x&&ut.setStroke(x(at)),N&&ut.setDisplacement(N(at)),et&&ut.setRotation(et(at)),rt&&ut.setRotateWithView(rt(at)),G&&ut.setScale(G(at)),ut}}(i,e):null}(i,e),G=Ot(i,"z-index",e),N=new nt.ZP;return function(et){let rt=!0;if(s){const lt=s(et);lt&&(rt=!1),N.setFill(lt)}if(C){const lt=C(et);lt&&(rt=!1),N.setStroke(lt)}if(x){const lt=x(et);lt&&(rt=!1),N.setText(lt)}if(_){const lt=_(et);lt&&(rt=!1),N.setImage(lt)}return G&&N.setZIndex(G(et)),rt?null:N}}function Vt(i,e,s){const C=Yt(i,e+"fill-color",s);if(!C)return null;const x=new $.Z;return function(_){const G=C(_);return"none"===G?null:(x.setColor(G),x)}}function Kt(i,e,s){const C=Ot(i,e+"stroke-width",s),x=Yt(i,e+"stroke-color",s);if(!C&&!x)return null;const _=Zt(i,e+"stroke-line-cap",s),G=Zt(i,e+"stroke-line-join",s),N=he(i,e+"stroke-line-dash",s),et=Ot(i,e+"stroke-line-dash-offset",s),rt=Ot(i,e+"stroke-miter-limit",s),lt=new Q.Z;return function(ut){if(x){const at=x(ut);if("none"===at)return null;lt.setColor(at)}if(C&&lt.setWidth(C(ut)),_){const at=_(ut);if("butt"!==at&&"round"!==at&&"square"!==at)throw new Error("Expected butt, round, or square line cap");lt.setLineCap(at)}if(G){const at=G(ut);if("bevel"!==at&&"round"!==at&&"miter"!==at)throw new Error("Expected bevel, round, or miter line join");lt.setLineJoin(at)}return N&&lt.setLineDash(N(ut)),et&&lt.setLineDashOffset(et(ut)),rt&&lt.setMiterLimit(rt(ut)),lt}}function Ot(i,e,s){if(!(e in i))return;const C=wt(i[e],g,s);return function(x){return L(C(x),e)}}function Zt(i,e,s){if(!(e in i))return null;const C=wt(i[e],D,s);return function(x){return w(C(x),e)}}function Bt(i,e,s){if(!(e in i))return null;const C=wt(i[e],f,s);return function(x){const _=C(x);if("boolean"!=typeof _)throw new Error(`Expected a boolean for ${e}`);return _}}function Yt(i,e,s){if(!(e in i))return null;const C=wt(i[e],n|D,s);return function(x){return b(C(x),e)}}function he(i,e,s){if(!(e in i))return null;const C=wt(i[e],h,s);return function(x){return I(C(x),e)}}function $t(i,e,s){if(!(e in i))return null;const C=wt(i[e],h,s);return function(x){const _=I(C(x),e);if(2!==_.length)throw new Error(`Expected two numbers for ${e}`);return _}}function Qt(i,e,s){if(!(e in i))return null;const C=wt(i[e],h|g,s);return function(x){return function P(i,e){if("number"==typeof i)return i;const s=I(i,e);if(2!==s.length)throw new Error(`Expected an array of two numbers for ${e}`);return s}(C(x),e)}}function ot(i,e){const s=i[e];if(void 0!==s){if("number"!=typeof s)throw new Error(`Expected a number for ${e}`);return s}}function r(i,e){const s=i[e];if(void 0!==s){if("bottom-left"!==s&&"bottom-right"!==s&&"top-left"!==s&&"top-right"!==s)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return s}}function c(i,e){const s=i[e];if(void 0!==s){if("pixels"!==s&&"fraction"!==s)throw new Error(`Expected pixels or fraction for ${e}`);return s}}function E(i,e){const s=i[e];if(void 0!==s){if("string"!=typeof s)throw new Error(`Expected a string for ${e}`);if("declutter"!==s&&"obstacle"!==s&&"none"!==s)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return s}}function I(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const s=i.length;for(let C=0;C<s;++C)if("number"!=typeof i[C])throw new Error(`Expected an array of numbers for ${e}`);return i}function w(i,e){if("string"!=typeof i)throw new Error(`Expected a string for ${e}`);return i}function L(i,e){if("number"!=typeof i)throw new Error(`Expected a number for ${e}`);return i}function b(i,e){if("string"==typeof i)return i;const s=I(i,e),C=s.length;if(C<3||C>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return s}const V=class z extends it.Z{constructor(e){e=e||{};const s=Object.assign({},e);delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,super(s),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new K(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){this.style_=function J(i){if(void 0===i)return nt.yF;if(!i)return null;if("function"==typeof i||i instanceof nt.ZP)return i;if(!Array.isArray(i))return Ht([i]);if(0===i.length)return[];const e=i.length,s=i[0];if(s instanceof nt.ZP){const x=new Array(e);for(let _=0;_<e;++_){const G=i[_];if(!(G instanceof nt.ZP))throw new Error("Expected a list of style instances");x[_]=G}return x}if("style"in s){const x=new Array(e);for(let _=0;_<e;++_){const G=i[_];if(!("style"in G))throw new Error("Expected a list of rules with a style property");x[_]=G}return function pe(i){const s=function ye(i,e){const s=i.length,C=new Array(s);for(let x=0;x<s;++x){const _=i[x],G="filter"in _?wt(_.filter,f,e):zt;let N;if(Array.isArray(_.style)){const et=_.style.length;N=new Array(et);for(let rt=0;rt<et;++rt)N[rt]=jt(_.style[rt],e)}else N=[jt(_.style,e)];C[x]={filter:G,styles:N}}return function(x){const _=[];let G=!1;for(let N=0;N<s;++N)if((0,C[N].filter)(x)&&(!i[N].else||!G)){G=!0;for(const rt of C[N].styles){const lt=rt(x);lt&&_.push(lt)}}return _}}(i,B()),C={variables:{},properties:{},resolution:NaN};return function(x,_){return C.properties=x.getPropertiesInternal(),C.resolution=_,s(C)}}(x)}return Ht(i)}(e),this.styleFunction_=null===e?void 0:(0,nt.J$)(this.style_),this.changed()}}},7053:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>F});var it=v(9988),K=v(5695);const F=class nt extends it.Z{constructor(M){super(M)}createRenderer(){return new K.Z(this)}}},7639:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>K});const K=class it{drawCustom(F,$,M,pt){}drawGeometry(F){}setStyle(F){}drawCircle(F,$){}drawFeature(F,$){}drawGeometryCollection(F,$){}drawLineString(F,$){}drawMultiLineString(F,$){}drawMultiPoint(F,$){}drawMultiPolygon(F,$){}drawPoint(F,$){}drawPolygon(F,$){}drawText(F,$){}setFillStrokeStyle(F,$){}setImageStyle(F,$){}setTextStyle(F,$){}}},3620:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>y});var it=v(7639),K=v(5813),nt=v(483),F=v(4686),$=v(2456),M=v(760),pt=v(2156),Q=v(874),j=v(2774);const y=class p extends it.Z{constructor(a,R,o,f,g,D,n){super(),this.context_=a,this.pixelRatio_=R,this.extent_=o,this.transform_=f,this.transformRotation_=f?(0,pt.FH)(Math.atan2(f[1],f[0]),10):0,this.viewRotation_=g,this.squaredTolerance_=D,this.userTransform_=n,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,nt.Ue)()}drawImages_(a,R,o,f){if(!this.image_)return;const g=(0,Q.vT)(a,R,o,f,this.transform_,this.pixelCoordinates_),D=this.context_,n=this.tmpLocalTransform_,h=D.globalAlpha;1!=this.imageOpacity_&&(D.globalAlpha=h*this.imageOpacity_);let u=this.imageRotation_;0===this.transformRotation_&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let O=0,Z=g.length;O<Z;O+=2){const k=g[O]-this.imageAnchorX_,U=g[O+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const W=k+this.imageAnchorX_,X=U+this.imageAnchorY_;(0,nt.qC)(n,W,X,1,1,u,-W,-X),D.save(),D.transform.apply(D,n),D.translate(W,X),D.scale(this.imageScale_[0],this.imageScale_[1]),D.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),D.restore()}else D.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,k,U,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(D.globalAlpha=h)}drawText_(a,R,o,f){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const g=(0,Q.vT)(a,R,o,f,this.transform_,this.pixelCoordinates_),D=this.context_;let n=this.textRotation_;for(0===this.transformRotation_&&(n-=this.viewRotation_),this.textRotateWithView_&&(n+=this.viewRotation_);R<o;R+=f){const h=g[R]+this.textOffsetX_,u=g[R+1]+this.textOffsetY_;0!==n||1!=this.textScale_[0]||1!=this.textScale_[1]?(D.save(),D.translate(h-this.textOffsetX_,u-this.textOffsetY_),D.rotate(n),D.translate(this.textOffsetX_,this.textOffsetY_),D.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&D.strokeText(this.text_,0,0),this.textFillState_&&D.fillText(this.text_,0,0),D.restore()):(this.textStrokeState_&&D.strokeText(this.text_,h,u),this.textFillState_&&D.fillText(this.text_,h,u))}}moveToLineTo_(a,R,o,f,g){const D=this.context_,n=(0,Q.vT)(a,R,o,f,this.transform_,this.pixelCoordinates_);D.moveTo(n[0],n[1]);let h=n.length;g&&(h-=2);for(let u=2;u<h;u+=2)D.lineTo(n[u],n[u+1]);return g&&D.closePath(),o}drawRings_(a,R,o,f){for(let g=0,D=o.length;g<D;++g)R=this.moveToLineTo_(a,R,o[g],f,!0);return R}drawCircle(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.kK)(this.extent_,a.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const R=(0,j.Kr)(a,this.transform_,this.pixelCoordinates_),o=R[2]-R[0],f=R[3]-R[1],g=Math.sqrt(o*o+f*f),D=this.context_;D.beginPath(),D.arc(R[0],R[1],g,0,2*Math.PI),this.fillState_&&D.fill(),this.strokeState_&&D.stroke()}""!==this.text_&&this.drawText_(a.getCenter(),0,2,2)}}setStyle(a){this.setFillStrokeStyle(a.getFill(),a.getStroke()),this.setImageStyle(a.getImage()),this.setTextStyle(a.getText())}setTransform(a){this.transform_=a}drawGeometry(a){switch(a.getType()){case"Point":this.drawPoint(a);break;case"LineString":this.drawLineString(a);break;case"Polygon":this.drawPolygon(a);break;case"MultiPoint":this.drawMultiPoint(a);break;case"MultiLineString":this.drawMultiLineString(a);break;case"MultiPolygon":this.drawMultiPolygon(a);break;case"GeometryCollection":this.drawGeometryCollection(a);break;case"Circle":this.drawCircle(a)}}drawFeature(a,R){const o=R.getGeometryFunction()(a);o&&(this.setStyle(R),this.drawGeometry(o))}drawGeometryCollection(a){const R=a.getGeometriesArray();for(let o=0,f=R.length;o<f;++o)this.drawGeometry(R[o])}drawPoint(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const R=a.getFlatCoordinates(),o=a.getStride();this.image_&&this.drawImages_(R,0,R.length,o),""!==this.text_&&this.drawText_(R,0,R.length,o)}drawMultiPoint(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const R=a.getFlatCoordinates(),o=a.getStride();this.image_&&this.drawImages_(R,0,R.length,o),""!==this.text_&&this.drawText_(R,0,R.length,o)}drawLineString(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.kK)(this.extent_,a.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const R=this.context_,o=a.getFlatCoordinates();R.beginPath(),this.moveToLineTo_(o,0,o.length,a.getStride(),!1),R.stroke()}if(""!==this.text_){const R=a.getFlatMidpoint();this.drawText_(R,0,2,2)}}}drawMultiLineString(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const R=a.getExtent();if((0,M.kK)(this.extent_,R)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const o=this.context_,f=a.getFlatCoordinates();let g=0;const D=a.getEnds(),n=a.getStride();o.beginPath();for(let h=0,u=D.length;h<u;++h)g=this.moveToLineTo_(f,g,D[h],n,!1);o.stroke()}if(""!==this.text_){const o=a.getFlatMidpoints();this.drawText_(o,0,o.length,2)}}}drawPolygon(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.kK)(this.extent_,a.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const R=this.context_;R.beginPath(),this.drawRings_(a.getOrientedFlatCoordinates(),0,a.getEnds(),a.getStride()),this.fillState_&&R.fill(),this.strokeState_&&R.stroke()}if(""!==this.text_){const R=a.getFlatInteriorPoint();this.drawText_(R,0,2,2)}}}drawMultiPolygon(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.kK)(this.extent_,a.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const R=this.context_,o=a.getOrientedFlatCoordinates();let f=0;const g=a.getEndss(),D=a.getStride();R.beginPath();for(let n=0,h=g.length;n<h;++n)f=this.drawRings_(o,f,g[n],D);this.fillState_&&R.fill(),this.strokeState_&&R.stroke()}if(""!==this.text_){const R=a.getFlatInteriorPoints();this.drawText_(R,0,R.length,2)}}}setContextFillState_(a){const R=this.context_,o=this.contextFillState_;o?o.fillStyle!=a.fillStyle&&(o.fillStyle=a.fillStyle,R.fillStyle=a.fillStyle):(R.fillStyle=a.fillStyle,this.contextFillState_={fillStyle:a.fillStyle})}setContextStrokeState_(a){const R=this.context_,o=this.contextStrokeState_;o?(o.lineCap!=a.lineCap&&(o.lineCap=a.lineCap,R.lineCap=a.lineCap),(0,$.fS)(o.lineDash,a.lineDash)||R.setLineDash(o.lineDash=a.lineDash),o.lineDashOffset!=a.lineDashOffset&&(o.lineDashOffset=a.lineDashOffset,R.lineDashOffset=a.lineDashOffset),o.lineJoin!=a.lineJoin&&(o.lineJoin=a.lineJoin,R.lineJoin=a.lineJoin),o.lineWidth!=a.lineWidth&&(o.lineWidth=a.lineWidth,R.lineWidth=a.lineWidth),o.miterLimit!=a.miterLimit&&(o.miterLimit=a.miterLimit,R.miterLimit=a.miterLimit),o.strokeStyle!=a.strokeStyle&&(o.strokeStyle=a.strokeStyle,R.strokeStyle=a.strokeStyle)):(R.lineCap=a.lineCap,R.setLineDash(a.lineDash),R.lineDashOffset=a.lineDashOffset,R.lineJoin=a.lineJoin,R.lineWidth=a.lineWidth,R.miterLimit=a.miterLimit,R.strokeStyle=a.strokeStyle,this.contextStrokeState_={lineCap:a.lineCap,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset,lineJoin:a.lineJoin,lineWidth:a.lineWidth,miterLimit:a.miterLimit,strokeStyle:a.strokeStyle})}setContextTextState_(a){const R=this.context_,o=this.contextTextState_,f=a.textAlign?a.textAlign:F.PH;o?(o.font!=a.font&&(o.font=a.font,R.font=a.font),o.textAlign!=f&&(o.textAlign=f,R.textAlign=f),o.textBaseline!=a.textBaseline&&(o.textBaseline=a.textBaseline,R.textBaseline=a.textBaseline)):(R.font=a.font,R.textAlign=f,R.textBaseline=a.textBaseline,this.contextTextState_={font:a.font,textAlign:f,textBaseline:a.textBaseline})}setFillStrokeStyle(a,R){if(a){const o=a.getColor();this.fillState_={fillStyle:(0,K.y)(o||F.bL)}}else this.fillState_=null;if(R){const o=R.getColor(),f=R.getLineCap(),g=R.getLineDash(),D=R.getLineDashOffset(),n=R.getLineJoin(),h=R.getWidth(),u=R.getMiterLimit(),O=g||F.X9;this.strokeState_={lineCap:void 0!==f?f:F.mb,lineDash:1===this.pixelRatio_?O:O.map(Z=>Z*this.pixelRatio_),lineDashOffset:(D||F.He)*this.pixelRatio_,lineJoin:void 0!==n?n:F.rc,lineWidth:(void 0!==h?h:F.yC)*this.pixelRatio_,miterLimit:void 0!==u?u:F.V4,strokeStyle:(0,K.y)(o||F.Tx)}}else this.strokeState_=null}setImageStyle(a){let R;if(!a||!(R=a.getSize()))return void(this.image_=null);const o=a.getPixelRatio(this.pixelRatio_),f=a.getAnchor(),g=a.getOrigin();this.image_=a.getImage(this.pixelRatio_),this.imageAnchorX_=f[0]*o,this.imageAnchorY_=f[1]*o,this.imageHeight_=R[1]*o,this.imageOpacity_=a.getOpacity(),this.imageOriginX_=g[0],this.imageOriginY_=g[1],this.imageRotateWithView_=a.getRotateWithView(),this.imageRotation_=a.getRotation();const D=a.getScaleArray();this.imageScale_=[D[0]*this.pixelRatio_/o,D[1]*this.pixelRatio_/o],this.imageWidth_=R[0]*o}setTextStyle(a){if(a){const R=a.getFill();if(R){const U=R.getColor();this.textFillState_={fillStyle:(0,K.y)(U||F.bL)}}else this.textFillState_=null;const o=a.getStroke();if(o){const U=o.getColor(),W=o.getLineCap(),X=o.getLineDash(),m=o.getLineDashOffset(),T=o.getLineJoin(),B=o.getWidth(),tt=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==W?W:F.mb,lineDash:X||F.X9,lineDashOffset:m||F.He,lineJoin:void 0!==T?T:F.rc,lineWidth:void 0!==B?B:F.yC,miterLimit:void 0!==tt?tt:F.V4,strokeStyle:(0,K.y)(U||F.Tx)}}else this.textStrokeState_=null;const f=a.getFont(),g=a.getOffsetX(),D=a.getOffsetY(),n=a.getRotateWithView(),h=a.getRotation(),u=a.getScaleArray(),O=a.getText(),Z=a.getTextAlign(),k=a.getTextBaseline();this.textState_={font:void 0!==f?f:F.Df,textAlign:void 0!==Z?Z:F.PH,textBaseline:void 0!==k?k:F.ru},this.text_=void 0!==O?Array.isArray(O)?O.reduce((U,W,X)=>U+(X%2?" ":W),""):O:"",this.textOffsetX_=void 0!==g?this.pixelRatio_*g:0,this.textOffsetY_=void 0!==D?this.pixelRatio_*D:0,this.textRotateWithView_=void 0!==n&&n,this.textRotation_=void 0!==h?h:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""}}},5695:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>Qt});const it={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},K=[it.FILL],nt=[it.STROKE],F=[it.BEGIN_PATH],$=[it.CLOSE_PATH],M=it;var pt=v(2401),Q=v(7639),j=v(5813),p=v(760),y=v(4686),H=v(2456),a=v(392);const o=class R extends Q.Z{constructor(t,l,r,c){super(),this.tolerance=t,this.maxExtent=l,this.pixelRatio=c,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const l=this.pixelRatio;return 1==l?t:t.map(function(r){return r*l})}appendFlatPointCoordinates(t,l){const r=this.getBufferedMaxExtent(),c=this.tmpCoordinate_,d=this.coordinates;let E=d.length;for(let S=0,I=t.length;S<I;S+=l)c[0]=t[S],c[1]=t[S+1],(0,p.b8)(r,c)&&(d[E++]=c[0],d[E++]=c[1]);return E}appendFlatLineCoordinates(t,l,r,c,d,E){const S=this.coordinates;let I=S.length;const w=this.getBufferedMaxExtent();E&&(l+=c);let L=t[l],b=t[l+1];const P=this.tmpCoordinate_;let z,J,V,Y=!0;for(z=l+c;z<r;z+=c)P[0]=t[z],P[1]=t[z+1],V=(0,p.pX)(w,P),V!==J?(Y&&(S[I++]=L,S[I++]=b,Y=!1),S[I++]=P[0],S[I++]=P[1]):V===pt.Z.INTERSECTING?(S[I++]=P[0],S[I++]=P[1],Y=!1):Y=!0,L=P[0],b=P[1],J=V;return(d&&Y||z===l+c)&&(S[I++]=L,S[I++]=b),I}drawCustomCoordinates_(t,l,r,c,d){for(let E=0,S=r.length;E<S;++E){const I=r[E],w=this.appendFlatLineCoordinates(t,l,I,c,!1,!1);d.push(w),l=I}return l}drawCustom(t,l,r,c){this.beginGeometry(t,l);const d=t.getType(),E=t.getStride(),S=this.coordinates.length;let I,w,L,b,P;switch(d){case"MultiPolygon":I=t.getOrientedFlatCoordinates(),b=[];const Y=t.getEndss();P=0;for(let z=0,J=Y.length;z<J;++z){const V=[];P=this.drawCustomCoordinates_(I,P,Y[z],E,V),b.push(V)}this.instructions.push([M.CUSTOM,S,b,t,r,a.ug]),this.hitDetectionInstructions.push([M.CUSTOM,S,b,t,c||r,a.ug]);break;case"Polygon":case"MultiLineString":L=[],I="Polygon"==d?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),P=this.drawCustomCoordinates_(I,0,t.getEnds(),E,L),this.instructions.push([M.CUSTOM,S,L,t,r,a.o1]),this.hitDetectionInstructions.push([M.CUSTOM,S,L,t,c||r,a.o1]);break;case"LineString":case"Circle":I=t.getFlatCoordinates(),w=this.appendFlatLineCoordinates(I,0,I.length,E,!1,!1),this.instructions.push([M.CUSTOM,S,w,t,r,a.Ml]),this.hitDetectionInstructions.push([M.CUSTOM,S,w,t,c||r,a.Ml]);break;case"MultiPoint":I=t.getFlatCoordinates(),w=this.appendFlatPointCoordinates(I,E),w>S&&(this.instructions.push([M.CUSTOM,S,w,t,r,a.Ml]),this.hitDetectionInstructions.push([M.CUSTOM,S,w,t,c||r,a.Ml]));break;case"Point":I=t.getFlatCoordinates(),this.coordinates.push(I[0],I[1]),w=this.coordinates.length,this.instructions.push([M.CUSTOM,S,w,t,r]),this.hitDetectionInstructions.push([M.CUSTOM,S,w,t,c||r])}this.endGeometry(l)}beginGeometry(t,l){this.beginGeometryInstruction1_=[M.BEGIN_GEOMETRY,l,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[M.BEGIN_GEOMETRY,l,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let l;t.reverse();const r=t.length;let c,d,E=-1;for(l=0;l<r;++l)c=t[l],d=c[0],d==M.END_GEOMETRY?E=l:d==M.BEGIN_GEOMETRY&&(c[2]=l,(0,H.FZ)(this.hitDetectionInstructions,E,l),E=-1)}setFillStrokeStyle(t,l){const r=this.state;if(t){const c=t.getColor();r.fillStyle=(0,j.y)(c||y.bL)}else r.fillStyle=void 0;if(l){const c=l.getColor();r.strokeStyle=(0,j.y)(c||y.Tx);const d=l.getLineCap();r.lineCap=void 0!==d?d:y.mb;const E=l.getLineDash();r.lineDash=E?E.slice():y.X9;const S=l.getLineDashOffset();r.lineDashOffset=S||y.He;const I=l.getLineJoin();r.lineJoin=void 0!==I?I:y.rc;const w=l.getWidth();r.lineWidth=void 0!==w?w:y.yC;const L=l.getMiterLimit();r.miterLimit=void 0!==L?L:y.V4,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(t){const l=t.fillStyle,r=[M.SET_FILL_STYLE,l];return"string"!=typeof l&&r.push(!0),r}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[M.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,l){const r=t.fillStyle;("string"!=typeof r||t.currentFillStyle!=r)&&(void 0!==r&&this.instructions.push(l.call(this,t)),t.currentFillStyle=r)}updateStrokeStyle(t,l){const r=t.strokeStyle,c=t.lineCap,d=t.lineDash,E=t.lineDashOffset,S=t.lineJoin,I=t.lineWidth,w=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=c||d!=t.currentLineDash&&!(0,H.fS)(t.currentLineDash,d)||t.currentLineDashOffset!=E||t.currentLineJoin!=S||t.currentLineWidth!=I||t.currentMiterLimit!=w)&&(void 0!==r&&l.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=c,t.currentLineDash=d,t.currentLineDashOffset=E,t.currentLineJoin=S,t.currentLineWidth=I,t.currentMiterLimit=w)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const l=[M.END_GEOMETRY,t];this.instructions.push(l),this.hitDetectionInstructions.push(l)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,p.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,p.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var h=v(9182);const O=class u extends o{constructor(t,l,r,c){super(t,l,r,c)}drawFlatCoordinatess_(t,l,r,c){const d=this.state,E=void 0!==d.fillStyle,S=void 0!==d.strokeStyle,I=r.length;this.instructions.push(F),this.hitDetectionInstructions.push(F);for(let w=0;w<I;++w){const L=r[w],b=this.coordinates.length,P=this.appendFlatLineCoordinates(t,l,L,c,!0,!S),Y=[M.MOVE_TO_LINE_TO,b,P];this.instructions.push(Y),this.hitDetectionInstructions.push(Y),S&&(this.instructions.push($),this.hitDetectionInstructions.push($)),l=L}return E&&(this.instructions.push(K),this.hitDetectionInstructions.push(K)),S&&(this.instructions.push(nt),this.hitDetectionInstructions.push(nt)),l}drawCircle(t,l){const r=this.state;if(void 0===r.fillStyle&&void 0===r.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,l),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([M.SET_FILL_STYLE,y.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,y.X9,y.He]);const E=t.getFlatCoordinates(),S=t.getStride(),I=this.coordinates.length;this.appendFlatLineCoordinates(E,0,E.length,S,!1,!1);const w=[M.CIRCLE,I];this.instructions.push(F,w),this.hitDetectionInstructions.push(F,w),void 0!==r.fillStyle&&(this.instructions.push(K),this.hitDetectionInstructions.push(K)),void 0!==r.strokeStyle&&(this.instructions.push(nt),this.hitDetectionInstructions.push(nt)),this.endGeometry(l)}drawPolygon(t,l){const r=this.state;if(void 0===r.fillStyle&&void 0===r.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,l),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([M.SET_FILL_STYLE,y.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,y.X9,y.He]);const E=t.getEnds(),S=t.getOrientedFlatCoordinates(),I=t.getStride();this.drawFlatCoordinatess_(S,0,E,I),this.endGeometry(l)}drawMultiPolygon(t,l){const r=this.state;if(void 0===r.fillStyle&&void 0===r.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,l),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([M.SET_FILL_STYLE,y.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,y.X9,y.He]);const E=t.getEndss(),S=t.getOrientedFlatCoordinates(),I=t.getStride();let w=0;for(let L=0,b=E.length;L<b;++L)w=this.drawFlatCoordinatess_(S,w,E[L],I);this.endGeometry(l)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const l=this.coordinates;for(let r=0,c=l.length;r<c;++r)l[r]=(0,h.uZ)(l[r],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var Z=v(119),k=v(2156);function U(ot,t,l,r,c){const d=[];let E=l,S=0,I=t.slice(l,2);for(;S<ot&&E+c<r;){const[w,L]=I.slice(-2),b=t[E+c],P=t[E+c+1],Y=Math.sqrt((b-w)*(b-w)+(P-L)*(P-L));if(S+=Y,S>=ot){const z=(ot-S+Y)/Y,J=(0,k.t7)(w,b,z),V=(0,k.t7)(L,P,z);I.push(J,V),d.push(I),I=[J,V],S==ot&&(E+=c),S=0}else if(S<ot)I.push(t[E+c],t[E+c+1]),E+=c;else{const z=Y-S,J=(0,k.t7)(w,b,z/Y),V=(0,k.t7)(L,P,z/Y);I.push(J,V),d.push(I),I=[J,V],S=0,E+=c}}return S>0&&d.push(I),d}function W(ot,t,l,r,c){let L,b,P,Y,z,J,V,i,e,s,d=l,E=l,S=0,I=0,w=l;for(b=l;b<r;b+=c){const C=t[b],x=t[b+1];void 0!==z&&(e=C-z,s=x-J,Y=Math.sqrt(e*e+s*s),void 0!==V&&(I+=P,L=Math.acos((V*e+i*s)/(P*Y)),L>ot&&(I>S&&(S=I,d=w,E=b),I=0,w=b-c)),P=Y,V=e,i=s),z=C,J=x}return I+=Y,I>S?[w,b]:[d,E]}const X={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},B={Circle:O,Default:o,Image:class f extends o{constructor(t,l,r,c){super(t,l,r,c),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,l){if(!this.image_)return;this.beginGeometry(t,l);const r=t.getFlatCoordinates(),c=t.getStride(),d=this.coordinates.length,E=this.appendFlatPointCoordinates(r,c);this.instructions.push([M.DRAW_IMAGE,d,E,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([M.DRAW_IMAGE,d,E,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(l)}drawMultiPoint(t,l){if(!this.image_)return;this.beginGeometry(t,l);const r=t.getFlatCoordinates(),c=t.getStride(),d=this.coordinates.length,E=this.appendFlatPointCoordinates(r,c);this.instructions.push([M.DRAW_IMAGE,d,E,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([M.DRAW_IMAGE,d,E,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(l)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,l){const r=t.getAnchor(),c=t.getSize(),d=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=c[1],this.opacity_=t.getOpacity(),this.originX_=d[0],this.originY_=d[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=c[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=l}},LineString:class D extends o{constructor(t,l,r,c){super(t,l,r,c)}drawFlatCoordinates_(t,l,r,c){const d=this.coordinates.length,E=this.appendFlatLineCoordinates(t,l,r,c,!1,!1),S=[M.MOVE_TO_LINE_TO,d,E];return this.instructions.push(S),this.hitDetectionInstructions.push(S),r}drawLineString(t,l){const r=this.state;if(void 0===r.strokeStyle||void 0===r.lineWidth)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,l),this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,y.X9,y.He],F);const E=t.getFlatCoordinates(),S=t.getStride();this.drawFlatCoordinates_(E,0,E.length,S),this.hitDetectionInstructions.push(nt),this.endGeometry(l)}drawMultiLineString(t,l){const r=this.state;if(void 0===r.strokeStyle||void 0===r.lineWidth)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,l),this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,y.X9,y.He],F);const E=t.getEnds(),S=t.getFlatCoordinates(),I=t.getStride();let w=0;for(let L=0,b=E.length;L<b;++L)w=this.drawFlatCoordinates_(S,w,E[L],I);this.hitDetectionInstructions.push(nt),this.endGeometry(l)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(nt),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(nt),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(F)}},Polygon:O,Text:class m extends o{constructor(t,l,r,c){super(t,l,r,c),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[y.bL]={fillStyle:y.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,l){const d=this.textState_;if(""===this.text_||!d||!this.textFillState_&&!this.textStrokeState_)return;const E=this.coordinates;let S=E.length;const I=t.getType();let w=null,L=t.getStride();if("line"!==d.placement||"LineString"!=I&&"MultiLineString"!=I&&"Polygon"!=I&&"MultiPolygon"!=I){let b=d.overflow?null:[];switch(I){case"Point":case"MultiPoint":w=t.getFlatCoordinates();break;case"LineString":w=t.getFlatMidpoint();break;case"Circle":w=t.getCenter();break;case"MultiLineString":w=t.getFlatMidpoints(),L=2;break;case"Polygon":w=t.getFlatInteriorPoint(),d.overflow||b.push(w[2]/this.resolution),L=3;break;case"MultiPolygon":const i=t.getFlatInteriorPoints();w=[];for(let e=0,s=i.length;e<s;e+=3)d.overflow||b.push(i[e+2]/this.resolution),w.push(i[e],i[e+1]);if(0===w.length)return;L=2}const P=this.appendFlatPointCoordinates(w,L);if(P===S)return;if(b&&(P-S)/2!=w.length/L){let i=S/2;b=b.filter((e,s)=>{const C=E[2*(i+s)]===w[s*L]&&E[2*(i+s)+1]===w[s*L+1];return C||--i,C})}this.saveTextStates_(),(d.backgroundFill||d.backgroundStroke)&&(this.setFillStrokeStyle(d.backgroundFill,d.backgroundStroke),d.backgroundFill&&this.updateFillStyle(this.state,this.createFill),d.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,l);let Y=d.padding;if(Y!=y.oB&&(d.scale[0]<0||d.scale[1]<0)){let i=d.padding[0],e=d.padding[1],s=d.padding[2],C=d.padding[3];d.scale[0]<0&&(e=-e,C=-C),d.scale[1]<0&&(i=-i,s=-s),Y=[i,e,s,C]}const z=this.pixelRatio;this.instructions.push([M.DRAW_IMAGE,S,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,Y==y.oB?y.oB:Y.map(function(i){return i*z}),!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,b]);const J=1/z,V=this.state.fillStyle;d.backgroundFill&&(this.state.fillStyle=y.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([M.DRAW_IMAGE,S,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[J,J],NaN,void 0,this.declutterImageWithText_,Y,!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?y.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,b]),d.backgroundFill&&(this.state.fillStyle=V,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(l)}else{if(!(0,p.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let b;if(w=t.getFlatCoordinates(),"LineString"==I)b=[w.length];else if("MultiLineString"==I)b=t.getEnds();else if("Polygon"==I)b=t.getEnds().slice(0,1);else if("MultiPolygon"==I){const J=t.getEndss();b=[];for(let V=0,i=J.length;V<i;++V)b.push(J[V][0])}this.beginGeometry(t,l);const P=d.repeat,Y=P?void 0:d.textAlign;let z=0;for(let J=0,V=b.length;J<V;++J){let i;i=P?U(P*this.resolution,w,z,b[J],L):[w.slice(z,b[J])];for(let e=0,s=i.length;e<s;++e){const C=i[e];let x=0,_=C.length;if(null==Y){const N=W(d.maxAngle,C,0,C.length,2);x=N[0],_=N[1]}for(let N=x;N<_;N+=L)E.push(C[N],C[N+1]);const G=E.length;z=b[J],this.drawChars_(S,G),S=G}}this.endGeometry(l)}}saveTextStates_(){const t=this.textStrokeState_,l=this.textState_,r=this.textFillState_,c=this.strokeKey_;t&&(c in this.strokeStates||(this.strokeStates[c]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const d=this.textKey_;d in this.textStates||(this.textStates[d]={font:l.font,textAlign:l.textAlign||y.PH,justify:l.justify,textBaseline:l.textBaseline||y.ru,scale:l.scale});const E=this.fillKey_;r&&(E in this.fillStates||(this.fillStates[E]={fillStyle:r.fillStyle}))}drawChars_(t,l){const r=this.textStrokeState_,c=this.textState_,d=this.strokeKey_,E=this.textKey_,S=this.fillKey_;this.saveTextStates_();const I=this.pixelRatio,w=X[c.textBaseline],L=this.textOffsetY_*I,b=this.text_,P=r?r.lineWidth*Math.abs(c.scale[0])/2:0;this.instructions.push([M.DRAW_CHARS,t,l,w,c.overflow,S,c.maxAngle,I,L,d,P*I,b,E,1]),this.hitDetectionInstructions.push([M.DRAW_CHARS,t,l,w,c.overflow,S&&y.bL,c.maxAngle,I,L,d,P*I,b,E,1/I])}setTextStyle(t,l){let r,c,d;if(t){const E=t.getFill();E?(c=this.textFillState_,c||(c={},this.textFillState_=c),c.fillStyle=(0,j.y)(E.getColor()||y.bL)):(c=null,this.textFillState_=c);const S=t.getStroke();if(S){d=this.textStrokeState_,d||(d={},this.textStrokeState_=d);const z=S.getLineDash(),J=S.getLineDashOffset(),V=S.getWidth(),i=S.getMiterLimit();d.lineCap=S.getLineCap()||y.mb,d.lineDash=z?z.slice():y.X9,d.lineDashOffset=void 0===J?y.He:J,d.lineJoin=S.getLineJoin()||y.rc,d.lineWidth=void 0===V?y.yC:V,d.miterLimit=void 0===i?y.V4:i,d.strokeStyle=(0,j.y)(S.getColor()||y.Tx)}else d=null,this.textStrokeState_=d;r=this.textState_;const I=t.getFont()||y.Df;(0,y.Qx)(I);const w=t.getScaleArray();r.overflow=t.getOverflow(),r.font=I,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.repeat=t.getRepeat(),r.justify=t.getJustify(),r.textBaseline=t.getTextBaseline()||y.ru,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||y.oB,r.scale=void 0===w?[1,1]:w;const L=t.getOffsetX(),b=t.getOffsetY(),P=t.getRotateWithView(),Y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===L?0:L,this.textOffsetY_=void 0===b?0:b,this.textRotateWithView_=void 0!==P&&P,this.textRotation_=void 0===Y?0:Y,this.strokeKey_=d?("string"==typeof d.strokeStyle?d.strokeStyle:(0,Z.sq)(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=c?"string"==typeof c.fillStyle?c.fillStyle:"|"+(0,Z.sq)(c.fillStyle):""}else this.text_="";this.declutterImageWithText_=l}}},A=class tt{constructor(t,l,r,c){this.tolerance_=t,this.maxExtent_=l,this.pixelRatio_=c,this.resolution_=r,this.buildersByZIndex_={}}finish(){const t={};for(const l in this.buildersByZIndex_){t[l]=t[l]||{};const r=this.buildersByZIndex_[l];for(const c in r){const d=r[c].finish();t[l][c]=d}}return t}getBuilder(t,l){const r=void 0!==t?t.toString():"0";let c=this.buildersByZIndex_[r];void 0===c&&(c={},this.buildersByZIndex_[r]=c);let d=c[l];return void 0===d&&(d=new(0,B[l])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),c[l]=d),d}};var mt=v(2121),st=v(483),xt=v(874);function Dt(ot,t,l,r,c,d,E,S,I,w,L,b){let P=ot[t],Y=ot[t+1],z=0,J=0,V=0,i=0;function e(){z=P,J=Y,P=ot[t+=r],Y=ot[t+1],i+=V,V=Math.sqrt((P-z)*(P-z)+(Y-J)*(Y-J))}do{e()}while(t<l-r&&i+V<d);let s=0===V?0:(d-i)/V;const C=(0,k.t7)(z,P,s),x=(0,k.t7)(J,Y,s),_=t-r,G=i,N=d+S*I(w,c,L);for(;t<l-r&&i+V<N;)e();s=0===V?0:(N-i)/V;const et=(0,k.t7)(z,P,s),rt=(0,k.t7)(J,Y,s);let lt;if(b){const ct=[C,x,et,rt];(0,xt.U1)(ct,0,4,2,b,ct,ct),lt=ct[0]>ct[2]}else lt=C>et;const ut=Math.PI,at=[],Tt=_+r===t;let Et;if(V=0,i=G,P=ot[t=_],Y=ot[t+1],Tt)return e(),Et=Math.atan2(Y-J,P-z),lt&&(Et+=Et>0?-ut:ut),at[0]=[(et+C)/2,(rt+x)/2,(N-d)/2,Et,c],at;for(let ct=0,dt=(c=c.replace(/\n/g," ")).length;ct<dt;){e();let ht=Math.atan2(Y-J,P-z);if(lt&&(ht+=ht>0?-ut:ut),void 0!==Et){let yt=ht-Et;if(yt+=yt>ut?-2*ut:yt<-ut?2*ut:0,Math.abs(yt)>E)return null}Et=ht;const It=ct;let vt=0;for(;ct<dt;++ct){const Ct=S*I(w,c[lt?dt-ct-1:ct],L);if(t+r<l&&i+V<d+vt+Ct/2)break;vt+=Ct}if(ct===It)continue;const Mt=lt?c.substring(dt-It,dt-ct):c.substring(It,ct);s=0===V?0:(d+vt/2-i)/V;const q=(0,k.t7)(z,P,s),St=(0,k.t7)(J,Y,s);at.push([q,St,vt/2,ht,Mt]),d+=vt}return at}var ft=v(3343);const _t=(0,p.lJ)(),At=[],bt=[],wt=[],Lt=[];function oe(ot){return ot[3].declutterBox}const ae=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function te(ot,t){return"start"===t?t=ae.test(ot)?"right":"left":"end"===t&&(t=ae.test(ot)?"left":"right"),X[t]}function _e(ot,t,l){return l>0&&ot.push("\n",""),ot.push(t,""),ot}const xe=class me{constructor(t,l,r,c){this.overlaps=r,this.pixelRatio=l,this.resolution=t,this.instructions=c.instructions,this.coordinates=c.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,st.Ue)(),this.hitDetectionInstructions=c.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=c.fillStates||{},this.strokeStates=c.strokeStates||{},this.textStates=c.textStates||{},this.widths_={},this.labels_={}}createLabel(t,l,r,c){const d=t+l+r+c;if(this.labels_[d])return this.labels_[d];const E=c?this.strokeStates[c]:null,S=r?this.fillStates[r]:null,I=this.textStates[l],w=this.pixelRatio,L=[I.scale[0]*w,I.scale[1]*w],b=Array.isArray(t),P=I.justify?X[I.justify]:te(Array.isArray(t)?t[0]:t,I.textAlign||y.PH),Y=c&&E.lineWidth?E.lineWidth:0,z=b?t:t.split("\n").reduce(_e,[]),{width:J,height:V,widths:i,heights:e,lineWidths:s}=(0,y.Zw)(I,z),C=J+Y,x=[],_=(C+2)*L[0],G=(V+Y)*L[1],N={width:_<0?Math.floor(_):Math.ceil(_),height:G<0?Math.floor(G):Math.ceil(G),contextInstructions:x};(1!=L[0]||1!=L[1])&&x.push("scale",L),c&&(x.push("strokeStyle",E.strokeStyle),x.push("lineWidth",Y),x.push("lineCap",E.lineCap),x.push("lineJoin",E.lineJoin),x.push("miterLimit",E.miterLimit),x.push("setLineDash",[E.lineDash]),x.push("lineDashOffset",E.lineDashOffset)),r&&x.push("fillStyle",S.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const et=.5-P;let rt=P*C+et*Y;const lt=[],ut=[];let dt,at=0,Tt=0,Et=0,ct=0;for(let ht=0,It=z.length;ht<It;ht+=2){const vt=z[ht];if("\n"===vt){Tt+=at,at=0,rt=P*C+et*Y,++ct;continue}const Mt=z[ht+1]||I.font;Mt!==dt&&(c&&lt.push("font",Mt),r&&ut.push("font",Mt),dt=Mt),at=Math.max(at,e[Et]);const q=[vt,rt+et*i[Et]+P*(i[Et]-s[ct]),.5*(Y+at)+Tt];rt+=i[Et],c&&lt.push("strokeText",q),r&&ut.push("fillText",q),++Et}return Array.prototype.push.apply(x,lt),Array.prototype.push.apply(x,ut),this.labels_[d]=N,N}replayTextBackground_(t,l,r,c,d,E,S){t.beginPath(),t.moveTo.apply(t,l),t.lineTo.apply(t,r),t.lineTo.apply(t,c),t.lineTo.apply(t,d),t.lineTo.apply(t,l),E&&(this.alignFill_=E[2],this.fill_(t)),S&&(this.setStrokeStyle_(t,S),t.stroke())}calculateImageOrLabelDimensions_(t,l,r,c,d,E,S,I,w,L,b,P,Y,z,J,V){let i=r-(S*=P[0]),e=c-(I*=P[1]);const s=d+w>t?t-w:d,C=E+L>l?l-L:E,x=z[3]+s*P[0]+z[1],_=z[0]+C*P[1]+z[2],G=i-z[3],N=e-z[0];let et;return(J||0!==b)&&(At[0]=G,Lt[0]=G,At[1]=N,bt[1]=N,bt[0]=G+x,wt[0]=bt[0],wt[1]=N+_,Lt[1]=wt[1]),0!==b?(et=(0,st.qC)((0,st.Ue)(),r,c,1,1,b,-r,-c),(0,st.nn)(et,At),(0,st.nn)(et,bt),(0,st.nn)(et,wt),(0,st.nn)(et,Lt),(0,p.T9)(Math.min(At[0],bt[0],wt[0],Lt[0]),Math.min(At[1],bt[1],wt[1],Lt[1]),Math.max(At[0],bt[0],wt[0],Lt[0]),Math.max(At[1],bt[1],wt[1],Lt[1]),_t)):(0,p.T9)(Math.min(G,G+x),Math.min(N,N+_),Math.max(G,G+x),Math.max(N,N+_),_t),Y&&(i=Math.round(i),e=Math.round(e)),{drawImageX:i,drawImageY:e,drawImageW:s,drawImageH:C,originX:w,originY:L,declutterBox:{minX:_t[0],minY:_t[1],maxX:_t[2],maxY:_t[3],value:V},canvasTransform:et,scale:P}}replayImageOrLabel_(t,l,r,c,d,E,S){const w=c.declutterBox,L=t.canvas,b=S?S[2]*c.scale[0]/2:0;return w.minX-b<=L.width/l&&w.maxX+b>=0&&w.minY-b<=L.height/l&&w.maxY+b>=0&&(!(!E&&!S)&&this.replayTextBackground_(t,At,bt,wt,Lt,E,S),(0,y._f)(t,c.canvasTransform,d,r,c.originX,c.originY,c.drawImageW,c.drawImageH,c.drawImageX,c.drawImageY,c.scale)),!0}fill_(t){if(this.alignFill_){const l=(0,st.nn)(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(l[0]%r,l[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,l){t.strokeStyle=l[1],t.lineWidth=l[2],t.lineCap=l[3],t.lineJoin=l[4],t.miterLimit=l[5],t.lineDashOffset=l[7],t.setLineDash(l[6])}drawLabelWithPointPlacement_(t,l,r,c){const d=this.textStates[l],E=this.createLabel(t,l,c,r),S=this.strokeStates[r],I=this.pixelRatio,w=te(Array.isArray(t)?t[0]:t,d.textAlign||y.PH),L=X[d.textBaseline||y.ru],b=S&&S.lineWidth?S.lineWidth:0;return{label:E,anchorX:w*(E.width/I-2*d.scale[0])+2*(.5-w)*b,anchorY:L*E.height/I+2*(.5-L)*b}}execute_(t,l,r,c,d,E,S,I){let w;this.pixelCoordinates_&&(0,H.fS)(r,this.renderedTransform_)?w=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),w=(0,xt.vT)(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),(0,st.lk)(this.renderedTransform_,r));let L=0;const b=c.length;let Y,z,J,V,i,e,s,C,x,_,G,N,P=0,et=0,rt=0,lt=null,ut=null;const at=this.coordinateCache_,Tt=this.viewRotation_,Et=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,ct={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Tt},dt=this.instructions!=c||this.overlaps?0:200;let ht,It,vt,Mt;for(;L<b;){const q=c[L];switch(q[0]){case M.BEGIN_GEOMETRY:ht=q[1],Mt=q[3],ht.getGeometry()?void 0===S||(0,p.kK)(S,Mt.getExtent())?++L:L=q[2]+1:L=q[2];break;case M.BEGIN_PATH:et>dt&&(this.fill_(t),et=0),rt>dt&&(t.stroke(),rt=0),!et&&!rt&&(t.beginPath(),V=NaN,i=NaN),++L;break;case M.CIRCLE:P=q[1];const yt=w[P],Ct=w[P+1],Le=w[P+2]-yt,Oe=w[P+3]-Ct,Ae=Math.sqrt(Le*Le+Oe*Oe);t.moveTo(yt+Ae,Ct),t.arc(yt,Ct,Ae,0,2*Math.PI,!0),++L;break;case M.CLOSE_PATH:t.closePath(),++L;break;case M.CUSTOM:P=q[1],Y=q[2];const Ke=q[4],Me=6==q.length?q[5]:void 0;ct.geometry=q[3],ct.feature=ht,L in at||(at[L]=[]);const ee=at[L];Me?Me(w,P,Y,2,ee):(ee[0]=w[P],ee[1]=w[P+1],ee.length=2),Ke(ee,ct),++L;break;case M.DRAW_IMAGE:P=q[1],Y=q[2],C=q[3],z=q[4],J=q[5];let Ce=q[6];const ze=q[7],je=q[8],Ve=q[9],Fe=q[10];let Ie=q[11];const He=q[12];let ce=q[13];const Pe=q[14],ie=q[15];if(!C&&q.length>=20){x=q[19],_=q[20],G=q[21],N=q[22];const Pt=this.drawLabelWithPointPlacement_(x,_,G,N);C=Pt.label,q[3]=C,z=(Pt.anchorX-q[23])*this.pixelRatio,q[4]=z,J=(Pt.anchorY-q[24])*this.pixelRatio,q[5]=J,Ce=C.height,q[6]=Ce,ce=C.width,q[13]=ce}let ve,Re,ue,de;q.length>25&&(ve=q[25]),q.length>17?(Re=q[16],ue=q[17],de=q[18]):(Re=y.oB,ue=!1,de=!1),Fe&&Et?Ie+=Tt:!Fe&&!Et&&(Ie-=Tt);let Je=0;for(;P<Y;P+=2){if(ve&&ve[Je++]<ce/this.pixelRatio)continue;const Pt=this.calculateImageOrLabelDimensions_(C.width,C.height,w[P],w[P+1],ce,Ce,z,J,je,Ve,Ie,He,d,Re,ue||de,ht),qt=[t,l,C,Pt,ze,ue?lt:null,de?ut:null];if(I){if("none"===Pe)continue;if("obstacle"===Pe){I.insert(Pt.declutterBox);continue}{let Gt,Ut;if(ie){const kt=Y-P;if(!ie[kt]){ie[kt]=qt;continue}if(Gt=ie[kt],delete ie[kt],Ut=oe(Gt),I.collides(Ut))continue}if(I.collides(Pt.declutterBox))continue;Gt&&(I.insert(Ut),this.replayImageOrLabel_.apply(this,Gt)),I.insert(Pt.declutterBox)}}this.replayImageOrLabel_.apply(this,qt)}++L;break;case M.DRAW_CHARS:const ke=q[1],be=q[2],Te=q[3],$e=q[4];N=q[5];const Qe=q[6],We=q[7],Be=q[8];G=q[9];const we=q[10];x=q[11],_=q[12];const Ge=[q[13],q[13]],De=this.textStates[_],ne=De.font,se=[De.scale[0]*We,De.scale[1]*We];let re;ne in this.widths_?re=this.widths_[ne]:(re={},this.widths_[ne]=re);const Xe=(0,ft.W)(w,ke,be,2),Ze=Math.abs(se[0])*(0,y.Kd)(ne,x,re);if($e||Ze<=Xe){const Gt=Dt(w,ke,be,2,x,(Xe-Ze)*te(x,this.textStates[_].textAlign),Qe,Math.abs(se[0]),y.Kd,ne,re,Et?0:this.viewRotation_);t:if(Gt){const Ut=[];let kt,fe,ge,Ft,Xt;if(G)for(kt=0,fe=Gt.length;kt<fe;++kt){Xt=Gt[kt],ge=Xt[4],Ft=this.createLabel(ge,_,"",G),z=Xt[2]+(se[0]<0?-we:we),J=Te*Ft.height+2*(.5-Te)*we*se[1]/se[0]-Be;const Nt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Xt[0],Xt[1],Ft.width,Ft.height,z,J,0,0,Xt[3],Ge,!1,y.oB,!1,ht);if(I&&I.collides(Nt.declutterBox))break t;Ut.push([t,l,Ft,Nt,1,null,null])}if(N)for(kt=0,fe=Gt.length;kt<fe;++kt){Xt=Gt[kt],ge=Xt[4],Ft=this.createLabel(ge,_,N,""),z=Xt[2],J=Te*Ft.height-Be;const Nt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Xt[0],Xt[1],Ft.width,Ft.height,z,J,0,0,Xt[3],Ge,!1,y.oB,!1,ht);if(I&&I.collides(Nt.declutterBox))break t;Ut.push([t,l,Ft,Nt,1,null,null])}I&&I.load(Ut.map(oe));for(let Nt=0,qe=Ut.length;Nt<qe;++Nt)this.replayImageOrLabel_.apply(this,Ut[Nt])}}++L;break;case M.END_GEOMETRY:if(void 0!==E){ht=q[1];const Pt=E(ht,Mt);if(Pt)return Pt}++L;break;case M.FILL:dt?et++:this.fill_(t),++L;break;case M.MOVE_TO_LINE_TO:for(P=q[1],Y=q[2],It=w[P],vt=w[P+1],e=It+.5|0,s=vt+.5|0,(e!==V||s!==i)&&(t.moveTo(It,vt),V=e,i=s),P+=2;P<Y;P+=2)It=w[P],vt=w[P+1],e=It+.5|0,s=vt+.5|0,(P==Y-2||e!==V||s!==i)&&(t.lineTo(It,vt),V=e,i=s);++L;break;case M.SET_FILL_STYLE:lt=q,this.alignFill_=q[2],et&&(this.fill_(t),et=0,rt&&(t.stroke(),rt=0)),t.fillStyle=q[1],++L;break;case M.SET_STROKE_STYLE:ut=q,rt&&(t.stroke(),rt=0),this.setStrokeStyle_(t,q),++L;break;case M.STROKE:dt?rt++:t.stroke(),++L;break;default:++L}}et&&this.fill_(t),rt&&t.stroke()}execute(t,l,r,c,d,E){this.viewRotation_=c,this.execute_(t,l,r,this.instructions,d,void 0,void 0,E)}executeHitDetection(t,l,r,c,d){return this.viewRotation_=r,this.execute_(t,1,l,this.hitDetectionInstructions,!0,c,d)}};var zt=v(1992),pe=v(9466);const Ht=["Polygon","Circle","LineString","Image","Text","Default"],jt={},Kt=class ye{constructor(t,l,r,c,d,E){this.maxExtent_=t,this.overlaps_=c,this.pixelRatio_=r,this.resolution_=l,this.renderBuffer_=E,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,st.Ue)(),this.createExecutors_(d)}clip(t,l){const r=this.getClipCoords(l);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()}createExecutors_(t){for(const l in t){let r=this.executorsByZIndex_[l];void 0===r&&(r={},this.executorsByZIndex_[l]=r);const c=t[l];for(const d in c)r[d]=new xe(this.resolution_,this.pixelRatio_,this.overlaps_,c[d])}}hasExecutors(t){for(const l in this.executorsByZIndex_){const r=this.executorsByZIndex_[l];for(let c=0,d=t.length;c<d;++c)if(t[c]in r)return!0}return!1}forEachFeatureAtCoordinate(t,l,r,c,d,E){const S=2*(c=Math.round(c))+1,I=(0,st.qC)(this.hitDetectionTransform_,c+.5,c+.5,1/l,-1/l,-r,-t[0],-t[1]),w=!this.hitDetectionContext_;w&&(this.hitDetectionContext_=(0,zt.E4)(S,S,void 0,{willReadFrequently:!0}));const L=this.hitDetectionContext_;let b;L.canvas.width!==S||L.canvas.height!==S?(L.canvas.width=S,L.canvas.height=S):w||L.clearRect(0,0,S,S),void 0!==this.renderBuffer_&&(b=(0,p.lJ)(),(0,p.Wj)(b,t),(0,p.f3)(b,l*(this.renderBuffer_+c),b));const P=function Vt(ot){if(void 0!==jt[ot])return jt[ot];const t=2*ot+1,l=ot*ot,r=new Array(l+1);for(let d=0;d<=ot;++d)for(let E=0;E<=ot;++E){const S=d*d+E*E;if(S>l)break;let I=r[S];I||(I=[],r[S]=I),I.push(4*((ot+d)*t+(ot+E))+3),d>0&&I.push(4*((ot-d)*t+(ot+E))+3),E>0&&(I.push(4*((ot+d)*t+(ot-E))+3),d>0&&I.push(4*((ot-d)*t+(ot-E))+3))}const c=[];for(let d=0,E=r.length;d<E;++d)r[d]&&c.push(...r[d]);return jt[ot]=c,c}(c);let Y;function z(x,_){const G=L.getImageData(0,0,S,S).data;for(let N=0,et=P.length;N<et;N++)if(G[P[N]]>0){if(!E||"Image"!==Y&&"Text"!==Y||E.includes(x)){const rt=(P[N]-3)/4,lt=c-rt%S,ut=c-(rt/S|0),at=d(x,_,lt*lt+ut*ut);if(at)return at}L.clearRect(0,0,S,S);break}}const J=Object.keys(this.executorsByZIndex_).map(Number);let V,i,e,s,C;for(J.sort(H.j2),V=J.length-1;V>=0;--V){const x=J[V].toString();for(e=this.executorsByZIndex_[x],i=Ht.length-1;i>=0;--i)if(Y=Ht[i],s=e[Y],void 0!==s&&(C=s.executeHitDetection(L,I,r,z,b),C))return C}}getClipCoords(t){const l=this.maxExtent_;if(!l)return null;const r=l[0],c=l[1],d=l[2],E=l[3],S=[r,c,r,E,d,E,d,c];return(0,xt.vT)(S,0,8,2,t,S),S}isEmpty(){return(0,pe.x)(this.executorsByZIndex_)}execute(t,l,r,c,d,E,S){const I=Object.keys(this.executorsByZIndex_).map(Number);let w,L,b,P,Y,z;for(I.sort(H.j2),this.maxExtent_&&(t.save(),this.clip(t,r)),E=E||Ht,S&&I.reverse(),w=0,L=I.length;w<L;++w){const J=I[w].toString();for(Y=this.executorsByZIndex_[J],b=0,P=E.length;b<P;++b)z=Y[E[b]],void 0!==z&&z.execute(t,l,r,c,d,S)}this.maxExtent_&&t.restore()}};var le=v(2526),Jt=v(8587),Ee=v(3620),Se=v(9570);const Wt=.5;var Bt=v(8377),Yt=v(6003),he=v(3481);const Qt=class $t extends mt.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,p.lJ)(),this.wrappedRenderedExtent_=(0,p.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,l,r){const c=l.extent,d=l.viewState,E=d.center,S=d.resolution,I=d.projection,w=d.rotation,L=I.getExtent(),b=this.getLayer().getSource(),P=l.pixelRatio,Y=l.viewHints,z=!(Y[Jt.Z.ANIMATING]||Y[Jt.Z.INTERACTING]),J=this.compositionContext_,V=Math.round(l.size[0]*P),i=Math.round(l.size[1]*P),e=b.getWrapX()&&I.canWrapX(),s=e?(0,p.dz)(L):null,C=e?Math.ceil((c[2]-L[2])/s)+1:1;let x=e?Math.floor((c[0]-L[0])/s):0;do{const _=this.getRenderTransform(E,S,w,P,V,i,x*s);t.execute(J,1,_,w,z,void 0,r)}while(++x<C)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,zt.E4)(this.context.canvas.width,this.context.canvas.height,mt.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,zt.jy)(this.compositionContext_),mt.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,l){const r=t.pixelRatio,c=t.layerStatesArray[t.layerIndex];(0,st.n3)(this.pixelTransform,1/r,1/r),(0,st.nb)(this.inversePixelTransform,this.pixelTransform);const d=(0,st.BB)(this.pixelTransform);this.useContainer(l,d,this.getBackground(t));const E=this.context,S=E.canvas,I=this.replayGroup_,w=this.declutterExecutorGroup;let L=I&&!I.isEmpty()||w&&!w.isEmpty();if(!L&&!this.getLayer().hasListener(le.Z.PRERENDER)&&!this.getLayer().hasListener(le.Z.POSTRENDER))return null;const b=Math.round(t.size[0]*r),P=Math.round(t.size[1]*r);S.width!=b||S.height!=P?(S.width=b,S.height=P,S.style.transform!==d&&(S.style.transform=d)):this.containerReused||E.clearRect(0,0,b,P),this.preRender(E,t);const Y=t.viewState,z=Y.projection;this.opacity_=c.opacity,this.setupCompositionContext_();let J=!1;if(L&&c.extent&&this.clipping){const V=(0,Yt.dY)(c.extent,z);L=(0,p.kK)(V,t.extent),J=L&&!(0,p.r4)(V,t.extent),J&&this.clipUnrotated(this.compositionContext_,t,V)}return L&&this.renderWorlds(I,t),J&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(E,t),this.renderedRotation_!==Y.rotation&&(this.renderedRotation_=Y.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(l=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=[this.context.canvas.width,this.context.canvas.height];(0,st.nn)(this.pixelTransform,r);const c=this.renderedCenter_,d=this.renderedResolution_,E=this.renderedRotation_,S=this.renderedProjection_,I=this.wrappedRenderedExtent_,w=this.getLayer(),L=[],b=r[0]*Wt,P=r[1]*Wt;L.push(this.getRenderTransform(c,d,E,Wt,b,P,0).slice());const Y=w.getSource(),z=S.getExtent();if(Y.getWrapX()&&S.canWrapX()&&!(0,p.r4)(z,I)){let J=I[0];const V=(0,p.dz)(z);let e,i=0;for(;J<z[0];)--i,e=V*i,L.push(this.getRenderTransform(c,d,E,Wt,b,P,e).slice()),J+=V;for(i=0,J=I[2];J>z[2];)++i,e=V*i,L.push(this.getRenderTransform(c,d,E,Wt,b,P,e).slice()),J-=V}this.hitDetectionImageData_=function Ot(ot,t,l,r,c,d,E){const w=(0,zt.E4)(ot[0]*Wt,ot[1]*Wt);w.imageSmoothingEnabled=!1;const L=w.canvas,b=new Ee.Z(w,Wt,c,null,E),P=l.length,Y=Math.floor(16777215/P),z={};for(let V=1;V<=P;++V){const i=l[V-1],e=i.getStyleFunction()||r;if(!e)continue;let s=e(i,d);if(!s)continue;Array.isArray(s)||(s=[s]);const x=(V*Y).toString(16).padStart(7,"#00000");for(let _=0,G=s.length;_<G;++_){const N=s[_],et=N.getGeometryFunction()(i);if(!et||!(0,p.kK)(c,et.getExtent()))continue;const rt=N.clone(),lt=rt.getFill();lt&&lt.setColor(x);const ut=rt.getStroke();ut&&(ut.setColor(x),ut.setLineDash(null)),rt.setText(void 0);const at=N.getImage();if(at){const dt=at.getImageSize();if(!dt)continue;const ht=(0,zt.E4)(dt[0],dt[1],void 0,{alpha:!1}),It=ht.canvas;ht.fillStyle=x,ht.fillRect(0,0,It.width,It.height),rt.setImage(new Se.Z({img:It,anchor:at.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:at.getOrigin(),opacity:1,size:at.getSize(),scale:at.getScale(),rotation:at.getRotation(),rotateWithView:at.getRotateWithView()}))}const Tt=rt.getZIndex()||0;let Et=z[Tt];Et||(Et={},z[Tt]=Et,Et.Polygon=[],Et.Circle=[],Et.LineString=[],Et.Point=[]);const ct=et.getType();if("GeometryCollection"===ct){const dt=et.getGeometriesArrayRecursive();for(let ht=0,It=dt.length;ht<It;++ht){const vt=dt[ht];Et[vt.getType().replace("Multi","")].push(vt,rt)}}else Et[ct.replace("Multi","")].push(et,rt)}}const J=Object.keys(z).map(Number).sort(H.j2);for(let V=0,i=J.length;V<i;++V){const e=z[J[V]];for(const s in e){const C=e[s];for(let x=0,_=C.length;x<_;x+=2){b.setStyle(C[x+1]);for(let G=0,N=t.length;G<N;++G)b.setTransform(t[G]),b.drawGeometry(C[x])}}}return w.getImageData(0,0,L.width,L.height)}(r,L,this.renderedFeatures_,w.getStyleFunction(),I,d,E)}l(function Zt(ot,t,l){const r=[];if(l){const c=Math.floor(Math.round(ot[0])*Wt),d=Math.floor(Math.round(ot[1])*Wt),E=4*((0,k.uZ)(c,0,l.width-1)+(0,k.uZ)(d,0,l.height-1)*l.width),L=l.data[E+2]+256*(l.data[E+1]+256*l.data[E]),b=Math.floor(16777215/t.length);L&&L%b==0&&r.push(t[L/b-1])}return r}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,l,r,c,d){if(!this.replayGroup_)return;const E=l.viewState.resolution,S=l.viewState.rotation,I=this.getLayer(),w={},L=function(Y,z,J){const V=(0,Z.sq)(Y),i=w[V];if(i){if(!0!==i&&J<i.distanceSq){if(0===J)return w[V]=!0,d.splice(d.lastIndexOf(i),1),c(Y,I,z);i.geometry=z,i.distanceSq=J}}else{if(0===J)return w[V]=!0,c(Y,I,z);d.push(w[V]={feature:Y,layer:I,geometry:z,distanceSq:J,callback:c})}};let b;const P=[this.replayGroup_];return this.declutterExecutorGroup&&P.push(this.declutterExecutorGroup),P.some(Y=>b=Y.forEachFeatureAtCoordinate(t,E,S,r,L,Y===this.declutterExecutorGroup&&l.declutterTree?l.declutterTree.all().map(z=>z.value):null)),b}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const l=this.getLayer(),r=l.getSource();if(!r)return!1;const c=t.viewHints[Jt.Z.ANIMATING],d=t.viewHints[Jt.Z.INTERACTING],E=l.getUpdateWhileAnimating(),S=l.getUpdateWhileInteracting();if(this.ready&&!E&&c||!S&&d)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const I=t.extent,w=t.viewState,L=w.projection,b=w.resolution,P=t.pixelRatio,Y=l.getRevision(),z=l.getRenderBuffer();let J=l.getRenderOrder();void 0===J&&(J=Bt.eR);const V=w.center.slice(),i=(0,p.f3)(I,z*b),e=i.slice(),s=[i.slice()],C=L.getExtent();if(r.getWrapX()&&L.canWrapX()&&!(0,p.r4)(C,t.extent)){const ct=(0,p.dz)(C),dt=Math.max((0,p.dz)(i)/2,ct);i[0]=C[0]-dt,i[2]=C[2]+dt,(0,he.Cf)(V,L);const ht=(0,p.Cf)(s[0],L);ht[0]<C[0]&&ht[2]<C[2]?s.push([ht[0]+ct,ht[1],ht[2]+ct,ht[3]]):ht[0]>C[0]&&ht[2]>C[2]&&s.push([ht[0]-ct,ht[1],ht[2]-ct,ht[3]])}if(this.ready&&this.renderedResolution_==b&&this.renderedRevision_==Y&&this.renderedRenderOrder_==J&&(0,p.r4)(this.wrappedRenderedExtent_,i))return(0,H.fS)(this.renderedExtent_,e)||(this.hitDetectionImageData_=null,this.renderedExtent_=e),this.renderedCenter_=V,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new A((0,Bt.Qz)(b,P),i,b,P);let _;this.getLayer().getDeclutter()&&(_=new A((0,Bt.Qz)(b,P),i,b,P));const G=(0,Yt.Cs)();let N;if(G){for(let ct=0,dt=s.length;ct<dt;++ct){const It=(0,Yt.Fj)(s[ct],L);r.loadFeatures(It,(0,Yt.on)(b,L),G)}N=(0,Yt.WO)(G,L)}else for(let ct=0,dt=s.length;ct<dt;++ct)r.loadFeatures(s[ct],b,L);const et=(0,Bt.se)(b,P);let rt=!0;const lt=ct=>{let dt;const ht=ct.getStyleFunction()||l.getStyleFunction();if(ht&&(dt=ht(ct,b)),dt){const It=this.renderFeature(ct,et,dt,x,N,_);rt=rt&&!It}},ut=(0,Yt.Fj)(i,L),at=r.getFeaturesInExtent(ut);J&&at.sort(J);for(let ct=0,dt=at.length;ct<dt;++ct)lt(at[ct]);this.renderedFeatures_=at,this.ready=rt;const Tt=x.finish(),Et=new Kt(i,b,P,r.getOverlaps(),Tt,l.getRenderBuffer());return _&&(this.declutterExecutorGroup=new Kt(i,b,P,r.getOverlaps(),_.finish(),l.getRenderBuffer())),this.renderedResolution_=b,this.renderedRevision_=Y,this.renderedRenderOrder_=J,this.renderedExtent_=e,this.wrappedRenderedExtent_=i,this.renderedCenter_=V,this.renderedProjection_=L,this.replayGroup_=Et,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,l,r,c,d,E){if(!r)return!1;let S=!1;if(Array.isArray(r))for(let I=0,w=r.length;I<w;++I)S=(0,Bt.Pn)(c,t,r[I],l,this.boundHandleStyleImageChange_,d,E)||S;else S=(0,Bt.Pn)(c,t,r,l,this.boundHandleStyleImageChange_,d,E);return S}}},8377:(Rt,gt,v)=>{"use strict";v.d(gt,{Pn:()=>j,Qz:()=>pt,eR:()=>$,se:()=>M});var it=v(521),K=v(119);const nt=.5,F={Point:function f(n,h,u,O,Z){const k=u.getImage(),U=u.getText();let W;if(k){if(k.getImageState()!=it.Z.LOADED)return;let X=n;if(Z){const T=k.getDeclutterMode();if("none"!==T)if(X=Z,"obstacle"===T){const B=n.getBuilder(u.getZIndex(),"Image");B.setImageStyle(k,W),B.drawPoint(h,O)}else U&&U.getText()&&(W={})}const m=X.getBuilder(u.getZIndex(),"Image");m.setImageStyle(k,W),m.drawPoint(h,O)}if(U&&U.getText()){let X=n;Z&&(X=Z);const m=X.getBuilder(u.getZIndex(),"Text");m.setTextStyle(U,W),m.drawText(h,O)}},LineString:function a(n,h,u,O,Z){const k=u.getStroke();if(k){const W=n.getBuilder(u.getZIndex(),"LineString");W.setFillStrokeStyle(null,k),W.drawLineString(h,O)}const U=u.getText();if(U&&U.getText()){const W=(Z||n).getBuilder(u.getZIndex(),"Text");W.setTextStyle(U),W.drawText(h,O)}},Polygon:function D(n,h,u,O,Z){const k=u.getFill(),U=u.getStroke();if(k||U){const X=n.getBuilder(u.getZIndex(),"Polygon");X.setFillStrokeStyle(k,U),X.drawPolygon(h,O)}const W=u.getText();if(W&&W.getText()){const X=(Z||n).getBuilder(u.getZIndex(),"Text");X.setTextStyle(W),X.drawText(h,O)}},MultiPoint:function g(n,h,u,O,Z){const k=u.getImage(),U=u.getText();let W;if(k){if(k.getImageState()!=it.Z.LOADED)return;let X=n;if(Z){const T=k.getDeclutterMode();if("none"!==T)if(X=Z,"obstacle"===T){const B=n.getBuilder(u.getZIndex(),"Image");B.setImageStyle(k,W),B.drawMultiPoint(h,O)}else U&&U.getText()&&(W={})}const m=X.getBuilder(u.getZIndex(),"Image");m.setImageStyle(k,W),m.drawMultiPoint(h,O)}if(U&&U.getText()){let X=n;Z&&(X=Z);const m=X.getBuilder(u.getZIndex(),"Text");m.setTextStyle(U,W),m.drawText(h,O)}},MultiLineString:function R(n,h,u,O,Z){const k=u.getStroke();if(k){const W=n.getBuilder(u.getZIndex(),"LineString");W.setFillStrokeStyle(null,k),W.drawMultiLineString(h,O)}const U=u.getText();if(U&&U.getText()){const W=(Z||n).getBuilder(u.getZIndex(),"Text");W.setTextStyle(U),W.drawText(h,O)}},MultiPolygon:function o(n,h,u,O,Z){const k=u.getFill(),U=u.getStroke();if(U||k){const X=n.getBuilder(u.getZIndex(),"Polygon");X.setFillStrokeStyle(k,U),X.drawMultiPolygon(h,O)}const W=u.getText();if(W&&W.getText()){const X=(Z||n).getBuilder(u.getZIndex(),"Text");X.setTextStyle(W),X.drawText(h,O)}},GeometryCollection:function H(n,h,u,O,Z){const k=h.getGeometriesArray();let U,W;for(U=0,W=k.length;U<W;++U)(0,F[k[U].getType()])(n,k[U],u,O,Z)},Circle:function Q(n,h,u,O,Z){const k=u.getFill(),U=u.getStroke();if(k||U){const X=n.getBuilder(u.getZIndex(),"Circle");X.setFillStrokeStyle(k,U),X.drawCircle(h,O)}const W=u.getText();if(W&&W.getText()){const X=(Z||n).getBuilder(u.getZIndex(),"Text");X.setTextStyle(W),X.drawText(h,O)}}};function $(n,h){return parseInt((0,K.sq)(n),10)-parseInt((0,K.sq)(h),10)}function M(n,h){const u=pt(n,h);return u*u}function pt(n,h){return nt*n/h}function j(n,h,u,O,Z,k,U){let W=!1;const X=u.getImage();if(X){const m=X.getImageState();m==it.Z.LOADED||m==it.Z.ERROR?X.unlistenImageChange(Z):(m==it.Z.IDLE&&X.load(),X.listenImageChange(Z),W=!0)}return function p(n,h,u,O,Z,k){const U=u.getGeometryFunction()(h);if(!U)return;const W=U.simplifyTransformed(O,Z);u.getRenderer()?y(n,W,u,h):(0,F[W.getType()])(n,W,u,h,k)}(n,h,u,O,k,U),W}function y(n,h,u,O){if("GeometryCollection"!=h.getType())n.getBuilder(u.getZIndex(),"Default").drawCustom(h,O,u.getRenderer(),u.getHitDetectionRenderer());else{const k=h.getGeometries();for(let U=0,W=k.length;U<W;++U)y(n,k[U],u,O)}}},5947:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>W});var it=v(2815),K=v(9889),nt=v(8214),F=v(9972),$=v(4587),M=v(2909),pt=v(4702),Q=v(4412),j=v(1345);function y(X,m){return[[-1/0,-1/0,1/0,1/0]]}v(6003);var R=v(1911),o=v(760),f=v(2456),g=v(119),D=v(9466),n=v(1729);function O(X,m){return function(T,B,tt,A,mt){const st=this;!function u(X,m,T,B,tt,A,mt){const st=new XMLHttpRequest;st.open("GET","function"==typeof X?X(T,B,tt):X,!0),"arraybuffer"==m.getType()&&(st.responseType="arraybuffer"),st.withCredentials=false,st.onload=function(xt){if(!st.status||st.status>=200&&st.status<300){const Dt=m.getType();let ft;"json"==Dt||"text"==Dt?ft=st.responseText:"xml"==Dt?(ft=st.responseXML,ft||(ft=(new DOMParser).parseFromString(st.responseText,"application/xml"))):"arraybuffer"==Dt&&(ft=st.response),ft?A(m.readFeatures(ft,{extent:T,featureProjection:tt}),m.readProjection(ft)):mt()}else mt()},st.onerror=mt,st.send()}(X,m,T,B,tt,function(xt,Dt){st.addFeatures(xt),void 0!==A&&A(xt)},mt||j.Zn)}}class k extends nt.ZP{constructor(m,T,B){super(m),this.feature=T,this.features=B}}const W=class U extends pt.Z{constructor(m){super({attributions:(m=m||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===m.wrapX||m.wrapX}),this.loader_=j.Zn,this.format_=m.format,this.overlaps_=void 0===m.overlaps||m.overlaps,this.url_=m.url,void 0!==m.loader?this.loader_=m.loader:void 0!==this.url_&&((0,R.h)(this.format_,"`format` must be set when `url` is set"),this.loader_=O(this.url_,this.format_)),this.strategy_=void 0!==m.strategy?m.strategy:y;const T=void 0===m.useSpatialIndex||m.useSpatialIndex;let B,tt;this.featuresRtree_=T?new M.Z:null,this.loadedExtentsRtree_=new M.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(m.features)?tt=m.features:m.features&&(B=m.features,tt=B.getArray()),!T&&void 0===B&&(B=new it.Z(tt)),void 0!==tt&&this.addFeaturesInternal(tt),void 0!==B&&this.bindFeaturesCollection_(B)}addFeature(m){this.addFeatureInternal(m),this.changed()}addFeatureInternal(m){const T=(0,g.sq)(m);if(!this.addToIndex_(T,m))return void(this.featuresCollection_&&this.featuresCollection_.remove(m));this.setupChangeEvents_(T,m);const B=m.getGeometry();if(B){const tt=B.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(tt,m)}else this.nullGeometryFeatures_[T]=m;this.dispatchEvent(new k(Q.Z.ADDFEATURE,m))}setupChangeEvents_(m,T){this.featureChangeKeys_[m]=[(0,n.oL)(T,F.Z.CHANGE,this.handleFeatureChange_,this),(0,n.oL)(T,$.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(m,T){let B=!0;const tt=T.getId();return void 0!==tt&&(tt.toString()in this.idIndex_?B=!1:this.idIndex_[tt.toString()]=T),B&&((0,R.h)(!(m in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[m]=T),B}addFeatures(m){this.addFeaturesInternal(m),this.changed()}addFeaturesInternal(m){const T=[],B=[],tt=[];for(let A=0,mt=m.length;A<mt;A++){const st=m[A],xt=(0,g.sq)(st);this.addToIndex_(xt,st)&&B.push(st)}for(let A=0,mt=B.length;A<mt;A++){const st=B[A],xt=(0,g.sq)(st);this.setupChangeEvents_(xt,st);const Dt=st.getGeometry();if(Dt){const ft=Dt.getExtent();T.push(ft),tt.push(st)}else this.nullGeometryFeatures_[xt]=st}if(this.featuresRtree_&&this.featuresRtree_.load(T,tt),this.hasListener(Q.Z.ADDFEATURE))for(let A=0,mt=B.length;A<mt;A++)this.dispatchEvent(new k(Q.Z.ADDFEATURE,B[A]))}bindFeaturesCollection_(m){let T=!1;this.addEventListener(Q.Z.ADDFEATURE,function(B){T||(T=!0,m.push(B.feature),T=!1)}),this.addEventListener(Q.Z.REMOVEFEATURE,function(B){T||(T=!0,m.remove(B.feature),T=!1)}),m.addEventListener(K.Z.ADD,B=>{T||(T=!0,this.addFeature(B.element),T=!1)}),m.addEventListener(K.Z.REMOVE,B=>{T||(T=!0,this.removeFeature(B.element),T=!1)}),this.featuresCollection_=m}clear(m){if(m){for(const B in this.featureChangeKeys_)this.featureChangeKeys_[B].forEach(n.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(tt=>{this.removeFeatureInternal(tt)});for(const tt in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[tt])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const T=new k(Q.Z.CLEAR);this.dispatchEvent(T),this.changed()}forEachFeature(m){if(this.featuresRtree_)return this.featuresRtree_.forEach(m);this.featuresCollection_&&this.featuresCollection_.forEach(m)}forEachFeatureAtCoordinateDirect(m,T){return this.forEachFeatureInExtent([m[0],m[1],m[0],m[1]],function(tt){if(tt.getGeometry().intersectsCoordinate(m))return T(tt)})}forEachFeatureInExtent(m,T){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(m,T);this.featuresCollection_&&this.featuresCollection_.forEach(T)}forEachFeatureIntersectingExtent(m,T){return this.forEachFeatureInExtent(m,function(B){if(B.getGeometry().intersectsExtent(m)){const A=T(B);if(A)return A}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let m;return this.featuresCollection_?m=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(m=this.featuresRtree_.getAll(),(0,D.x)(this.nullGeometryFeatures_)||(0,f.l7)(m,Object.values(this.nullGeometryFeatures_))),m}getFeaturesAtCoordinate(m){const T=[];return this.forEachFeatureAtCoordinateDirect(m,function(B){T.push(B)}),T}getFeaturesInExtent(m,T){if(this.featuresRtree_){if(!(T&&T.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(m);const tt=(0,o.MV)(m,T);return[].concat(...tt.map(A=>this.featuresRtree_.getInExtent(A)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(m,T){const B=m[0],tt=m[1];let A=null;const mt=[NaN,NaN];let st=1/0;const xt=[-1/0,-1/0,1/0,1/0];return T=T||j.uX,this.featuresRtree_.forEachInExtent(xt,function(Dt){if(T(Dt)){const ft=Dt.getGeometry(),_t=st;if(st=ft.closestPointXY(B,tt,mt,st),st<_t){A=Dt;const At=Math.sqrt(st);xt[0]=B-At,xt[1]=tt-At,xt[2]=B+At,xt[3]=tt+At}}}),A}getExtent(m){return this.featuresRtree_.getExtent(m)}getFeatureById(m){const T=this.idIndex_[m.toString()];return void 0!==T?T:null}getFeatureByUid(m){const T=this.uidIndex_[m];return void 0!==T?T:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(m){const T=m.target,B=(0,g.sq)(T),tt=T.getGeometry();if(tt){const mt=tt.getExtent();B in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[B],this.featuresRtree_&&this.featuresRtree_.insert(mt,T)):this.featuresRtree_&&this.featuresRtree_.update(mt,T)}else B in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(T),this.nullGeometryFeatures_[B]=T);const A=T.getId();if(void 0!==A){const mt=A.toString();this.idIndex_[mt]!==T&&(this.removeFromIdIndex_(T),this.idIndex_[mt]=T)}else this.removeFromIdIndex_(T),this.uidIndex_[B]=T;this.changed(),this.dispatchEvent(new k(Q.Z.CHANGEFEATURE,T))}hasFeature(m){const T=m.getId();return void 0!==T?T in this.idIndex_:(0,g.sq)(m)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,D.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(m,T,B){const tt=this.loadedExtentsRtree_,A=this.strategy_(m,T,B);for(let mt=0,st=A.length;mt<st;++mt){const xt=A[mt];tt.forEachInExtent(xt,function(ft){return(0,o.r4)(ft.extent,xt)})||(++this.loadingExtentsCount_,this.dispatchEvent(new k(Q.Z.FEATURESLOADSTART)),this.loader_.call(this,xt,T,B,ft=>{--this.loadingExtentsCount_,this.dispatchEvent(new k(Q.Z.FEATURESLOADEND,void 0,ft))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new k(Q.Z.FEATURESLOADERROR))}),tt.insert(xt,{extent:xt.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(m){const T=this.loadedExtentsRtree_;let B;T.forEachInExtent(m,function(tt){if((0,o.fS)(tt.extent,m))return B=tt,!0}),B&&T.remove(B)}removeFeature(m){if(!m)return;const T=(0,g.sq)(m);T in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[T]:this.featuresRtree_&&this.featuresRtree_.remove(m),this.removeFeatureInternal(m)&&this.changed()}removeFeatureInternal(m){const T=(0,g.sq)(m),B=this.featureChangeKeys_[T];if(!B)return;B.forEach(n.bN),delete this.featureChangeKeys_[T];const tt=m.getId();return void 0!==tt&&delete this.idIndex_[tt.toString()],delete this.uidIndex_[T],this.dispatchEvent(new k(Q.Z.REMOVEFEATURE,m)),m}removeFromIdIndex_(m){let T=!1;for(const B in this.idIndex_)if(this.idIndex_[B]===m){delete this.idIndex_[B],T=!0;break}return T}setLoader(m){this.loader_=m}setUrl(m){(0,R.h)(this.format_,"`format` must be set when `url` is set"),this.url_=m,this.setLoader(O(m,this.format_))}}},4412:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>it});const it={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>M});var it=v(2402),K=v(760),nt=v(119),F=v(9466);const M=class ${constructor(Q){this.rbush_=new it(Q),this.items_={}}insert(Q,j){const p={minX:Q[0],minY:Q[1],maxX:Q[2],maxY:Q[3],value:j};this.rbush_.insert(p),this.items_[(0,nt.sq)(j)]=p}load(Q,j){const p=new Array(j.length);for(let y=0,H=j.length;y<H;y++){const a=Q[y],R=j[y],o={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:R};p[y]=o,this.items_[(0,nt.sq)(R)]=o}this.rbush_.load(p)}remove(Q){const j=(0,nt.sq)(Q),p=this.items_[j];return delete this.items_[j],null!==this.rbush_.remove(p)}update(Q,j){const p=this.items_[(0,nt.sq)(j)];(0,K.fS)([p.minX,p.minY,p.maxX,p.maxY],Q)||(this.remove(j),this.insert(Q,j))}getAll(){return this.rbush_.all().map(function(j){return j.value})}getInExtent(Q){return this.rbush_.search({minX:Q[0],minY:Q[1],maxX:Q[2],maxY:Q[3]}).map(function(y){return y.value})}forEach(Q){return this.forEach_(this.getAll(),Q)}forEachInExtent(Q,j){return this.forEach_(this.getInExtent(Q),j)}forEach_(Q,j){let p;for(let y=0,H=Q.length;y<H;y++)if(p=j(Q[y]),p)return p;return p}isEmpty(){return(0,F.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(Q){const j=this.rbush_.toJSON();return(0,K.T9)(j.minX,j.minY,j.maxX,j.maxY,Q)}concat(Q){this.rbush_.load(Q.rbush_.all());for(const j in Q.items_)this.items_[j]=Q.items_[j]}}},7392:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>nt});var it=v(8225);class K extends it.Z{constructor($){super({points:1/0,fill:($=$||{radius:5}).fill,radius:$.radius,stroke:$.stroke,scale:void 0!==$.scale?$.scale:1,rotation:void 0!==$.rotation?$.rotation:0,rotateWithView:void 0!==$.rotateWithView&&$.rotateWithView,displacement:void 0!==$.displacement?$.displacement:[0,0],declutterMode:$.declutterMode})}clone(){const $=this.getScale(),M=new K({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray($)?$.slice():$,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return M.setOpacity(this.getOpacity()),M}setRadius($){this.radius_=$,this.render()}}const nt=K},5044:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>K});class it{constructor(F){this.color_=void 0!==(F=F||{}).color?F.color:null}clone(){const F=this.getColor();return new it({color:Array.isArray(F)?F.slice():F||void 0})}getColor(){return this.color_}setColor(F){this.color_=F}}const K=it},9570:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>g});var it=v(9972),K=v(521),nt=v(6398),F=v(3783),$=v(1911),M=v(8007),pt=v(1992),Q=v(3641),j=v(2956);let p=null;class y extends M.Z{constructor(n,h,u,O,Z){super(),this.hitDetectionImage_=null,this.image_=n,this.crossOrigin_=u,this.canvas_={},this.color_=Z,this.imageState_=void 0===O?K.Z.IDLE:O,this.size_=n&&n.width&&n.height?[n.width,n.height]:null,this.src_=h}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===K.Z.LOADED){p||(p=(0,pt.E4)(1,1,void 0,{willReadFrequently:!0})),p.drawImage(this.image_,0,0);try{p.getImageData(0,0,1,1),this.tainted_=!1}catch{p=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(it.Z.CHANGE)}handleImageError_(){this.imageState_=K.Z.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=K.Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(n){return this.image_||this.initializeImage_(),this.replaceColor_(n),this.canvas_[n]?this.canvas_[n]:this.image_}getPixelRatio(n){return this.replaceColor_(n),this.canvas_[n]?n:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const n=this.size_[0],h=this.size_[1],u=(0,pt.E4)(n,h);u.fillRect(0,0,n,h),this.hitDetectionImage_=u.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===K.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=K.Z.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,Q.Q9)(this.image_,this.src_).then(n=>{this.image_=n,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(n){if(!this.color_||this.canvas_[n]||this.imageState_!==K.Z.LOADED)return;const h=this.image_,u=document.createElement("canvas");u.width=Math.ceil(h.width*n),u.height=Math.ceil(h.height*n);const O=u.getContext("2d");O.scale(n,n),O.drawImage(h,0,0),O.globalCompositeOperation="multiply",O.fillStyle=(0,F.XC)(this.color_),O.fillRect(0,0,u.width/n,u.height/n),O.globalCompositeOperation="destination-in",O.drawImage(h,0,0),this.canvas_[n]=u}}var R=v(119);function o(D,n,h,u){return void 0!==h&&void 0!==u?[h/D,u/n]:void 0!==h?h/D:void 0!==u?u/n:1}class f extends nt.Z{constructor(n){super({opacity:void 0!==(n=n||{}).opacity?n.opacity:1,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,declutterMode:n.declutterMode}),this.anchor_=void 0!==n.anchor?n.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:"fraction",this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;const k=void 0!==n.img?n.img:null;let W,U=n.src;if((0,$.h)(!(void 0!==U&&k),"`image` and `src` cannot be provided at the same time"),(void 0===U||0===U.length)&&k&&(U=k.src||(0,R.sq)(k)),(0,$.h)(void 0!==U&&U.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,$.h)(!((void 0!==n.width||void 0!==n.height)&&void 0!==n.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==n.src?W=K.Z.IDLE:void 0!==k&&(W=k instanceof HTMLImageElement?k.complete?k.src?K.Z.LOADED:K.Z.IDLE:K.Z.LOADING:K.Z.LOADED),this.color_=void 0!==n.color?(0,F._2)(n.color):null,this.iconImage_=function H(D,n,h,u,O){let Z=void 0===n?void 0:j.c.get(n,h,O);return Z||(Z=new y(D,D instanceof HTMLImageElement?D.src||void 0:n,h,u,O),j.c.set(n,h,O,Z)),Z}(k,U,this.crossOrigin_,W,this.color_),this.offset_=void 0!==n.offset?n.offset:[0,0],this.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==n.size?n.size:null,void 0!==n.width||void 0!==n.height){let X,m;if(n.size)[X,m]=n.size;else{const T=this.getImage(1);if(T.width&&T.height)X=T.width,m=T.height;else if(T instanceof HTMLImageElement){this.initialOptions_=n;const B=()=>{if(this.unlistenImageChange(B),!this.initialOptions_)return;const tt=this.iconImage_.getSize();this.setScale(o(tt[0],tt[1],n.width,n.height))};return void this.listenImageChange(B)}}void 0!==X&&this.setScale(o(X,m,n.width,n.height))}}clone(){let n,h,u;return this.initialOptions_?(h=this.initialOptions_.width,u=this.initialOptions_.height):(n=this.getScale(),n=Array.isArray(n)?n.slice():n),new f({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:n,width:h,height:u,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let n=this.normalizedAnchor_;if(!n){n=this.anchor_;const O=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!O)return null;n=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(n[0]*=O[0]),"fraction"==this.anchorYUnits_&&(n[1]*=O[1])}if("top-left"!=this.anchorOrigin_){if(!O)return null;n===this.anchor_&&(n=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(n[0]=-n[0]+O[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(n[1]=-n[1]+O[1])}this.normalizedAnchor_=n}const h=this.getDisplacement(),u=this.getScaleArray();return[n[0]-h[0]/u[0],n[1]+h[1]/u[1]]}setAnchor(n){this.anchor_=n,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(n){return this.iconImage_.getImage(n)}getPixelRatio(n){return this.iconImage_.getPixelRatio(n)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let n=this.offset_;if("top-left"!=this.offsetOrigin_){const h=this.getSize(),u=this.iconImage_.getSize();if(!h||!u)return null;n=n.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(n[0]=u[0]-h[0]-n[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(n[1]=u[1]-h[1]-n[1])}return this.origin_=n,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const n=this.getScaleArray();return this.size_?this.size_[0]*n[0]:this.iconImage_.getImageState()==K.Z.LOADED?this.iconImage_.getSize()[0]*n[0]:void 0}getHeight(){const n=this.getScaleArray();return this.size_?this.size_[1]*n[1]:this.iconImage_.getImageState()==K.Z.LOADED?this.iconImage_.getSize()[1]*n[1]:void 0}setScale(n){delete this.initialOptions_,super.setScale(n)}listenImageChange(n){this.iconImage_.addEventListener(it.Z.CHANGE,n)}load(){this.iconImage_.load()}unlistenImageChange(n){this.iconImage_.removeEventListener(it.Z.CHANGE,n)}}const g=f},6398:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>F});var it=v(119),K=v(1750);class nt{constructor(M){this.opacity_=M.opacity,this.rotateWithView_=M.rotateWithView,this.rotation_=M.rotation,this.scale_=M.scale,this.scaleArray_=(0,K.Pq)(M.scale),this.displacement_=M.displacement,this.declutterMode_=M.declutterMode}clone(){const M=this.getScale();return new nt({opacity:this.getOpacity(),scale:Array.isArray(M)?M.slice():M,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,it.O3)()}getImage(M){return(0,it.O3)()}getHitDetectionImage(){return(0,it.O3)()}getPixelRatio(M){return 1}getImageState(){return(0,it.O3)()}getImageSize(){return(0,it.O3)()}getOrigin(){return(0,it.O3)()}getSize(){return(0,it.O3)()}setDisplacement(M){this.displacement_=M}setOpacity(M){this.opacity_=M}setRotateWithView(M){this.rotateWithView_=M}setRotation(M){this.rotation_=M}setScale(M){this.scale_=M,this.scaleArray_=(0,K.Pq)(M)}listenImageChange(M){(0,it.O3)()}load(){(0,it.O3)()}unlistenImageChange(M){(0,it.O3)()}}const F=nt},8225:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>Q});var it=v(521),K=v(6398),nt=v(3783),F=v(5813),$=v(1992),M=v(4686);class pt extends K.Z{constructor(p){super({opacity:1,rotateWithView:void 0!==p.rotateWithView&&p.rotateWithView,rotation:void 0!==p.rotation?p.rotation:0,scale:void 0!==p.scale?p.scale:1,displacement:void 0!==p.displacement?p.displacement:[0,0],declutterMode:p.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==p.fill?p.fill:null,this.origin_=[0,0],this.points_=p.points,this.radius_=void 0!==p.radius?p.radius:p.radius1,this.radius2_=p.radius2,this.angle_=void 0!==p.angle?p.angle:0,this.stroke_=void 0!==p.stroke?p.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const p=this.getScale(),y=new pt({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(p)?p.slice():p,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return y.setOpacity(this.getOpacity()),y}getAnchor(){const p=this.size_;if(!p)return null;const y=this.getDisplacement(),H=this.getScaleArray();return[p[0]/2-y[0]/H[0],p[1]/2+y[1]/H[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(p){this.fill_=p,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(p){let y=this.canvas_[p];if(!y){const H=this.renderOptions_,a=(0,$.E4)(H.size*p,H.size*p);this.draw_(H,a,p),y=a.canvas,this.canvas_[p]=y}return y}getPixelRatio(p){return p}getImageSize(){return this.size_}getImageState(){return it.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(p){this.stroke_=p,this.render()}listenImageChange(p){}load(){}unlistenImageChange(p){}calculateLineJoinSize_(p,y,H){if(0===y||this.points_===1/0||"bevel"!==p&&"miter"!==p)return y;let a=this.radius_,R=void 0===this.radius2_?a:this.radius2_;if(a<R){const tt=a;a=R,R=tt}const f=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),g=R*Math.sin(f),n=a-Math.sqrt(R*R-g*g),h=Math.sqrt(g*g+n*n),u=h/g;if("miter"===p&&u<=H)return u*y;const O=y/2/u,Z=y/2*(n/h),U=Math.sqrt((a+O)*(a+O)+Z*Z)-a;if(void 0===this.radius2_||"bevel"===p)return 2*U;const W=a*Math.sin(f),m=R-Math.sqrt(a*a-W*W),B=Math.sqrt(W*W+m*m)/W;return B<=H?2*Math.max(U,B*y/2-R-a):2*U}createRenderOptions(){let o,p=M.mb,y=M.rc,H=0,a=null,R=0,f=0;this.stroke_&&(o=this.stroke_.getColor(),null===o&&(o=M.Tx),o=(0,F.y)(o),f=this.stroke_.getWidth(),void 0===f&&(f=M.yC),a=this.stroke_.getLineDash(),R=this.stroke_.getLineDashOffset(),y=this.stroke_.getLineJoin(),void 0===y&&(y=M.rc),p=this.stroke_.getLineCap(),void 0===p&&(p=M.mb),H=this.stroke_.getMiterLimit(),void 0===H&&(H=M.V4));const g=this.calculateLineJoinSize_(y,f,H),D=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:o,strokeWidth:f,size:Math.ceil(2*D+g),lineCap:p,lineDash:a,lineDashOffset:R,lineJoin:y,miterLimit:H}}render(){this.renderOptions_=this.createRenderOptions();const p=this.renderOptions_.size;this.canvas_={},this.size_=[p,p]}draw_(p,y,H){if(y.scale(H,H),y.translate(p.size/2,p.size/2),this.createPath_(y),this.fill_){let a=this.fill_.getColor();null===a&&(a=M.bL),y.fillStyle=(0,F.y)(a),y.fill()}this.stroke_&&(y.strokeStyle=p.strokeStyle,y.lineWidth=p.strokeWidth,p.lineDash&&(y.setLineDash(p.lineDash),y.lineDashOffset=p.lineDashOffset),y.lineCap=p.lineCap,y.lineJoin=p.lineJoin,y.miterLimit=p.miterLimit,y.stroke())}createHitDetectionCanvas_(p){if(this.fill_){let y=this.fill_.getColor(),H=0;if("string"==typeof y&&(y=(0,nt._2)(y)),null===y?H=1:Array.isArray(y)&&(H=4===y.length?y[3]:1),0===H){const a=(0,$.E4)(p.size,p.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(p,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(p){let y=this.points_;const H=this.radius_;if(y===1/0)p.arc(0,0,H,0,2*Math.PI);else{const a=void 0===this.radius2_?H:this.radius2_;void 0!==this.radius2_&&(y*=2);const R=this.angle_-Math.PI/2,o=2*Math.PI/y;for(let f=0;f<y;f++){const g=R+f*o,D=f%2==0?H:a;p.lineTo(D*Math.cos(g),D*Math.sin(g))}p.closePath()}}drawHitDetectionCanvas_(p,y){y.translate(p.size/2,p.size/2),this.createPath_(y),y.fillStyle=M.bL,y.fill(),this.stroke_&&(y.strokeStyle=p.strokeStyle,y.lineWidth=p.strokeWidth,p.lineDash&&(y.setLineDash(p.lineDash),y.lineDashOffset=p.lineDashOffset),y.lineJoin=p.lineJoin,y.miterLimit=p.miterLimit,y.stroke())}}const Q=pt},6785:(Rt,gt,v)=>{"use strict";v.d(gt,{Z:()=>K});class it{constructor(F){this.color_=void 0!==(F=F||{}).color?F.color:null,this.lineCap_=F.lineCap,this.lineDash_=void 0!==F.lineDash?F.lineDash:null,this.lineDashOffset_=F.lineDashOffset,this.lineJoin_=F.lineJoin,this.miterLimit_=F.miterLimit,this.width_=F.width}clone(){const F=this.getColor();return new it({color:Array.isArray(F)?F.slice():F||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(F){this.color_=F}setLineCap(F){this.lineCap_=F}setLineDash(F){this.lineDash_=F}setLineDashOffset(F){this.lineDashOffset_=F}setLineJoin(F){this.lineJoin_=F}setMiterLimit(F){this.miterLimit_=F}setWidth(F){this.width_=F}}const K=it},109:(Rt,gt,v)=>{"use strict";v.d(gt,{J$:()=>M,Ly:()=>j,ZP:()=>y,yF:()=>Q});var it=v(7392),K=v(5044),nt=v(6785),F=v(1911);class ${constructor(a){a=a||{},this.geometry_=null,this.geometryFunction_=p,void 0!==a.geometry&&this.setGeometry(a.geometry),this.fill_=void 0!==a.fill?a.fill:null,this.image_=void 0!==a.image?a.image:null,this.renderer_=void 0!==a.renderer?a.renderer:null,this.hitDetectionRenderer_=void 0!==a.hitDetectionRenderer?a.hitDetectionRenderer:null,this.stroke_=void 0!==a.stroke?a.stroke:null,this.text_=void 0!==a.text?a.text:null,this.zIndex_=a.zIndex}clone(){let a=this.getGeometry();return a&&"object"==typeof a&&(a=a.clone()),new $({geometry:a,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(a){this.renderer_=a}setHitDetectionRenderer(a){this.hitDetectionRenderer_=a}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(a){this.fill_=a}getImage(){return this.image_}setImage(a){this.image_=a}getStroke(){return this.stroke_}setStroke(a){this.stroke_=a}getText(){return this.text_}setText(a){this.text_=a}getZIndex(){return this.zIndex_}setGeometry(a){"function"==typeof a?this.geometryFunction_=a:"string"==typeof a?this.geometryFunction_=function(R){return R.get(a)}:a?void 0!==a&&(this.geometryFunction_=function(){return a}):this.geometryFunction_=p,this.geometry_=a}setZIndex(a){this.zIndex_=a}}function M(H){let a;if("function"==typeof H)a=H;else{let R;Array.isArray(H)?R=H:((0,F.h)("function"==typeof H.getZIndex,"Expected an `Style` or an array of `Style`"),R=[H]),a=function(){return R}}return a}let pt=null;function Q(H,a){if(!pt){const R=new K.Z({color:"rgba(255,255,255,0.4)"}),o=new nt.Z({color:"#3399CC",width:1.25});pt=[new $({image:new it.Z({fill:R,stroke:o,radius:5}),fill:R,stroke:o})]}return pt}function j(){const H={},a=[255,255,255,1],R=[0,153,255,1];return H.Polygon=[new $({fill:new K.Z({color:[255,255,255,.5]})})],H.MultiPolygon=H.Polygon,H.LineString=[new $({stroke:new nt.Z({color:a,width:5})}),new $({stroke:new nt.Z({color:R,width:3})})],H.MultiLineString=H.LineString,H.Circle=H.Polygon.concat(H.LineString),H.Point=[new $({image:new it.Z({radius:6,fill:new K.Z({color:R}),stroke:new nt.Z({color:a,width:1.5})}),zIndex:1/0})],H.MultiPoint=H.Point,H.GeometryCollection=H.Polygon.concat(H.LineString,H.Point),H}function p(H){return H.getGeometry()}const y=$}}]);